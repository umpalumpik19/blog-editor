(()=>{"use strict";let e="cc";"undefined"!=typeof window&&(e=window.location.origin.split(".").pop(),"string"==typeof e&&2===e.length||(e="cc"));const t={ru:"com",by:"biz",kz:"pro",cc:"one"}[e]||"com",n=[`https://app.tildacdn.${t}/tfront/plugins/sortable-lite/t-sortable-lite.min.js`,`https://app.tildacdn.${t}/tfront/plugins/sortable-lite/t-sortable-lite.min.css`],i=[`https://app.tildacdn.${t}/tfront/plugins/tooltip/t-tooltip.min.js`,`https://app.tildacdn.${t}/tfront/plugins/tooltip/t-tooltip.min.css`],o={container:"tcolors",containerThemeDark:"tcolors_dark",input:"tcolors__input",swatch:"tcolors__swatch",panel:"tcolors-panel",panelThemeDark:"tcolors-panel_dark",gradient:"tcolors-gradient",clearBtn:"tcolors__clear-btn"},s={position:"bottom",closeDelay:0,maxWidth:200},r={selector:`.${o.panel}__swatch`,handleSelector:`.${o.panel}__swatch`,autoScroll:{speedIndex:.4},isAutoUpdateEnabled:!0,dragImage:{zIndex:99999}},l={styles:"styles","document-color":"document_colors",swatches:"saved_colors",tilda:"tilda_colors","tilda-gradients":"tilda_gradients"},a=["styles","document_colors","saved_colors","tilda_colors","tilda_gradients"],c="https://front.tildacdn.com/colors/colors/colors.json",d=2592e5,h=24,p=["blue","aqua","mintgreen","green","lightgreen","yellow","peach","orange","pink","red","purple","violet","darkgray","lightgray","grayshades"];var u=function(e,t,n,i){var o;t[0]=0;for(var s=1;s<t.length;s++){var r=t[s++],l=t[s]?(t[0]|=r?1:2,n[t[s++]]):t[++s];3===r?i[0]=l:4===r?i[1]=Object.assign(i[1]||{},l):5===r?(i[1]=i[1]||{})[t[++s]]=l:6===r?i[1][t[++s]]+=l+"":r?(o=e.apply(l,u(e,l,n,["",null])),i.push(o),l[0]?t[0]|=2:(t[s-2]=0,t[s]=o)):i.push(l)}return i},g=new Map;const m={EN:{solid:"Solid",linear:"Linear",radial:"Radial",document_colors:"Colors on page",saved_colors:"Saved colors",tilda_colors:"Colors library",tilda_gradients:"Gradients library",save_color:"Save color",pick_color:"Pick color from screen",apply:"Apply",clear:"Clear",contrast_ratio:"Contrast",contrast_hint:"The contrast ratio gauges the level of accessibility of your website for individuals with visual impairments. A satisfactory contrast ratio is determined by the colors used for the foreground and background, as well as the size and weight of the font.",angle:"Angle",copied:"Copied",loading:"Loading...",load_error:"Load error",close:"Close panel",cancel:"Cancel",save:"Save",new_style:"New style",style_name:"Style name",style_descr:"Description",styles:"Project styles",unpin_style:"Disconnect style",deleted:"Deleted"},RU:{solid:"Сплошной цвет",linear:"Линейный градиент",radial:"Радиальный градиент",document_colors:"Цвета на странице",saved_colors:"Сохранённые цвета",tilda_colors:"Библиотека цветов",tilda_gradients:"Библиотека градиентов",save_color:"Сохранить цвет",pick_color:"Выбрать цвет с экрана",apply:"Применить",clear:"Очистить",contrast_ratio:"Контраст",contrast_hint:"Коэффициент цветового контраста позволяет оценить доступность вашего сайта для людей с нарушением зрения. Он зависит от цвета текста и фона, а также от размера и насыщенности текста.",angle:"Угол",copied:"Скопировано",loading:"Загрузка...",load_error:"Ошибка загрузки",close:"Закрыть панель",cancel:"Отмена",save:"Сохранить",new_style:"Новый стиль",style_name:"Название стиля",style_descr:"Описание",styles:"Стили проекта",unpin_style:"Отсоединить стиль",deleted:"Удален"}};const y=function(e){var t=g.get(this);return t||(t=new Map,g.set(this,t)),(t=u(this,t.get(e)||(t.set(e,t=function(e){for(var t,n,i=1,o="",s="",r=[0],l=function(e){1===i&&(e||(o=o.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?r.push(0,e,o):3===i&&(e||o)?(r.push(3,e,o),i=2):2===i&&"..."===o&&e?r.push(4,e,0):2===i&&o&&!e?r.push(5,0,!0,o):i>=5&&((o||!e&&5===i)&&(r.push(i,0,o,n),i=6),e&&(r.push(i,e,0,n),i=6)),o=""},a=0;a<e.length;a++){a&&(1===i&&l(),l(a));for(var c=0;c<e[a].length;c++)t=e[a][c],1===i?"<"===t?(l(),r=[r],i=3):o+=t:4===i?"--"===o&&">"===t?(i=1,o=""):o=t+o[0]:s?t===s?s="":o+=t:'"'===t||"'"===t?s=t:">"===t?(l(),i=1):i&&("="===t?(i=5,n=o,o=""):"/"===t&&(i<5||">"===e[a][c+1])?(l(),3===i&&(r=r[0]),i=r,(r=r[0]).push(2,0,i),i=0):" "===t||"\t"===t||"\n"===t||"\r"===t?(l(),i=2):o+=t),3===i&&"!--"===o&&(i=4,r=r[0])}return l(),r}(e)),t),arguments,[])).length>1?t:t[0]}.bind((function(e,t){this[0]=3;for(var n=arguments.length,o=new Array(n>2?n-2:0),r=2;r<n;r++)o[r-2]=arguments[r];if("function"==typeof e){const n=new e(t).render();return n.append(...o.flat()),n}if("string"==typeof e){const n=["svg","circle"].includes(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return t&&Object.entries(t).forEach((e=>{let[t,o]=e;if(t.startsWith("on"))Array.isArray(o)?o.forEach((e=>n.addEventListener(t.substring(2).toLowerCase(),e))):n.addEventListener(t.substring(2).toLowerCase(),o);else if("className"===t)n.classList.add(...o.split(" "));else if("tooltip"===t)r=n,l=o,v(i).then((()=>{if(!window.Tooltip)return;const e=new window.Tooltip({...s,target:r,content:{title:l}});r.updateTooltipContent=e.updateContent.bind(e)}));else if("bindTo"===t){if(Array.isArray(o)){const[e,t]=o;e&&"object"==typeof e&&"string"==typeof t&&(e[t]=n)}}else["string","number"].includes(typeof o)?n.setAttribute(t,o):"boolean"==typeof o&&o&&n.setAttribute(t,"");var r,l})),n.append(...o.flat()),n}if(e instanceof Element)return e}));function f(){const e=[];return{on:t=>{e.push(t)},trigger:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e.forEach((e=>e(...n)))}}}function v(e){const t=(Array.isArray(e)?e:[e]).map((e=>{const t=e.split(".").pop(),n=e+(window.ver?"?v="+window.ver:"");return["js","css"].includes(t)?function(e,t){return new Promise(((n,i)=>{const o="style"===t,s=o?"link":"script",r=o?"href":"src";let l;try{const{pathname:t}=new URL(e,window.location.href);l=t}catch(t){l=e}const a=document.querySelector(`${s}[${r}*="${l}"]`);if(a)return"true"===a.getAttribute("data-loading")?(a.addEventListener("load",n),void a.addEventListener("error",i)):n();const c=document.createElement(s);c.setAttribute(r,e),o&&c.setAttribute("rel","stylesheet"),c.setAttribute("data-loading","true"),c.addEventListener("load",(()=>(c.removeAttribute("data-loading"),n()))),c.addEventListener("error",(()=>(document.head.removeChild(c),i()))),document.head.appendChild(c)}))}(n,"js"===t?"script":"style"):Promise.reject("Unknown resource extension. Make sure the resource url ends with .css or .js")}));return Promise.all(t)}function $(e,t,n){return(n||m)[t][e]||(n||m).EN[e]||e}function b(e,t){let n=null;return function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];n||(n=window.setTimeout((()=>{e.apply(null,o),window.clearTimeout(n),n=null}),t))}}function w(e,t){let n=null;return function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];window.clearTimeout(n),n=window.setTimeout((()=>{e.apply(null,o)}),t)}}function C(e,t){if(!e)return[0,0,0];const n=(n=>{if(!t){const t=function(e){if(e.toLowerCase().includes("gradient"))return null;const t="#010101";if(O.fillStyle=t,O.fillStyle=e,O.fillStyle!==t)return O.fillStyle;return null}(n);t&&(n=t,e=t)}return n.startsWith("rgba")?"rgba":n.startsWith("rgb")?"rgb":n.startsWith("hsl")?"hsl":"hex"})(e=String(e).toLowerCase());return"rgb"===n?(e=>{let t=e.replace(/[^0-9,.]/g,"").split(",");return t.splice(3,t.length),t.length?(t=t.map((e=>{const t=parseFloat(e)||0;return t>255?255:t})),1===t.length&&t.push(0,0),2===t.length&&t.push(0),L(t)):[0,0,0]})(e):"rgba"===n?(e=>{let t=e.replace(/[^0-9,.]/g,"").split(",");return t.splice(4,t.length),t.length?(1===t.length&&t.push(0,0,1),2===t.length&&t.push(0,1),3===t.length&&t.push(1),t=t.map(((e,t)=>{if(3===t){let t=parseFloat(e);return t=B(t)?t:1,t=t>1?1:t<0?0:t,t}{let t=parseInt(e,10)||0;return t=t>255?255:t<0?0:t,t}})),t[3]=parseFloat(t[3].toFixed(2)),[...L([t[0],t[1],t[2]]),t[3]]):[0,0,0,1]})(e):"hsl"===n?(e=>{let t=e.replace(/[^0-9,.]/g,"").split(",");return t.splice(3,t.length),t.length?(t=t.map(((e,t)=>{const n=parseFloat(e)||0;return t?n>100?1:n/100:n>360?1:n/360})),1===t.length&&t.push(0,0),2===t.length&&t.push(0),t):[0,0,0]})(e):"hex"===n?(e=>{let t=e.replace(/[^0-9a-fA-F]/g,"").substring(0,6).toLowerCase();return t.length?6===t.length?S(t):(t.length>3&&(t=t.substring(0,3)),t.length<3?(t=t.padEnd(6,t),S(t)):S(t[0]+t[0]+t[1]+t[1]+t[2]+t[2])):S("000000")})(e):[0,0,0]}function E(e){let{rawValue:t,isNoKeyColor:n,styles:i}=e;if(!t)return!1;t=String(t).trim().replace(/\s{2,}/g,"");return t.startsWith("linear-gradient")?(e=>{let t=e.match(/^linear-gradient\((.+)\)$/);if(!t)return!1;if(t=t[1],!t)return!1;const o=J(t);if(o.length<2)return!1;let s,r=o[0];if(r.includes("deg")||r.includes("turn")||r.includes("rad")){const e=r.includes("deg")?"deg":r.includes("turn")?"turn":"rad";r=r.replace(/\s/g,"").replace(/[a-z]/g,""),r=parseFloat(r),r=B(r)?r:0,"deg"===e&&(r/=360),"rad"===e&&(r/=2*Math.PI),r=r>=0&&r<=1?r:1,s=o.splice(1)}else r=0,s=o;let l=!1;return s.splice(15),s=s.map(((e,t)=>{const o=J(e," ");if(o.length>2)return void(l=!0);const r=o[0],a=q(r),c=Array.isArray(i)&&i.find((e=>{let{id:t}=e;return t&&t===a?.id}))||null,d=c?.vars?.color,h=d||a?.value||r,p=c?H(c):null;p&&delete p.vars;const u=C(h,n);let g,m=1;return 4===u.length&&(m=u[3],u.splice(3)),o[1]?(g=o[1].replace(/[^0-9.]/g,""),g=parseFloat(g),g=B(g)&&g>=0&&g<=100?g:0,g/=100):g=t/(s.length-1),{color:u,position:g,opacity:m,style:p}})),!l&&(r=parseFloat(r.toFixed(3)),{type:"linear",stops:s,angle:r})})(t):!!t.startsWith("radial-gradient")&&(e=>{const t=e.match(/^radial-gradient\((.+)\)$/)[1];if(!t)return!1;const o=J(t);if(o.length<2)return!1;let s;s=o[0].includes("circle")||o[0].includes("ellipse")||o[0].includes("side")||o[0].includes("corner")?o.splice(1):o;let r=!1;return s.splice(15),s=s.map(((e,t)=>{const o=J(e," ");if(o.length>2)return void(r=!0);const l=o[0],a=q(l),c=Array.isArray(i)&&i.find((e=>{let{id:t}=e;return t&&t===a?.id}))||null,d=c?.vars?.color,h=d||a?.value||l,p=c?H(c):null;p&&delete p.vars;const u=C(h,n);let g,m=1;return 4===u.length&&(m=u[3],u.splice(3)),o[1]?(g=o[1].replace(/[^0-9.]/g,""),g=parseFloat(g),g=B(g)&&g>=0&&g<=100?g:0,g/=100):g=t/(s.length-1),{color:u,position:g,opacity:m,style:p}})),!r&&{type:"radial",stops:s,angle:0}})(t)}function _(e){e=e.replace(/#/g,"");return[parseInt(e.substring(0,2),16),parseInt(e.substring(2,4),16),parseInt(e.substring(4,6),16)]}function S(e){return L(_(e))}function T(e){let[t,n,i]=e;t*=360;const o=(1-Math.abs(2*i-1))*n,s=t/60,r=o*(1-Math.abs(s%2-1));let l;l=s>=0&&s<1?[o,r,0]:s>=1&&s<2?[r,o,0]:s>=2&&s<3?[0,o,r]:s>=3&&s<4?[0,r,o]:s>=4&&s<5?[r,0,o]:[o,0,r];const a=i-o/2,[c,d,h]=l;let[p,u,g]=[c+a,d+a,h+a];return p=Math.round(255*p),u=Math.round(255*u),g=Math.round(255*g),[p,u,g]}function k(e){const t=T(e);let n=B(e[3])&&e[3]>=0&&e[3]<=1?e[3]:1;return n=parseFloat(n.toFixed(2)),[...t,n]}function P(e){return e.map((e=>{const t=Number(e).toString(16);return 1===t.length?"0"+t:t})).join("")}function M(e){return P(T(e))}function L(e){let[t,n,i]=e;t/=255,n/=255,i/=255;const o=Math.max(t,n,i),s=Math.min(t,n,i),r=o-s;let l,a,c=(o+s)/2;return 0===r?l=0:o===t?l=(n-i)/r%6*60:o===n?l=60*((i-t)/r+2):o===i&&(l=60*((t-n)/r+4)),a=0===c||1===c?0:(o-c)/Math.min(c,1-c),l/=360,l<0&&(l+=1),l=parseFloat(l.toFixed(4)),a=parseFloat(a.toFixed(4)),c=parseFloat(c.toFixed(4)),[l,a,c]}function D(e){let[t,n,i]=e,o=i*(1-n/2),s=0===o||1===o?0:(i-o)/Math.min(o,1-o);return t=parseFloat(t.toFixed(4)),s=parseFloat(s.toFixed(4)),o=parseFloat(o.toFixed(4)),[t,s,o]}function x(e){let[t,n,i]=e,o=i+n*Math.min(i,1-i),s=0===o?0:2*(1-i/o);return t=parseFloat(t.toFixed(4)),s=parseFloat(s.toFixed(4)),o=parseFloat(o.toFixed(4)),[t,s,o]}const O=document.createElement("canvas").getContext("2d");function I(e){const[t,n,i]=T(e).map((e=>(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)));return.2126*t+.7152*n+.0722*i}function N(e,t){const n=T(e),i=B(t)&&t>=0&&t<=1?t:1;return`rgba(${n.join(",")},${i})`}function V(e,t){if(!e)return"";const n=t?"linear":e.type,i=e.stops.map((e=>{const t=N(e.color,e.opacity);return e.style?.id?`var(--uc-color-color-${e.style.id},${t}) ${Math.round(100*e.position)}%`:`${t} ${Math.round(100*e.position)}%`})).join(",");return"linear"===n?`linear-gradient(${t?.25:e.angle}turn,${i})`:"radial"===n?`radial-gradient(circle at center,${i})`:void 0}function A(e){let{currentValues:t,hsl:n,opacity:i,saveGradient:o=!0,saveStyle:s=!1}=e;if(B(i)&&1!==i&&!n&&(n=[0,0,0]),s||(t.style=null),t.gradient&&Array.isArray(t.gradient.stops)&&t.gradient.stops.length&&o){const e=t.gradient.stops.find((e=>{let{active:t}=e;return t}))||t.gradient.stops[0];e.color=n?[...n]:[0,0,0],e.opacity=i,e.style=t.style}else t.gradient=null;t.color=n,t.opacity=i}function F(e,t,n,i){const o=t&&!n,s=window.getComputedStyle(e),r=[],l=s.getPropertyValue("opacity"),a=s.getPropertyValue("display"),c=s.getPropertyValue("visibility");if("0"===l||"none"===a||"hidden"===c)return r;const d=s.getPropertyValue("background-color"),h=s.getPropertyValue("color"),p=s.getPropertyValue("background-image"),u=s.getPropertyValue("border-color"),g=s.getPropertyValue("border-style"),m=s.getPropertyValue("box-shadow").replace(/\).*/,")");if("none"!==d&&"rgba(0, 0, 0, 0)"!==d){const e=k(C(d,!0)),t=e[3];(o||1===t)&&r.push("rgba("+e.join(",")+")")}if("none"!==p&&!p.startsWith("url")){const e=E({rawValue:p,isNoKeyColor:!0}),t=e&&Array.isArray(e.stops)&&e.stops.some((e=>e.opacity&&1!==e.opacity));if(e&&i&&(t&&o||!t)){const t=V(e);r.push(t)}}if("none"!==h&&"rgba(0, 0, 0, 0)"!==h&&e.childNodes.length){const e=k(C(h,!0)),t=e[3];(o||1===t)&&r.push("rgba("+e.join(",")+")")}if("none"!==u&&"rgba(0, 0, 0, 0)"!==u&&"none"!==g){const e=k(C(u,!0)),t=e[3];(o||1===t)&&r.push("rgba("+e.join(",")+")")}if("none"!==m&&"rgba(0, 0, 0, 0)"!==m){const e=k(C(m,!0)),t=e[3];(o||1===t)&&r.push("rgba("+e.join(",")+")")}return r}function U(e,t){const{endX:n,endY:i}=e,o=t.scrollLeft,s=t.scrollTop;let r;const l=e=>{void 0===r&&(r=performance.now());const a=(c=(e-r)/300)<.5?4*c*c*c:1-Math.pow(-2*c+2,3)/2;var c;t.scrollLeft=o+a*(n-o),t.scrollTop=s+a*(i-s),a<1?requestAnimationFrame(l):(t.scrollLeft=n,t.scrollTop=i)};requestAnimationFrame(l)}function W(e,t){if(e.includes("gradient")){const n=E({rawValue:e,isNoKeyColor:!0}),i=n.stops[0]?n.stops[0].color:null,o=n.stops[0]?n.stops[0].opacity:null,s=n.stops[n.stops.length-1]?n.stops[n.stops.length-1].color:null,r=n.stops[n.stops.length-1]?n.stops[n.stops.length-1].opacity:null,l=n.type;if(!(i&&B(o)&&s&&B(r)&&l))return"";const a="#"+M(i).toUpperCase(),c="#"+M(s).toUpperCase(),d=1===o?"":Math.floor(100*o)+"% ",h=1===r?"":Math.floor(100*r)+"% ";return($(l,t)+"<br>"+a+" "+d+"→ "+(n.stops.length>2?"... → ":"")+c+" "+h).trim()}const n=C(e,!0),i=B(n[3])?n[3]:1;return"#"+M(n).toUpperCase()+(1===i?"":" "+Math.floor(100*i)+"%")}function G(e,t,n){return Math.max(e,Math.min(t,n))}function B(e){return"number"==typeof e&&!isNaN(e)}function R(e,t){if("string"!=typeof e&&!B(e))return[t,t,t,t];const n=B(e)?[e]:e.trim().replace(/\s{2,}/g," ").split(" ").map((e=>{const n=parseInt(e,10);return B(n)?n:t}));return n.splice(4),n.length?1===n.length?[n[0],n[0],n[0],n[0]]:2===n.length?[n[0],n[1],n[0],n[1]]:3===n.length?[n[0],n[1],n[2],n[1]]:n:[t,t,t,t]}function j(e){const t=e=>{if(!e)return!1;const t=window.getComputedStyle(e),n=["auto","scroll"].includes(t.overflowX),i=["auto","scroll"].includes(t.overflowX),{offsetHeight:o,scrollHeight:s,offsetWidth:r,scrollWidth:l}=e;return l>r&&n||s>o&&i};e.addEventListener("wheel",(n=>{const{deltaX:i,deltaY:o,target:s}=n,r=(n=>{let i=n;for(;!t(i)&&(i=i.parentElement,i!==e&&i!==document.documentElement););return i})(s);let l;var a;l=Math.abs(i)>Math.abs(o)?"horizontal":Math.abs(i)<Math.abs(o)?"vertical":"both",(["vertical","both"].includes(l)&&((a=r)&&0===a.scrollTop&&o<0||(e=>e&&Math.ceil(e.scrollTop+e.clientHeight)>=e.scrollHeight)(r)&&o>0)||["horizontal","both"].includes(l)&&((e=>e&&0===e.scrollLeft)(r)&&i<0||(e=>e&&Math.ceil(e.scrollLeft+e.clientWidth)>=e.scrollWidth)(r)&&i>0))&&n.preventDefault()}),{passive:!1})}function z(e,t){const n=["left","right","top","bottom"];return Array.isArray(e)?(e=e.filter((e=>n.includes(e))),(e=[...new Set(e)]).length?(e.splice(4),e):t):n.includes(e)?[e]:t}function K(e,t){const n=function(e,t){const n=e[0]-t[0],i=e[1]-t[1],o=e[2]-t[2];return Math.sqrt(n*n+i*i+o*o)}(e,t);return(1-n/Math.sqrt(3)).toFixed(2)}function H(e){if(null===e||"object"!=typeof e)return e;const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=H(e[n]));return t}function X(){const e=new Uint8Array(1);crypto.getRandomValues(e);const t=5+e[0]%8,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",i=n+"0123456789",o=new Uint8Array(t);crypto.getRandomValues(o);let s=n[o[0]%52];for(let e=1;e<t;e++)s+=i[o[e]%62];return s}function q(e){if("string"!=typeof e)return null;const t=e.match(/var\(--uc-color-color-([a-zA-Z0-9]+),\s*([#0-9a-zA-Z\s(),.]+)\)/);return t?{id:t[1],value:t[2]}:null}function Y(e,t){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}function J(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";const n=[];let i=0,o=0;for(let s=0;s<e.length;s++){const r=e[s];"("===r?i++:")"===r?i>0&&i--:r===t&&0===i&&(n.push(e.slice(o,s).trim()),o=s+1)}return n.push(e.slice(o).trim()),n}function Z(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function Q(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var ee=new WeakSet,te=new WeakSet,ne=new WeakSet,ie=new WeakSet,oe=new WeakSet;class se{constructor(e){Z(this,oe),Z(this,ie),Z(this,ne),Z(this,te),Z(this,ee),this.props=e,this.elements={},this.props.colorUpdateTrigger.on(Q(this,oe,de).bind(this)),this.props.colorModeUpdateTrigger.on(Q(this,oe,de).bind(this)),this.props.panelToggleTrigger.on(Q(this,ie,ce).bind(this)),this.handlePointerMove=this.handlePointerMove.bind(this),this.handlePointerUp=this.handlePointerUp.bind(this)}render(){const e=y`
			<div className=${`${o.panel}__area`} onPointerDown=${Q(this,ee,re).bind(this)}>
				<div className=${`${o.panel}__area-inner`}></div>
				<div
					className=${`${o.panel}__area-picker`}
					style="display:none;"
					tabindex="0"
					onKeyDown=${Q(this,ne,ae).bind(this)}
					bindTo=${[this.elements,"picker"]}
				></div>
			</div>
		`;this.elements.container=e,setTimeout(Q(this,oe,de).bind(this),0);const{bindTo:t}=this.props;if(t){const[n,i]=t;n[i]=e}return e}handlePointerMove(e){const{clientX:t,clientY:n}=e;Q(this,te,le).call(this,t,n)}handlePointerUp(){document.removeEventListener("pointermove",this.handlePointerMove),document.removeEventListener("pointerup",this.handlePointerUp),document.documentElement.style.removeProperty("user-select"),document.documentElement.style.removeProperty("-webkit-user-select")}}function re(e){const{clientX:t,clientY:n}=e;Q(this,te,le).call(this,t,n),document.addEventListener("pointermove",this.handlePointerMove),document.addEventListener("pointerup",this.handlePointerUp),document.documentElement.style.userSelect="none",document.documentElement.style.webkitUserSelect="none"}function le(e,t){const n=this.elements.container.getBoundingClientRect(),{mode:i}=this.props.colorMode,{left:o,top:s,width:r,height:l}=n,{color:a,opacity:c}=this.props.currentValues,d=s+l,h=G(0,(e-o)/(o+r-o),1),p=G(0,(t-s)/(d-s),1),u=a&&a[0]||0,g=h,{currentValues:m,isStyleEditMode:y}=this.props;if("hsl"===i||1===p){A({currentValues:m,hsl:[u,g,1-p],opacity:c,saveStyle:y})}else{A({currentValues:m,hsl:D([u,g,1-p]),opacity:c,saveStyle:y})}this.props.colorChangeTrigger.trigger()}function ae(e){const{key:t}=e;if(!["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(t))return;e.preventDefault();const n=e.shiftKey?.05:.01,{mode:i}=this.props.colorMode,{currentValues:o,isStyleEditMode:s}=this.props,{color:r,opacity:l}=o;if(r){if("hsl"===i){let[e,i,a]=r;"ArrowUp"===t?(a+=n,a=a>1?1:a):"ArrowRight"===t?(i+=n,i=i>1?1:i):"ArrowDown"===t?(a-=n,a=a<0?0:a):"ArrowLeft"===t&&(i-=n,i=i<0?0:i),A({currentValues:o,hsl:[e,i,a],opacity:l,saveStyle:s})}else{let[e,i,a]=x(r);"ArrowUp"===t?(a+=n,a=a>1?1:a):"ArrowRight"===t?(i+=n,i=i>1?1:i):"ArrowDown"===t?(a-=n,a=a<0?0:a):"ArrowLeft"===t&&(i-=n,i=i<0?0:i),A({currentValues:o,hsl:D([e,i,a]),opacity:l,saveStyle:s})}this.props.colorChangeTrigger.trigger()}}function ce(e){if(e)return Q(this,oe,de).call(this);document.removeEventListener("pointermove",this.handlePointerMove),document.removeEventListener("pointerup",this.handlePointerUp),document.documentElement.style.removeProperty("user-select"),document.documentElement.style.removeProperty("-webkit-user-select")}function de(){const{mode:e}=this.props.colorMode,{container:t,picker:n}=this.elements,{color:i}=this.props.currentValues;if(t.classList.toggle(`${o.panel}__area_hsl`,"hsl"===e),!i)return t.style.setProperty("--current-hue","0turn"),n.style.removeProperty("transform"),void(n.style.display="none");n.style.removeProperty("display");const[s,r,l]=i,[,a,c]=x(i);t.style.setProperty("--current-hue",`${s}turn`);const{width:d,height:h}=t.getBoundingClientRect(),p="hsl"===e||0===c&&0!==r?d*r:d*a,u="hsl"===e?h*(1-l):h*(1-c);n.style.transform=`translate(${p}px,${u}px)`}class he{constructor(e){this.props=e}render(){const{className:e,hintText:t,label:n,bindTo:i}=this.props;let s=`${o.panel}__hint`;if(e&&(s+=` ${e}`),this.element=y`
			<div className=${s} tooltip=${t}>${n}</div>
		`,i){const[e,t]=i;e[t]=this.element}return this.element}}function pe(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function ue(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var ge=new WeakSet,me=new WeakSet;class ye{constructor(e){pe(this,me),pe(this,ge),this.props=e,this.elements={},this.props.panelToggleTrigger.on(ue(this,me,ve).bind(this)),this.props.colorUpdateTrigger.on(ue(this,ge,fe).bind(this))}render(){const{lang:e}=this.props,t=y`
			<div className=${`${o.panel}__contrast`} style="display:none;">
				<div className=${`${o.panel}__contrast-label`}>${$("contrast_ratio",e)}</div>
				<${he}
					className=${`${o.panel}__hint_contrast`}
					hintText=${$("contrast_hint",e)}
					label="?"
				/>
				<div className=${`${o.panel}__contrast-rate`} bindTo=${[this.elements,"rateElement"]}></div>
				<div className=${`${o.panel}__contrast-value`} bindTo=${[this.elements,"valueElement"]}></div>
			</div>
		`;return this.elements.container=t,t}}function fe(){const{color:e,gradient:t}=this.props.currentValues,{bgColor:n,isLargeTxt:i}=this,s=t||!e||!n,{container:r,rateElement:l,valueElement:a}=this.elements;if(s)return void(r.style.display="none");r.style.removeProperty("display");const c=function(e,t){const n=I(e),i=I(t),o=(Math.max(n,i)+.05)/(Math.min(n,i)+.05);return parseFloat(o.toFixed(2))}(e,n);let d="Fail";i&&c>=4.5||c>=7?d="AAA":(i&&c>=3||c>=4.5)&&(d="AA"),l.innerText=d,a.innerText=c,l.classList.toggle(`${o.panel}__contrast-rate_fail`,"Fail"===d)}function ve(e){if(e){const e=function(e){let t=e.name;if(!["text_color","title_color","descr_color","subtitle_color"].includes(t))return null;t=t.replace("_color","");const n=e.closest("[data-rec-id]");if(!n)return null;const i=n.getAttribute("data-rec-id");return document.querySelector(`#rec${i} [field="${t}"]`)||null}(this.props.input);this.bgColor=function(e){if(!e)return null;let t=e,n=null;for(;t;){const e=window.getComputedStyle(t),i=e.getPropertyValue("background-color"),o=e.getPropertyValue("background-image");if("rgba(0, 0, 0, 0)"!==i&&"none"===o){n=C(i,!0);break}if("none"!==o)break;t=t.parentElement}return n}(e),this.isLargeTxt=function(e){if(!e)return!1;const t=window.getComputedStyle(e),n=t.getPropertyValue("font-size").replace(/[^0-9]/g,""),i=t.getPropertyValue("font-weight");return n>=24||n>=18.66&&i>=700}(e),ue(this,ge,fe).call(this)}}function $e(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function be(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var we=new WeakSet,Ce=new WeakSet,Ee=new WeakSet,_e=new WeakSet;class Se{constructor(e){$e(this,_e),$e(this,Ee),$e(this,Ce),$e(this,we),this.props=e,this.props.colorUpdateTrigger.on(be(this,Ee,Pe).bind(this))}render(){const{className:e,controls:t,isOpacityEnabled:n,isGradientOpacityOnly:i,clearBtn:s}=this.props,{gradient:r}=this.props.currentValues;let l=`${o.panel}__input`;e&&(l+=` ${e}`),s&&(l+=` ${o.panel}__input_clear`);let a="0";"opacity"===t&&(a="100"),"hex"===t&&(a="#000000");const c=n&&(i&&r||!i);return this.element=y`
			<input
				type=${s?"search":"text"}
				className=${l}
				maxlength=${"hex"===t?7:3}
				value=${be(this,we,Te).call(this)}
				placeholder=${a}
				onInput=${be(this,Ce,ke).bind(this)}
				onKeydown=${be(this,_e,Me).bind(this)}
				onBlur=${be(this,Ee,Pe).bind(this)}
				style=${"opacity"!==t||c?void 0:"display:none;"}
			/>
		`,this.element}}function Te(){const{controls:e,currentValues:t}=this.props,{opacity:n,color:i,gradient:o}=t;return i?"opacity"===e?B(n)?Math.round(100*n):"":"angle"===e?o&&B(o.angle)?Math.round(360*o.angle):"":"hex"===e?`#${M(i).toUpperCase()}`:"hue"===e?Math.round(360*i[0]):"saturation"===e?Math.round(100*i[1]):"luma"===e?Math.round(100*i[2]):"red"===e?T(i)[0]:"green"===e?T(i)[1]:"blue"===e?T(i)[2]:"":""}function ke(){const{controls:e,currentValues:t,colorChangeTrigger:n,isStyleEditMode:i}=this.props,{color:o,gradient:s}=t,{value:r}=this.element;if("opacity"===e){const e=parseInt(r,10);t.opacity=B(e)?G(0,e/100,1):null}if("angle"===e){const e=parseInt(r,10);if(!s)return;s.angle=B(e)?parseFloat(G(0,e/360,1).toFixed(3)):0}if("hex"===e){const e=r.replace(/[^0-9A-Za-z]/g,""),n=C(r);4===n.length&&n.pop(),t.color=e&&r?n:null}if("hue"===e){const e=o||[0,0,0],n=parseInt(r,10);e[0]=B(n)?parseFloat(G(0,n/360,1).toFixed(3)):0,t.color=e}if("saturation"===e){const e=o||[0,0,0],n=parseInt(r,10);e[1]=B(n)?G(0,n/100,1):0,t.color=e}if("luma"===e){const e=o||[0,0,0],n=parseInt(r,10);e[2]=B(n)?G(0,n/100,1):0,t.color=e}if("red"===e){const e=T(o||[0,0,0]),n=parseInt(r,10);e[0]=B(n)?G(0,n,255):0,t.color=L(e)}if("green"===e){const e=T(o||[0,0,0]),n=parseInt(r,10);e[1]=B(n)?G(0,n,255):0,t.color=L(e)}if("blue"===e){const e=T(o||[0,0,0]),n=parseInt(r,10);e[2]=B(n)?G(0,n,255):0,t.color=L(e)}A({currentValues:t,hsl:t.color,opacity:t.opacity,saveStyle:i}),n.trigger()}function Pe(e){const{controls:t,isGradientOpacityOnly:n,currentValues:i,colorChangeTrigger:o,isOpacityEnabled:s}=this.props;if("opacity"===t&&!s)return;const r=e&&e.forceUpdate;document.activeElement===this.element&&!r||(this.element.value=be(this,we,Te).call(this),"opacity"===t&&n&&!i.gradient?(this.element.style.display="none",B(i.opacity)&&(i.opacity=null,o.trigger())):"opacity"===t&&this.element.style.removeProperty("display"))}function Me(e){const{key:t}=e,{controls:n,currentValues:i,colorChangeTrigger:o,isStyleEditMode:s}=this.props,{color:r,opacity:l,gradient:a}=i;if("Enter"===t&&e.preventDefault(),["ArrowUp","ArrowDown"].includes(t)){if("hex"===n)return;e.preventDefault();const c="ArrowUp"===t?1:-1;if("opacity"===n){const e=B(l)?l:1;i.opacity=G(0,e+.01*c,1)}if("angle"===n){if(!a)return;const e=a.angle||0;a.angle=parseFloat(G(0,e+1/360*c,1).toFixed(3))}if("hue"===n){const e=r||[0,0,0];e[0]=parseFloat(G(0,e[0]+1/360*c,1).toFixed(3)),i.color=e}if("saturation"===n){const e=r||[0,0,0];e[1]=G(0,e[1]+.01*c,1),i.color=e}if("luma"===n){const e=r||[0,0,0];e[2]=G(0,e[2]+.01*c,1),i.color=e}if("red"===n){const e=T(r||[0,0,0]);e[0]=G(0,e[0]+1*c,255),i.color=L(e)}if("green"===n){const e=T(r||[0,0,0]);e[1]=G(0,e[1]+1*c,255),i.color=L(e)}if("blue"===n){const e=T(r||[0,0,0]);e[2]=G(0,e[2]+1*c,255),i.color=L(e)}A({currentValues:i,hsl:i.color,opacity:i.opacity,saveStyle:s}),o.trigger({forceUpdate:!0})}}function Le(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function De(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var xe=new WeakSet,Oe=new WeakSet,Ie=new WeakSet,Ne=new WeakSet,Ve=new WeakSet,Ae=new WeakSet,Fe=new WeakSet;class Ue{constructor(e){Le(this,Fe),Le(this,Ae),Le(this,Ve),Le(this,Ne),Le(this,Ie),Le(this,Oe),Le(this,xe),this.props=e,this.elements={},this.props.colorUpdateTrigger.on(De(this,Oe,Ge).bind(this)),this.props.panelToggleTrigger.on(De(this,Fe,Ke).bind(this)),this.handleDocumentPointerMoveMarker=this.handleDocumentPointerMoveMarker.bind(this),this.handleDocumentPointerMoveAngle=this.handleDocumentPointerMoveAngle.bind(this),this.handleDocumentPointerUp=this.handleDocumentPointerUp.bind(this)}render(){const{currentValues:e,colorChangeTrigger:t,colorUpdateTrigger:n,lang:i}=this.props,{gradient:s}=e,r=V(s,!0),l=s&&s.angle||0,a=y`
			<div className=${`${o.panel}__gradients`} style=${s?void 0:"display:none"}>
				<div className=${`${o.panel}__gradient-wrapper`}>
					<div
						className=${`${o.gradient}${s&&s.stops.length>=15?` ${o.gradient}_disabled`:""}`}
						style=${`--current-gradient:${r};`}
						onPointerdown=${De(this,Ae,ze).bind(this)}
						bindTo=${[this.elements,"gradientLine"]}
					>
						${De(this,xe,We).call(this)}
					</div>
					<div
						className=${`${o.panel}__angle`}
						style=${s&&"linear"!==s.type?"display:none;":void 0}
						bindTo=${[this.elements,"angleContainer"]}
					>
						<label className=${`${o.panel}__angle-label`}>
							<span className=${`${o.panel}__angle-span`}>${$("angle",i)}</span>
							<${Se}
								className=${`${o.panel}__angle-input`}
								controls="angle"
								currentValues=${e}
								colorChangeTrigger=${t}
								colorUpdateTrigger=${n}
							/>
						</label>
						<div
							className=${`${o.panel}__angle-picker`}
							style=${`--angle:${l}turn;`}
							onPointerdown=${De(this,Ie,Be).bind(this)}
							onClick=${this.handleDocumentPointerMoveAngle}
							bindTo=${[this.elements,"anglePicker"]}
						></div>
					</div>
				</div>
			</div>
		`;return this.elements.container=a,a}handleDocumentPointerMoveMarker(e){const{gradient:t}=this.props.currentValues;if(!t||!t.stops.length)return;const{clientX:n,shiftKey:i}=e;if(this.pointerDownStartPos&&Math.abs(this.pointerDownStartPos-n)<5)return;this.pointerDownStartPos=null;const{gradientLine:o}=this.elements,{left:s,width:r}=o.getBoundingClientRect();let l=G(0,(n-s)/(s+r-s),1);l=parseFloat(l.toFixed(i?1:3));const{stops:a}=t,c=a.find((e=>{let{active:t}=e;return t}))||a[0];if(!i){const e=a.indexOf(c),t=e>0?a[e-1]:null,n=e<a.length-1?a[e+1]:null,i=.03;t&&Math.abs(l-t.position)<i?l=t.position:n&&Math.abs(l-n.position)<i&&(l=n.position)}c.position=l,a.sort(((e,t)=>e.position-t.position)),this.props.colorChangeTrigger.trigger()}handleDocumentPointerMoveAngle(e){const{gradient:t}=this.props.currentValues;if(!t)return;const{clientX:n,clientY:i,shiftKey:o}=e,{anglePicker:s}=this.elements,{left:r,top:l,width:a,height:c}=s.getBoundingClientRect(),d=n-(r+a/2),h=-1*(i-(l+c/2));let p=180*Math.atan(d/h)/Math.PI;if(h<0?p+=180:d<0&&(p+=360),o){const e=15;p=Math.round(p/e)*e}p=G(0,p/360,1),p=parseFloat(p.toFixed(3)),t.angle=p,this.props.colorChangeTrigger.trigger()}handleDocumentPointerUp(){document.removeEventListener("pointermove",this.handleDocumentPointerMoveMarker),document.removeEventListener("pointermove",this.handleDocumentPointerMoveAngle),document.removeEventListener("pointerup",this.handleDocumentPointerUp),document.documentElement.style.removeProperty("user-select"),document.documentElement.style.removeProperty("-webkit-user-select");const{gradientLine:e}=this.elements,t=e.querySelector(`.${o.gradient}__marker_selected`);t&&t.focus()}}function We(){const{gradient:e}=this.props.currentValues;if(!e||!e.stops.length)return"";return e.stops.find((e=>{let{active:t}=e;return t}))||(e.stops[0].active=!0),e.stops.map(((e,t)=>{let{color:n,position:i,opacity:s,active:r}=e;const l=k([...n,s]);return y`
				<div
					className=${`${o.gradient}__marker${r?` ${o.gradient}__marker_selected`:""}`}
					style=${`left:${100*i}%;--marker-color:rgba(${l.join(",")});`}
					onPointerdown=${De(this,Ne,Re).bind(this)}
					onKeyDown=${De(this,Ve,je).bind(this)}
					tabindex=${r?0:void 0}
					data-index=${t}
				>
					<div className=${`${o.gradient}__marker-inner`}></div>
				</div>
			`}))}function Ge(){const{gradientLine:e,anglePicker:t,container:n,angleContainer:i}=this.elements,{gradient:s}=this.props.currentValues;if(!s||!s.stops.length)return void(n.style.display="none");"linear"===s.type?i.style.removeProperty("display"):i.style.display="none",n.style.removeProperty("display");const r=s.angle||0;t.style.setProperty("--angle",`${r}turn`);const l=V(s,!0);e.style.setProperty("--current-gradient",l),e.innerHTML="",e.append(...De(this,xe,We).call(this)),e.classList.toggle(`${o.gradient}_disabled`,s.stops.length>=15)}function Be(){document.addEventListener("pointermove",this.handleDocumentPointerMoveAngle),document.addEventListener("pointerup",this.handleDocumentPointerUp),document.documentElement.style.userSelect="none",document.documentElement.style.webkitUserSelect="none"}function Re(e){const t=e.target.closest(`.${o.gradient}__marker`),n=parseInt(t.dataset.index,10),{currentValues:i,colorUpdateTrigger:s}=this.props,{gradient:r}=i;if(n!==r.stops.findIndex((e=>{let{active:t}=e;return t}))){r.stops.forEach((e=>e.active=!1));const e=r.stops[n];e.active=!0,i.color=e.color,i.opacity=e.opacity,i.style=e.style,s.trigger()}this.pointerDownStartPos=e.clientX,document.addEventListener("pointermove",this.handleDocumentPointerMoveMarker),document.addEventListener("pointerup",this.handleDocumentPointerUp),document.documentElement.style.userSelect="none",document.documentElement.style.webkitUserSelect="none"}function je(e){const{key:t,shiftKey:n,target:i}=e,{currentValues:s,colorChangeTrigger:r,colorUpdateTrigger:l}=this.props,{gradientLine:a}=this.elements,{gradient:c}=s;if(!c||!c.stops.length)return;const{stops:d}=c,h=d.find((e=>{let{active:t}=e;return t}))||d[0];if(["ArrowLeft","ArrowRight"].includes(t)){const e="ArrowLeft"===t?-1:1,i=n?.05*e:.01*e,s=G(0,h.position+i,1);h.position=s,d.sort(((e,t)=>e.position-t.position)),r.trigger(),window.setTimeout((()=>{const e=a.querySelector(`.${o.gradient}__marker_selected`);e&&e.focus()}),0)}if("Backspace"===t&&d.length>2){const e=d.indexOf(h),t=e>0?d[e-1]:null,n=e<d.length-1?d[e+1]:null;d.splice(e,1),t?(t.active=!0,s.color=t.color,s.opacity=t.opacity,s.style=t.style):n&&(n.active=!0,s.color=n.color,s.opacity=n.opacity,s.style=n.style),r.trigger(),window.setTimeout((()=>{const e=a.querySelector(`.${o.gradient}__marker_selected`);e&&e.focus()}),0)}if(["ArrowUp","ArrowDown"].includes(t)){const n=parseInt(i.dataset.index,10),r="ArrowDown"===t;if(!n&&r||n===c.stops.length-1&&!r)return;e.preventDefault();const d=r?n-1:n+1,h=c.stops[d];c.stops.forEach((e=>e.active=!1)),h.active=!0,s.color=h.color,s.opacity=h.opacity,s.style=h.style,l.trigger(),window.setTimeout((()=>{const e=a.querySelector(`.${o.gradient}__marker_selected`);e&&e.focus()}),0)}}function ze(e){const{gradientLine:t}=this.elements;if(e.target!==t)return;const{currentValues:n}=this.props,{gradient:i}=n;if(!i||i.stops.length>=15)return;const{left:s,width:r}=t.getBoundingClientRect(),l=s+r,{clientX:a}=e;let c=G(0,(a-s)/(l-s),1);c=parseFloat(c.toFixed(3));const{stops:d}=i;let h=null,p=null;if(d.forEach((e=>{e.position<c&&(h&&h.position<=e.position||!h)&&(h=e),e.position>c&&(p&&p.position>=e.position||!p)&&(p=e),e.active=!1})),!h&&!p)return;const u={color:null,opacity:null,position:c,active:!0};if(h)if(p){const e=(c-h.position)/(p.position-h.position),t=T(h.color),n=T(p.color),i=[];for(let o=0;o<3;o++){const s=Math.round(t[o]+(n[o]-t[o])*e);i.push(s)}u.color=L(i);const o=null!==h.opacity?h.opacity:1,s=null!==p.opacity?p.opacity:1;u.opacity=o+(s-o)*e;const r=d.indexOf(p);d.splice(r,0,u)}else{u.color=h.color,u.opacity=h.opacity;const e=d.indexOf(h);d.splice(e+1,0,u)}else{u.color=p.color,u.opacity=p.opacity;const e=d.indexOf(p);d.splice(e,0,u)}n.color=u.color,n.opacity=u.opacity,n.style=null,this.props.colorChangeTrigger.trigger(),window.setTimeout((()=>{const e=t.querySelector(`.${o.gradient}__marker_selected`);e&&e.focus()}),0)}function Ke(e){e||(document.removeEventListener("pointermove",this.handleDocumentPointerMoveMarker),document.removeEventListener("pointermove",this.handleDocumentPointerMoveAngle),document.removeEventListener("pointerup",this.handleDocumentPointerUp),document.documentElement.style.removeProperty("user-select"),document.documentElement.style.removeProperty("-webkit-user-select"))}function He(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function Xe(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var qe=new WeakSet,Ye=new WeakSet,Je=new WeakSet;class Ze{constructor(e){He(this,Je),He(this,Ye),He(this,qe),this.props=e,this.props.colorUpdateTrigger.on(Xe(this,Ye,et).bind(this))}render(){const{className:e,controls:t,isGradientOpacityOnly:n,isOpacityEnabled:i}=this.props,{gradient:s}=this.props.currentValues;let r=`${o.panel}__range`;e&&(r+=` ${e}`);const l="hue"===t?.001:.01,a=i&&(n&&s||!n);return this.element=y`
			<input
				type="range"
				className=${r}
				min="0"
				max="1"
				step=${l}
				onInput=${Xe(this,qe,Qe).bind(this)}
				onKeydown=${Xe(this,Je,tt).bind(this)}
				style=${"opacity"!==t||a?void 0:"display:none;"}
			/>
		`,Xe(this,Ye,et).call(this),this.element}}function Qe(){const e=parseFloat(this.element.value),{controls:t,currentValues:n,colorChangeTrigger:i,isStyleEditMode:o}=this.props;if("opacity"===t&&A({currentValues:n,hsl:n.color,opacity:e,saveStyle:o}),"hue"===t){const t=n.color||[0,0,0];t[0]=e,A({currentValues:n,hsl:t,opacity:n.opacity,saveStyle:o})}i.trigger()}function et(){const{controls:e,currentValues:t,isGradientOpacityOnly:n,colorChangeTrigger:i,isOpacityEnabled:o}=this.props;if("opacity"===e&&!o)return;const{color:s,opacity:r}=t;"opacity"===e&&(this.element.value=B(r)?r:1,n&&!t.gradient?(this.element.style.display="none",B(t.opacity)&&(t.opacity=null,i.trigger())):this.element.style.removeProperty("display")),"hue"===e&&(this.element.value=s?s[0]:0)}function tt(e){const{key:t,shiftKey:n}=e;if("Enter"===t&&e.preventDefault(),["ArrowLeft","ArrowRight"].includes(t)){e.preventDefault();const i="ArrowRight"===t?1:-1,o=n?.05:.01,{value:s}=this.element,{controls:r}=this.props;let l=parseFloat(s);l=B(l)?l:"opacity"===r?1:0;const a=G(0,l+o*i,1);this.element.value=a,this.element.dispatchEvent(new Event("input"))}}function nt(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function it(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var ot=new WeakSet,st=new WeakSet;class rt{constructor(e){nt(this,st),nt(this,ot),this.props=e,e.colorUpdateTrigger&&e.colorUpdateTrigger.on(b(it(this,ot,lt).bind(this),50)),e.panelToggleTrigger.on(it(this,st,at).bind(this)),this.handleDocKeyDown=this.handleDocKeyDown.bind(this),this.handleDocPointerDown=this.handleDocPointerDown.bind(this)}render(){const{className:e,options:t,onChange:n,bindTo:i}=this.props,s=[it(this,ot,lt).bind(this)];"function"==typeof n&&s.push(n);let r=`${o.panel}__select`;if(e&&(r+=` ${e}`),this.element=y`
			<select className=${r} onChange=${s}>
				${t.map((e=>{let{value:t,label:n,selected:i}=e;return y`
						<option value=${t} selected=${i||void 0}>${n}</option>
					`}))}
			</select>
		`,i){const[e,t]=i;e[t]=this.element}return it(this,ot,lt).call(this),this.element}handleDocKeyDown(e){window.setTimeout((()=>{this.element.classList.toggle(`${o.panel}__select_focus`,document.activeElement===this.element&&"Tab"===e.key)}),0)}handleDocPointerDown(){this.element.classList.remove(`${o.panel}__select_focus`)}}function lt(){const e=this.element,t=e.selectedOptions[0],n=y`
			<div className="select-helper">${t.innerText}</div>
		`;document.body.append(n),setTimeout((()=>{e.style.width=`${n.offsetWidth}px`,n.remove()}),0)}function at(e){e?(document.addEventListener("keydown",this.handleDocKeyDown),document.addEventListener("pointerdown",this.handleDocPointerDown)):(document.removeEventListener("keydown",this.handleDocKeyDown),document.removeEventListener("pointerdown",this.handleDocPointerDown),this.element.classList.remove(`${o.panel}__select_focus`))}class ct{constructor(e){this.props=e,this.props.isCustomEyeDropperActive=!1,this.setColorFromEyedropper=this.props.setColorFromEyedropper,this.preloader=null,this.canvas=null,this.currentCustomEyedropperColor=null,this.imageForCustomEyeDropper=null,this.closeLayerFromSettings="/page/"===window.location.pathname&&document.getElementById("closelayer"),this.closeLayer=null,this.currentElement=null,this.currentElementRect={},this.mouseCoords={x:0,y:0},this._currentElementStyles={},this.initMouseMoveForCustomEyedropper=this.initMouseMoveForCustomEyedropper.bind(this),this.destroyCustomEyedropper=this.destroyCustomEyedropper.bind(this),this.closeCustomEyeDropperOnClick=this.closeCustomEyeDropperOnClick.bind(this),this.closeCustomEyeDropperOnESC=this.closeCustomEyeDropperOnESC.bind(this),this.updateImagePositionOnScroll=this.updateImagePositionOnScroll.bind(this)}init(e){this.props.isCustomEyeDropperActive=!0,this.createCloseLayer(),this.appendPreviewElement(),this.initMouseMoveForCustomEyedropper(e),document.addEventListener("mousemove",this.initMouseMoveForCustomEyedropper),window.addEventListener("scroll",this.updateImagePositionOnScroll),this.canvas=document.createElement("canvas"),setTimeout((()=>{document.addEventListener("click",this.closeCustomEyeDropperOnClick),document.addEventListener("keydown",this.closeCustomEyeDropperOnESC)}),0)}closeCustomEyeDropperOnClick(){this.destroyCustomEyedropper()}closeCustomEyeDropperOnESC(e){"Escape"===e.key&&(e.preventDefault(),this.destroyCustomEyedropper(!1))}destroyCustomEyedropper(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(document.removeEventListener("mousemove",this.initMouseMoveForCustomEyedropper),window.removeEventListener("scroll",this.updateImagePositionOnScroll),document.removeEventListener("click",this.closeCustomEyeDropperOnClick),document.removeEventListener("keydown",this.closeCustomEyeDropperOnESC),e){let{currentCustomEyedropperColor:e}=this;if(e?.includes("rgb")){const t=e.match(/\d+/g).map(Number);e=P(t)}e&&this.setColorFromEyedropper(e)}this.removePreviewElement(),this.removeCloseLayer(),this.canvas=null,this.currentCustomEyedropperColor=null,this.props.isCustomEyeDropperActive=!1}updateImagePositionOnScroll(){this.currentElement&&this.currentElementStyles.backgroundImage&&(this.currentElementRect=this.currentElement.getBoundingClientRect())}initMouseMoveForCustomEyedropper(e){requestAnimationFrame((()=>{this.mouseCoords.x=e?.clientX||0,this.mouseCoords.y=e?.clientY||0,this.updateCloseLayerStyle({pointerEvents:"none"}),this.closeLayerFromSettings&&this.updateCloseLayerStyle({pointerEvents:"none"},this.closeLayerFromSettings);const t=document.elementFromPoint(this.mouseCoords.x,this.mouseCoords.y);if(this.updateCloseLayerStyle({pointerEvents:""}),this.closeLayerFromSettings&&this.updateCloseLayerStyle({pointerEvents:""},this.closeLayerFromSettings),t!==this.currentElement){this.currentElement=t,this.currentElementRect=this.currentElement.getBoundingClientRect(),this.currentElementStyles=getComputedStyle(this.currentElement),this.removePreloader();const e=t.closest(".tcolors-panel__range_hue"),n=t.closest(".tcolors-panel__area");if(e){const t=getComputedStyle(e).getPropertyValue("--hue-gradient");t&&(this.currentElementStyles.backgroundImage=t)}if(n){const e=getComputedStyle(n).backgroundImage;e&&(this.currentElementStyles.backgroundImage=`${e}, ${this.currentElementStyles.backgroundImage}`)}}this.setPreviewElementPosition(),this.isMouseOnBorder?this.setCustomEyedropperColor(this.currentElementStyles.borderColor):this.isContainsImageOrGradient?this.processImageOrGradient():this.isTextNode?this.setCustomEyedropperColor(this.currentElementStyles.color):this.setCustomEyedropperColor(this.currentElementStyles.backgroundColor)}))}set currentElementStyles(e){this._currentElementStyles={};const{borderWidth:t,borderColor:n,backgroundImage:i,color:o,backgroundSize:s,objectFit:r}=e;this._currentElementStyles.borderWidth=t,this._currentElementStyles.borderColor=n,this._currentElementStyles.backgroundImage=i,this._currentElementStyles.color=o,this._currentElementStyles.backgroundSize=s,this._currentElementStyles.objectFit=r,this._currentElementStyles.backgroundColor=this.getBackgroundColorFromElement(this.currentElement)}get currentElementStyles(){return this._currentElementStyles}get isMouseOnBorder(){const e=parseInt(this.currentElementStyles.borderWidth,10)||0;if(!e)return!1;const{left:t,right:n,top:i,bottom:o}=this.currentElementRect,{x:s,y:r}=this.mouseCoords;return s<t+e||s>n-e||r<i+e||r>o-e}appendPreviewElement(){const e="tcolors-eyedropper-preview";if(document.getElementById(e))return;const t=document.createElement("div");t.id=e,document.body.appendChild(t)}get previewElement(){return document.getElementById("tcolors-eyedropper-preview")}setPreviewElementPosition(){const e=this.previewElement;e&&(e.style.left=this.mouseCoords.x+"px",e.style.top=this.mouseCoords.y+"px")}removePreviewElement(){this.previewElement?.remove()}setCustomEyedropperColor(e){e&&(this.currentCustomEyedropperColor=e,this.setPreviewElementColor(e))}setPreviewElementColor(e){this.previewElement&&(this.previewElement.style.backgroundColor=e)}processImageOrGradient(){if(!this.currentElement)return;const e=this.currentElement.src||this.currentElementStyles.backgroundImage;if(!e)return;let t=[e];"IMG"!==this.currentElement.tagName&&(t=this.splitBackgroundLayers(e)),this.imageForCustomEyeDropper===e?this.getDataFromCanvas():(t.forEach(((e,t)=>{const n=0===t;e.includes("gradient(")?this.drawContentForCanvas({gradientCSS:e},n):this.createImageForCanvas(e,n)})),this.imageForCustomEyeDropper=e)}createImageForCanvas(e,t){const{width:n,height:i}=this.currentElementRect,o=new Image;o.src=e,o.crossOrigin="anonymous",o.width=Math.round(n),o.height=Math.round(i);const s=setTimeout((()=>{this.createPreloader(),clearTimeout(s)}),500);o.onload=()=>{this.drawContentForCanvas({createdImage:o},t),clearTimeout(s),this.removePreloader()}}splitBackgroundLayers(e){const t=[];let n="",i=0;for(const o of e)"("===o&&i++,")"===o&&i--,","===o&&0===i?(t.push(n.trim()),n=""):n+=o;return n&&t.push(n.trim()),t.sort(((e,t)=>e.includes("gradient(")&&!t.includes("gradient(")?-1:!e.includes("gradient(")&&t.includes("gradient(")?1:0)),t.map((e=>e.startsWith("url(")?e.slice(4,-1).replace(/"/g,""):e))}getBackgroundColorFromElement(e){const t=getComputedStyle(e);return t.backgroundColor&&"rgba(0, 0, 0, 0)"!==t.backgroundColor?t.backgroundColor:e.parentElement?this.getBackgroundColorFromElement(e.parentElement):""}getOpacityFromElement(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=getComputedStyle(e),i=t*parseFloat(n.opacity);return e.parentElement?this.getOpacityFromElement(e.parentElement,i):i}get isContainsImageOrGradient(){if(!this.currentElement)return!1;if("IMG"===this.currentElement.tagName)return!0;const{backgroundImage:e}=this.currentElementStyles;return!(!e||"none"===e)&&(e.includes("url(")||e.includes("gradient("))}createPreloader(){if(this.preloader||!this.previewElement)return;const e=document.createElement("div");e.classList.add("tcolors-eyedropper-preloader"),this.preloader=e,this.previewElement.appendChild(this.preloader)}removePreloader(){this.preloader&&this.previewElement&&(this.previewElement.contains(this.preloader)&&this.previewElement.removeChild(this.preloader),this.preloader=null)}get isTextNode(){if(!this.currentElement)return!1;if(Array.from(this.currentElement.children).some((e=>"BR"!==e.tagName)))return!1;const e=document.createRange();e.selectNodeContents(this.currentElement);const{top:t,left:n,right:i,bottom:o}=e.getBoundingClientRect(),s=this.mouseCoords.x,r=this.mouseCoords.y;return s>=n&&s<=i&&r>=t&&r<=o}drawContentForCanvas(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{gradientCSS:n,createdImage:i}=e;if(!this.currentElement&&!i&&!n)return;const{width:o,height:s}=this.currentElementRect,{canvas:r}=this;if(!r)return;t&&(r.width=Math.round(o),r.height=Math.round(s));const l=r.getContext("2d",{willReadFrequently:!0});if(t){l.clearRect(0,0,r.width,r.height);const e=this.currentElementStyles.backgroundColor;e&&(l.fillStyle=e,l.fillRect(0,0,r.width,r.height))}const a=this.getOpacityFromElement(this.currentElement);1!==a&&(l.globalAlpha=a),i&&this.drawImageForCanvas(i,l),n&&this.drawGradientForCanvas(n,l),1!==a&&(l.globalAlpha=1),this.getDataFromCanvas()}drawImageForCanvas(e,t){const{canvas:n}=this;if(!n||!e)return;const i=n.width,o=n.height,s=e.naturalWidth,r=e.naturalHeight,l=i/s,a=o/r,{objectFit:c,backgroundSize:d}=this.currentElementStyles,h=Math["cover"===c||"cover"===d?"max":"min"](l,a),p=s*h,u=r*h,g=(i-p)/2,m=(o-u)/2;t.drawImage(e,g,m,p,u)}drawGradientForCanvas(e,t){const{canvas:n}=this;if(n){if(e.includes("radial")){const i=n.width/2,o=n.height/2,s=Math.hypot(n.width,n.height)/2,r=this.getRadialGradientStops(e,n),l=t.createRadialGradient(i,o,0,i,o,s);this.setStopsForGradient(r,l),t.fillStyle=l}else{const{angleRad:i,angleDeg:o,stops:s}=this.getLinearGradientData(e),[r,l]=this.getLinearGradientCoordinates(n,i,o),a=t.createLinearGradient(r.x,r.y,l.x,l.y);this.setStopsForGradient(s,a),t.fillStyle=a}t.fillRect(0,0,n.width,n.height)}}setStopsForGradient(e,t){e.forEach((e=>{const n=Math.min(1,Math.max(0,e.position));t.addColorStop(n,e.color)}))}getLinearGradientCoordinates(e,t,n){const{width:i,height:o}=e,s=i/2,r=o/2;if([0,360].includes(n))return[{x:s,y:o},{x:s,y:0}];if(90===n)return[{x:0,y:r},{x:i,y:r}];if(180===n)return[{x:s,y:0},{x:s,y:o}];if(270===n)return[{x:i,y:r},{x:0,y:r}];const l=Math.sin(t),a=-Math.cos(t),c=Math.hypot(i,o)/2;return[{x:s-l*c,y:r-a*c},{x:s+l*c,y:r+a*c}]}getLinearGradientData(e){const t=this.getInnerGradient(e),n=this.setLinearGradientDeg(t),i=this.splitTopLevel(n,","),o=i.find((e=>e.match(/^([+-]?\d+(\.\d+)?)(deg|turn|rad|grad)$/)))||"180deg",s=this.angleToRadians(o),r=this.radiansToDegrees(s),l=i.filter((e=>e!==o)),a=this.parseStops(l);return{angleRad:s,angleDeg:parseInt(r,10),stops:a}}setLinearGradientDeg(e){const t={"to top":"0deg","to right":"90deg","to bottom":"180deg","to left":"270deg","to top right":"45deg","to right top":"45deg","to top left":"315deg","to left top":"315deg","to bottom right":"135deg","to right bottom":"135deg","to bottom left":"225deg","to left bottom":"225deg"};let n=e;return Object.keys(t).forEach((i=>{e.includes(i)&&(n=e.replace(i,t[i]))})),n}parseStops(e){return e.map(((t,n)=>{const i=t.match(/[0-9.-]+%/g);let o=i&&i[0];o||(o=0===n?"0%":n===e.length-1?"100%":e.length/((n+1)*e.length)*100+"%");return{color:t.replace(o,"").trim(),position:parseInt(o,10)/100||0}}))}getRadialGradientStops(e){const t=this.getInnerGradient(e),n=this.splitTopLevel(t,",").filter((e=>"circle"!==e.trim()));return this.parseStops(n)}angleToRadians(e){return e.includes("rad")?parseFloat(e):e.includes("turn")?2*parseFloat(e)*Math.PI:e.includes("grad")?2*parseFloat(e)*Math.PI/400:parseFloat(e)*Math.PI/180}radiansToDegrees(e){return parseFloat(e)/Math.PI*180}getInnerGradient(e){return e.slice(e.indexOf("(")+1,e.lastIndexOf(")")).trim()}updateCloseLayerStyle(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.closeLayer;t&&Object.keys(e).forEach((n=>{t.style[n]=e[n]}))}createCloseLayer(){if(this.closeLayer)return this.closeLayer;const e=document.createElement("div");return e.classList.add("tcolors-eyedropper__close-layer"),this.closeLayer=e,document.body.appendChild(e),e}removeCloseLayer(){document.querySelector(".tcolors-eyedropper__close-layer")?.remove(),this.closeLayer=null}getDataFromCanvas(){const e=this.canvas;if(!e)return;const t=e.getContext("2d");let n=Math.floor(this.mouseCoords.x-this.currentElementRect.left),i=Math.floor(this.mouseCoords.y-this.currentElementRect.top);n=Math.max(0,Math.min(e.width-1,n)),i=Math.max(0,Math.min(e.height-1,i));const[o,s,r]=t.getImageData(n,i,1,1).data,l="#"+[o,s,r].map((e=>e.toString(16).padStart(2,"0"))).join("");this.setCustomEyedropperColor(l)}splitTopLevel(e,t){const n=[];let i=0,o="";const s=e=>e===t;for(let r=0;r<e.length;r++){const l=e[r];if("("!==l&&"["!==l&&"{"!==l||i++,")"!==l&&"]"!==l&&"}"!==l||(i=Math.max(0,i-1)),0===i&&s(l)){if(""!==o.trim()&&n.push(o.trim()),o=""," "===t)for(;r+1<e.length&&" "===e[r+1];)r++}else o+=l}return""!==o.trim()&&n.push(o.trim()),n}}function dt(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function ht(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var pt=new WeakSet,ut=new WeakSet,gt=new WeakSet,mt=new WeakSet,yt=new WeakSet;class ft{constructor(e){dt(this,yt),dt(this,mt),dt(this,gt),dt(this,ut),dt(this,pt),this.props=e,this.props.colorModeUpdateTrigger.on(ht(this,ut,$t).bind(this)),this.props.colorUpdateTrigger.on(ht(this,yt,Ct).bind(this)),this.props.keyDownTrigger.on(ht(this,mt,wt).bind(this)),this.props.setColorFromEyedropper=this.setColorFromEyedropper.bind(this),this.elements={}}render(){const{isOpacityEnabled:e,isGradientOpacityOnly:t,colorMode:n,currentValues:i,colorChangeTrigger:s,colorUpdateTrigger:r,panelToggleTrigger:l,lang:a,isStyleEditMode:c}=this.props,{gradient:d}=i,h=e&&(t&&d||!t),p=!this.isMobile&&h,u=!this.isMobile&&!p;this.elements.eyeDropperButton=y`
			<button
				className=${`${o.panel}__eyedropper`}
				onClick=${ht(this,pt,vt).bind(this)}
				tooltip=${$("pick_color",a)}
				type="button"
			></button>
		`;const g=["hex","rgb","hsl"].map((e=>({value:e,label:e.toUpperCase(),selected:n.mode===e}))),m=y`
			<div className=${`${o.panel}__inputs`}>
				<div className=${`${o.panel}__range-outer`} bindTo=${[this.elements,"rangeContainer"]}>
					<div className=${`${o.panel}__range-container`}>
						<${Ze}
							className=${`${o.panel}__range_hue`}
							controls="hue"
							currentValues=${i}
							colorChangeTrigger=${s}
							colorUpdateTrigger=${r}
							isStyleEditMode=${c}
						/>
						<${Ze}
							className=${`${o.panel}__range_opacity`}
							controls="opacity"
							currentValues=${i}
							colorChangeTrigger=${s}
							colorUpdateTrigger=${r}
							isGradientOpacityOnly=${t}
							isOpacityEnabled=${e}
							isStyleEditMode=${c}
						/>
					</div>
					${p?this.elements.eyeDropperButton:""}
				</div>
				<div className=${`${o.panel}__modes`} bindTo=${[this.elements,"modesContainer"]}>
					<${rt}
						className=${`${o.panel}__modes-select`}
						options=${g}
						onChange=${ht(this,gt,bt).bind(this)}
						panelToggleTrigger=${l}
					/>
					<div
						className=${`${o.panel}__modes-inputs`}
						data-mode="hex"
						style=${"hex"===n.mode?void 0:"display:none;"}
						bindTo=${[this.elements,"hexContainer"]}
					>
						<${Se}
							controls="hex"
							currentValues=${i}
							colorChangeTrigger=${s}
							colorUpdateTrigger=${r}
							clearBtn=${!0}
							isStyleEditMode=${c}
						/>
						<${Se}
							controls="opacity"
							className=${`${o.panel}__input_opacity`}
							currentValues=${i}
							colorChangeTrigger=${s}
							colorUpdateTrigger=${r}
							isGradientOpacityOnly=${t}
							isOpacityEnabled=${e}
							isStyleEditMode=${c}
						/>
					</div>
					<div
						className=${`${o.panel}__modes-inputs`}
						data-mode="rgb"
						style=${"rgb"===n.mode?void 0:"display:none;"}
						bindTo=${[this.elements,"rgbContainer"]}
					>
						<${Se}
							controls="red"
							currentValues=${i}
							colorChangeTrigger=${s}
							colorUpdateTrigger=${r}
							isStyleEditMode=${c}
						/>
						<${Se}
							controls="green"
							currentValues=${i}
							colorChangeTrigger=${s}
							colorUpdateTrigger=${r}
							isStyleEditMode=${c}
						/>
						<${Se}
							controls="blue"
							currentValues=${i}
							colorChangeTrigger=${s}
							colorUpdateTrigger=${r}
							isStyleEditMode=${c}
						/>
						<${Se}
							controls="opacity"
							className=${`${o.panel}__input_opacity`}
							currentValues=${i}
							colorChangeTrigger=${s}
							colorUpdateTrigger=${r}
							isGradientOpacityOnly=${t}
							isOpacityEnabled=${e}
							isStyleEditMode=${c}
						/>
					</div>
					<div
						className=${`${o.panel}__modes-inputs`}
						data-mode="hsl"
						style=${"hsl"===n.mode?void 0:"display:none;"}
						bindTo=${[this.elements,"hslContainer"]}
					>
						<${Se}
							controls="hue"
							currentValues=${i}
							colorChangeTrigger=${s}
							colorUpdateTrigger=${r}
							isStyleEditMode=${c}
						/>
						<${Se}
							controls="saturation"
							currentValues=${i}
							colorChangeTrigger=${s}
							colorUpdateTrigger=${r}
							isStyleEditMode=${c}
						/>
						<${Se}
							controls="luma"
							currentValues=${i}
							colorChangeTrigger=${s}
							colorUpdateTrigger=${r}
							isStyleEditMode=${c}
						/>
						<${Se}
							controls="opacity"
							className=${`${o.panel}__input_opacity`}
							currentValues=${i}
							colorChangeTrigger=${s}
							colorUpdateTrigger=${r}
							isGradientOpacityOnly=${t}
							isOpacityEnabled=${e}
							isStyleEditMode=${c}
						/>
					</div>
					${u?this.elements.eyeDropperButton:""}
				</div>
			</div>
		`;return this.elements.container=m,m}setColorFromEyedropper(e){if(!e)return;const t=S(e),{currentValues:n,colorChangeTrigger:i,isStyleEditMode:o}=this.props;A({currentValues:n,hsl:t,opacity:null,saveStyle:o}),i.trigger()}updateCloseLayerStyle(e){const t="/page/"===window.location.pathname&&document.getElementById("closelayer");t&&Object.keys(e).forEach((n=>{t.style[n]=e[n]}))}get isMobile(){return window.matchMedia("(max-width: 640px)").matches||"ontouchend"in document}}function vt(){if("function"==typeof window.EyeDropper){const e=new window.EyeDropper;this.updateCloseLayerStyle({backgroundColor:"transparent"}),e.open().then((e=>{this.updateCloseLayerStyle({backgroundColor:""}),this.setColorFromEyedropper(e.sRGBHex)})).catch((()=>{this.updateCloseLayerStyle({backgroundColor:""})}))}else if(!this.props.isCustomEyeDropperActive){new ct(this.props).init(this.props.cursorPosition)}}function $t(){const e=this.props.colorMode.mode;["hex","rgb","hsl"].forEach((t=>{const n=this.elements[`${t}Container`];t===e?n.style.removeProperty("display"):n.style.display="none"}))}function bt(e){const{value:t}=e.target;this.props.colorMode.mode=t}function wt(e){73===e.keyCode&&"INPUT"!==document.activeElement?.tagName&&this.elements.eyeDropperButton.parentElement&&(e.preventDefault(),ht(this,pt,vt).call(this))}function Ct(){const{isOpacityEnabled:e,isGradientOpacityOnly:t}=this.props,{gradient:n}=this.props.currentValues,{eyeDropperButton:i,rangeContainer:o,modesContainer:s}=this.elements,r=e&&(t&&n||!t),l=!this.isMobile&&r,a=!this.isMobile&&!l;l||a||!i.parentElement?l&&i.parentElement!==o?o.append(i):a&&i.parentElement!==s&&s.append(i):i.remove()}function Et(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function _t(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var St=new WeakSet,Tt=new WeakSet,kt=new WeakSet,Pt=new WeakSet,Mt=new WeakSet,Lt=new WeakSet,Dt=new WeakSet,xt=new WeakSet,Ot=new WeakSet,It=new WeakSet,Nt=new WeakSet,Vt=new WeakSet,At=new WeakSet,Ft=new WeakSet,Ut=new WeakSet,Wt=new WeakSet,Gt=new WeakSet,Bt=new WeakSet,Rt=new WeakSet,jt=new WeakSet,zt=new WeakSet,Kt=new WeakSet,Ht=new WeakSet,Xt=new WeakSet,qt=new WeakSet;class Yt{constructor(e){Et(this,qt),Et(this,Xt),Et(this,Ht),Et(this,Kt),Et(this,zt),Et(this,jt),Et(this,Rt),Et(this,Bt),Et(this,Gt),Et(this,Wt),Et(this,Ut),Et(this,Ft),Et(this,At),Et(this,Vt),Et(this,Nt),Et(this,It),Et(this,Ot),Et(this,xt),Et(this,Dt),Et(this,Lt),Et(this,Mt),Et(this,Pt),Et(this,kt),Et(this,Tt),Et(this,St),this.props=e,this.elements={libraryContainers:{}},this.savedColors=[],this.tildaColors=null,this.activeLibrary=null,this.props.panelToggleTrigger.on(_t(this,Ht,bn).bind(this)),this.props.colorUpdateTrigger.on(w(_t(this,Xt,wn).bind(this),100)),this.handleDocumentPointerMove=this.handleDocumentPointerMove.bind(this),this.handleDocumentPointerUp=this.handleDocumentPointerUp.bind(this)}render(){const{isGradientsEnabled:e,noDocumentColors:t,panelToggleTrigger:n,lang:i,defaultLibrary:s,isStyleEditMode:r,styles:c}=this.props,d=!!Array.isArray(c)&&Boolean(c.find((e=>{let{type:t,deleted:n}=e;return"color"===t&&!n}))),h=[...a];t&&Y(h,"document_colors"),e||Y(h,"tilda_gradients"),d||Y(h,"styles");const p=window.localStorage.getItem("tColorpickerLibrary");let u=s||p&&l[p]||"document_colors";h.includes(u)||(u=h[0]);const g=h.map((e=>({label:$(e,i),value:e,selected:u===e}))),m=y`
			<div className=${`${o.panel}__library`} style=${r?"display:none;":void 0}>
				<${rt}
					className=${`${o.panel}__library-select`}
					options=${g}
					onChange=${_t(this,Rt,yn).bind(this)}
					panelToggleTrigger=${n}
					bindTo=${[this.elements,"librarySelect"]}
				/>
				${c?y`
							<div
								className=${`${o.panel}__styles`}
								data-lib="styles"
								style=${"styles"===u?void 0:"display:none;"}
								bindTo=${[this.elements.libraryContainers,"styles"]}
							>
								${$("loading",i)}
							</div>
						`:""}
				${t?"":y`
							<div
								className=${`${o.panel}__swatches`}
								data-lib="document_colors"
								style=${"document_colors"===u?void 0:"display:none;"}
								bindTo=${[this.elements.libraryContainers,"document_colors"]}
							>
								${$("loading",i)}
							</div>
						`}
				<div
					className=${`${o.panel}__swatches`}
					data-lib="saved_colors"
					style=${"saved_colors"===u?void 0:"display:none;"}
					bindTo=${[this.elements.libraryContainers,"saved_colors"]}
				>
					${$("loading",i)}
				</div>
				<div
					className=${`${o.panel}__tcolors`}
					data-lib="tilda_colors"
					style=${"tilda_colors"===u?void 0:"display:none;"}
					bindTo=${[this.elements.libraryContainers,"tilda_colors"]}
				>
					${$("loading",i)}
				</div>
				${e?y`
							<div
								className=${`${o.panel}__tcolors`}
								data-lib="tilda_gradients"
								style=${"tilda_gradients"===u?void 0:"display:none;"}
								bindTo=${[this.elements.libraryContainers,"tilda_gradients"]}
							>
								${$("loading",i)}
							</div>
						`:""}
			</div>
		`;return this.elements.container=m,_t(this,Dt,on).call(this),_t(this,Nt,an).call(this),t||_t(this,It,ln).call(this),c&&_t(this,Pt,en).call(this),m}handleDocumentPointerMove(e){const{clientX:t}=e,{navContainer:n}=this.elements,i=this.navPointerStartPos-t;this.navPointerStartPos=t,n.scrollLeft+=i}handleDocumentPointerUp(){document.removeEventListener("pointermove",this.handleDocumentPointerMove),document.removeEventListener("pointerup",this.handleDocumentPointerUp),document.documentElement.style.removeProperty("user-select"),document.documentElement.style.removeProperty("-webkit-user-select")}}function Jt(e){const t=this.elements.libraryContainers.document_colors;t.innerHTML="";const n=e.map((e=>_t(this,Ut,pn).call(this,e)));n.length&&t.append(...n)}function Zt(){const{isGradientsEnabled:e,noDocumentColors:t,defaultLibrary:n,styles:i}=this.props,{librarySelect:o}=this.elements,s=this.elements.libraryContainers.document_colors,r=o.querySelector('option[value="document_colors"]'),c=s&&!s.childElementCount,d=i?.filter((e=>{let{type:t,deleted:n}=e;return"color"===t&&!n})),h=Boolean(d?.length),p=[...a];e||Y(p,"tilda_gradients"),(t||c)&&Y(p,"document_colors"),h||Y(p,"styles");const u=window.localStorage.getItem("tColorpickerLibrary"),g=u&&l[u],m=[];n&&m.push(n),g&&m.push(g);let y=p[0];for(const e of m)if(p.includes(e)){y=e;break}this.activeLibrary=y,r&&(r.disabled=c),o.value!==y&&(o.value=y,o.dispatchEvent(new Event("change"))),_t(this,Xt,wn).call(this)}function Qt(){const{lang:e}=this.props,t=this.elements.libraryContainers.saved_colors;t.innerHTML="";const n=this.savedColors.map((e=>_t(this,Ut,pn).call(this,e,!0))),i=y`
			<button
				type="button"
				className=${`${o.panel}__add-swatch`}
				onClick=${_t(this,Wt,un).bind(this)}
				style=${`${this.savedColors.length<h?void 0:"display:none;"}`}
				bindTo=${[this.elements,"addButton"]}
				tooltip=${$("save_color",e)}
			></button>
		`;n.push(i),t.append(...n),_t(this,Ft,hn).call(this)}function en(){const{styles:e,currentValues:t}=this.props,n=this.elements.libraryContainers.styles;if(!n||!e)return;const i=e.filter((e=>{let{type:t,deleted:n}=e;return"color"===t&&!n}));n.innerHTML="",n.append(...i.map((e=>{const n=e.vars?.color||"#000000",i=e.id&&e.id===t.style?.id;return y`
					<button
						className=${`${o.panel}__style-button`}
						data-id=${e.id}
						type="button"
						disabled=${i}
						onClick=${_t(this,qt,Cn).bind(this)}
					>
						<span
							className=${`${o.panel}__swatch ${o.panel}__style-swatch`}
							style=${`background:${n};`}
						></span>
						<span className=${`${o.panel}__style-name`}>${e.name}</span>
					</button>
				`})))}function tn(){const{tildaColors:e}=this;if(!e)return;const{lang:t}=this.props,n=this.elements.libraryContainers.tilda_colors;n.innerHTML="",this.elements.colorLists={},this.elements.navItems={};const i=e.colors[0],s=_t(this,Ot,rn).call(this),r=y`
			<div className=${`${o.panel}__tcolors-wrapper`}>
				<div className=${`${o.panel}__tcolors-nav-wrapper`}>
					<div
						className=${`${o.panel}__tcolors-nav`}
						bindTo=${[this.elements,"navContainer"]}
						onScroll=${_t(this,zt,vn).bind(this)}
						onPointerDown=${_t(this,Kt,$n).bind(this)}
					>
						${p.map(((e,n)=>{const r=i[e],l=s===e||!s&&!n,a={EN:{[e]:r.name_en},RU:{[e]:r.name}};return y`
								<button
									type="button"
									className=${`${o.panel}__tcolors-nav-item${l?` ${o.panel}__tcolors-nav-item_active`:""}`}
									data-group=${e}
									onClick=${_t(this,jt,fn).bind(this)}
									bindTo=${[this.elements.navItems,e]}
								>
									${$(e,t,a)}
								</button>
							`}))}
					</div>
				</div>
				${p.map(((e,t)=>{const n=i[e],r=s===e||!s&&!t,l=n.hex;return y`
						<div
							className=${`${o.panel}__tcolors-list`}
							data-group=${e}
							style=${r?void 0:"display:none;"}
							bindTo=${[this.elements.colorLists,e]}
						>
							${l.map((e=>_t(this,Ut,pn).call(this,e)))}
						</div>
					`}))}
			</div>
		`;n.append(r)}function nn(){const{tildaColors:e}=this;if(!e)return;const t=this.elements.libraryContainers.tilda_gradients;t.innerHTML="";const n=e.gradients,i=y`
			<div className=${`${o.panel}__tcolors-wrapper`}>
				<div className=${`${o.panel}__tcolors-list ${o.panel}__tcolors-list_gradients`}>
					${n.map((e=>{const t=V({type:"linear",stops:[{color:S(e.hex1),position:0,opacity:1},{color:S(e.hex2),position:1,opacity:1}],angle:0});return _t(this,Ut,pn).call(this,t)}))}
				</div>
			</div>
		`;t.append(i)}async function on(){const{isGradientsEnabled:e,lang:t}=this.props;if(this.tildaColors)return _t(this,Mt,tn).call(this),void(e&&_t(this,Lt,nn).call(this));const n=JSON.parse(window.localStorage.getItem("tildacolors"));if(n&&Date.now()-n.timestamp<d)return this.tildaColors=n,_t(this,xt,sn).call(this),_t(this,Mt,tn).call(this),void(e&&_t(this,Lt,nn).call(this));try{const t=await fetch(c),n=await t.json();n.timestamp=Date.now(),window.localStorage.setItem("tildacolors",JSON.stringify(n)),this.tildaColors=n,_t(this,xt,sn).call(this),_t(this,Mt,tn).call(this),e&&_t(this,Lt,nn).call(this)}catch(e){console.error(e);const{tilda_colors:n,tilda_gradients:i}=this.elements.libraryContainers;n.innerText=$("load_error",t),i&&(i.innerText=$("load_error",t))}}function sn(){const{tildaColors:e}=this;e&&Object.values(e.colors[0]).forEach((e=>{e.hsl=e.hex.map(S)}))}function rn(){const{tildaColors:e}=this,{openMatchingColorLibraryOnColorChange:t,currentValues:n}=this.props;if(!e||!t||!n.color)return null;const i=n.color;let o=null,s=0;return Object.entries(e.colors[0]).forEach((e=>{let[t,{hsl:n}]=e;const r=n.map((e=>K(i,e))),l=Math.max(...r);l>s&&(o=t,s=l)})),o}function ln(){const{isOpacityEnabled:e,isGradientOpacityOnly:t,isGradientsEnabled:n}=this.props,i=function(e,t,n){const i=[];return document.querySelectorAll(".t396 .tn-elem, .tn-artboard .tn-elem").forEach((n=>{const o=n.querySelector(".tn-atom");if(!o)return;const s=n.getAttribute("data-elem-type");if("button"===s||"shape"===s||"text"===s||"image"===s||"video"===s||"tooltip"===s){const n=F(o,e,t);i.push(...n)}})),document.querySelectorAll(['.record div[id^="rec"]','.record div[id^="rec"] [field="title"]','.record div[id^="rec"] [field="title"] *','.record div[id^="rec"] [field="descr"]','.record div[id^="rec"] [field="descr"] *','.record div[id^="rec"] [field="text"]','.record div[id^="rec"] [field="text"] *','.record div[id^="rec"] [field="subtitle"]','.record div[id^="rec"] [field="subtitle"] *','.record div[id^="rec"] .t-name','.record div[id^="rec"] .t-name *','.record div[id^="rec"] .t-menu__link-item','.record div[id^="rec"] .t-title','.record div[id^="rec"] .t-title *','.record div[id^="rec"] .t-descr','.record div[id^="rec"] .t-descr *','.record div[id^="rec"] .t-btn','.record div[id^="rec"] .t-btn *','.record div[id^="rec"] a','.record div[id^="rec"] a *'].join(",")).forEach((o=>{const s=F(o,e,t,n);i.push(...s)})),[...new Set(i)]}(e,t,n);_t(this,St,Jt).call(this,i)}function an(){const{swatchesKey:e}=this.props;if(!e)return this.savedColors=[],_t(this,kt,Qt).call(this);const t=JSON.parse(localStorage.getItem("tMinicolors"))||{};this.savedColors=Array.isArray(t[e])?t[e]:[],_t(this,kt,Qt).call(this)}function cn(e){const{isOpacityEnabled:t,isGradientOpacityOnly:n,isGradientsEnabled:i}=this.props,o=e.includes("gradient");if(o&&!i)return!1;const s=o?E({rawValue:e,isNoKeyColor:!0}):C(e,!0);if(o){return!!!s.stops.find((e=>{let{opacity:t}=e;return B(t)&&t<1}))||t}{const e=s[3];return!(B(e)&&e<1)||t&&!n}}function dn(e){const{currentValues:t,colorChangeTrigger:n,styles:i,isStyleEditMode:o}=this.props,{target:s,shiftKey:r}=e,{color:l}=s.dataset,a=l.includes("gradient"),c=a?E({rawValue:l,isNoKeyColor:!0,styles:i}):C(l,!0);if(c){if(a)t.gradient=c,t.color=c.stops[0].color,t.opacity=c.stops[0].opacity,t.style=c.stops[0].style;else{const e=4===c.length?c.pop():null;A({currentValues:t,hsl:c,opacity:e,saveGradient:!r,saveStyle:o})}n.trigger()}}function hn(){v(n).then((()=>{if("function"!=typeof window.TSortableLite)throw new TypeError("TSortableLite is not defined");const e=this.elements.libraryContainers.saved_colors,t=e.closest(`.${o.panel}`);let n=null;const{addButton:i}=this.elements;this.sortable&&this.sortable.destroy(),this.sortable=new window.TSortableLite(e,{...r,onStart:()=>{n=t.getBoundingClientRect()},onMove:e=>{const t=e.draggingElement,i=e.originalEvent.clientX,s=e.originalEvent.clientY,r=n.left,l=r+n.width,a=n.top,c=a+n.height;if(i>=r&&i<=l&&s>=a&&s<=c){document.documentElement.style.removeProperty("cursor");this.sortable._dragImage.style.removeProperty("cursor"),t.classList.remove(`${o.panel}__swatch_del`)}else{document.documentElement.style.cursor="no-drop",t.classList.add(`${o.panel}__swatch_del`);this.sortable._dragImage.style.cursor="no-drop"}},onDrop:e=>{const t=e.draggingElement;t.classList.contains(`${o.panel}__swatch_del`)&&(t.remove(),i.style.removeProperty("display")),_t(this,Bt,mn).call(this)},onEnd:e=>{const t=e.draggingElement;document.documentElement.style.removeProperty("cursor"),t.classList.contains(`${o.panel}__swatch_del`)&&(t.remove(),i.style.removeProperty("display"),_t(this,Bt,mn).call(this))}}),this.sortable.init()})).catch((e=>{console.error(e)}))}function pn(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{lang:n}=this.props;return y`
			<button
				type="button"
				className=${`${o.panel}__swatch`}
				style=${`background:${e};${_t(this,Vt,cn).call(this,e)||!t?"":"display:none;"}`}
				data-color=${e}
				onClick=${_t(this,At,dn).bind(this)}
				onKeyDown=${t?_t(this,Gt,gn).bind(this):void 0}
				tooltip=${W(e,n)}
			></button>
		`}function un(){const{color:e,opacity:t,gradient:n}=this.props.currentValues,{lang:i}=this.props;let s="";if(n?s=V(n)||"":e&&(s=`rgba(${k([...e,t]).join(",")})`),s){this.savedColors.push(s);const e=y`
				<button
					type="button"
					className=${`${o.panel}__swatch`}
					style=${`background:${s};${_t(this,Vt,cn).call(this,s)?"":"display:none;"}`}
					data-color=${s}
					onClick=${_t(this,At,dn).bind(this)}
					tooltip=${W(s,i)}
				></button>
			`,{addButton:t}=this.elements;t.before(e),_t(this,Bt,mn).call(this),this.savedColors.length>=h&&(t.style.display="none")}}function gn(e){const{key:t,target:n}=e,{addButton:i}=this.elements;"Backspace"===t&&(n.remove(),i.style.removeProperty("display"),_t(this,Bt,mn).call(this))}function mn(){const{swatchesKey:e}=this.props,t=this.elements.libraryContainers.saved_colors;this.savedColors=[...t.querySelectorAll(`.${o.panel}__swatch`)].map((e=>e.dataset.color));const n=JSON.parse(localStorage.getItem("tMinicolors"))||{};n[e]=this.savedColors,localStorage.setItem("tMinicolors",JSON.stringify(n))}function yn(e){const{value:t}=e.target,n=Object.entries(l).find((e=>{let[,n]=e;return n===t})),i=n&&n[0];i&&(window.localStorage.setItem("tColorpickerLibrary",i),this.activeLibrary=i,Object.entries(this.elements.libraryContainers).forEach((e=>{let[n,i]=e;n===t?i.style.removeProperty("display"):i.style.display="none"})))}function fn(e){const{target:t}=e,n=`${o.panel}__tcolors-nav-item_active`,{group:i}=t.dataset,{colorLists:s,navItems:r}=this.elements;p.forEach((e=>{e===i?(s[e].style.removeProperty("display"),r[e].classList.add(n)):(s[e].style.display="none",r[e].classList.remove(n))})),U({endX:t.offsetLeft,endY:0},t.parentElement)}function vn(){const{navContainer:e}=this.elements,t=e.parentElement,n=e.scrollWidth,i=e.clientWidth,s=e.scrollLeft+i>=n-1,r=`${o.panel}__tcolors-nav-wrapper_scrolled`;s?t.classList.add(r):t.classList.remove(r)}function $n(e){this.navPointerStartPos=e.clientX,document.addEventListener("pointermove",this.handleDocumentPointerMove),document.addEventListener("pointerup",this.handleDocumentPointerUp),document.documentElement.style.userSelect="none",document.documentElement.style.webkitUserSelect="none"}function bn(e){if(e){const{noDocumentColors:e,styles:t}=this.props;_t(this,Dt,on).call(this),_t(this,Nt,an).call(this),e||_t(this,It,ln).call(this),t&&_t(this,Pt,en).call(this),_t(this,Tt,Zt).call(this)}else this.sortable&&this.sortable.destroy(),this.handleDocumentPointerUp()}function wn(){const{currentValues:e}=this.props,t=this.elements.libraryContainers.styles,n=t?.querySelectorAll(`.${o.panel}__style-button`);if(n?.forEach((t=>{const{id:n}=t.dataset;t.disabled=e.style&&e.style.id===n})),"tilda_colors"===this.activeLibrary&&e.color){const e=_t(this,Ot,rn).call(this);if(e){const t=this.elements.navItems[e];t&&_t(this,jt,fn).call(this,{target:t})}}}function Cn(e){const t=e.target.closest("button"),{id:n}=t.dataset,{styles:i,colorChangeTrigger:o,currentValues:s}=this.props,r=i.find((e=>e.id===n));if(!r)return;const l=S(r.vars?.color||"#000000"),a=H(r);delete a.vars,s.style=a,A({currentValues:s,hsl:l,opacity:null,saveGradient:!e.shiftKey,saveStyle:!0}),o.trigger()}function En(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function _n(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var Sn=new WeakSet,Tn=new WeakSet,kn=new WeakSet,Pn=new WeakSet,Mn=new WeakSet,Ln=new WeakSet,Dn=new WeakSet,xn=new WeakSet,On=new WeakSet,In=new WeakSet,Nn=new WeakSet;class Vn{constructor(e){En(this,Nn),En(this,In),En(this,On),En(this,xn),En(this,Dn),En(this,Ln),En(this,Mn),En(this,Pn),En(this,kn),En(this,Tn),En(this,Sn),this.config=e.config,this.colorChangeTrigger=e.colorChangeTrigger,this.colorUpdateTrigger=e.colorUpdateTrigger,this.panelToggleTrigger=e.panelToggleTrigger,this.styleSaveTrigger=e.styleSaveTrigger,this.keyDownTrigger=f(),this.currentValues=e.currentValues,this.input=e.input,this.styleDiv=e.styleDiv,this.container=e.container,this.isOpen=!1,this.isClickStartedOnPanel=!1,this.hasChanges=!1,this.confirmationInProgress=!1,this.element=null,this.focusTrap=null,this.resizeObserver=null,this.currentPosition=null,this.fromClass=null,this.currentCoords={x:0,y:0},this.openPosition={posX:0,posY:0},this.cursorPosition={clientX:0,clientY:0};const t=f();this.colorModeUpdateTrigger=t,this.colorMode={_mode:"hex",set mode(e){this._mode=e,t.trigger()},get mode(){return this._mode}},this.colorUpdateTrigger.on(_n(this,Mn,Gn).bind(this)),this.handleDocPointerDown=this.handleDocPointerDown.bind(this),this.handleDocClick=this.handleDocClick.bind(this),this.handleDocKeyDown=this.handleDocKeyDown.bind(this),this.throttledUpdatePosition=w(_n(this,kn,Un).bind(this),50),this.handleWindowResize=this.throttledUpdatePosition,this.handleDocPointerMoveDrag=this.handleDocPointerMoveDrag.bind(this),this.handleDocPointerUpDrag=this.handleDocPointerUpDrag.bind(this),this.handlePanelTransition=this.handlePanelTransition.bind(this),this.handleCursorPositionForCustomEyeDropper=this.handleCursorPositionForCustomEyeDropper.bind(this)}open(e,t){if(this.isOpen)return;B(e)&&(this.openPosition.posX=e),B(t)&&(this.openPosition.posY=t);const n=window.matchMedia("(max-width: 640px)").matches;this.element||(this.element=_n(this,Sn,An).call(this)),this.focusTrap||(this.focusTrap=function(e){const t=e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),n=t[0],i=t[t.length-1],o=t=>{const{key:o,shiftKey:s}=t;if("Tab"!==o)return;const{activeElement:r}=document;r&&e.contains(r)||(t.preventDefault(),s?i.focus():n.focus()),r===n&&s&&(t.preventDefault(),i.focus()),r!==i||s||(t.preventDefault(),n.focus())};return document.addEventListener("keydown",o),{release:()=>{document.removeEventListener("keydown",o)}}}(this.element));const{appendTo:i}=this.config;i.append(this.element),this.element.removeEventListener("transitionend",this.handlePanelTransition),this.isOpen=!0,this.panelToggleTrigger.trigger(!0),n?this.element.classList.remove(`${o.panel}_hidden`):(_n(this,kn,Un).call(this,!0),this.resizeObserver=new ResizeObserver(_n(this,kn,Un).bind(this)),this.resizeObserver.observe(this.element),this.fromClass?(this.element.style.transition="none",this.element.classList.add(this.fromClass),window.setTimeout((()=>{this.element.style.removeProperty("transition"),this.element.classList.remove(`${o.panel}_hidden`),this.element.classList.remove(this.fromClass)}),0)):this.element.classList.remove(`${o.panel}_hidden`)),document.addEventListener("pointerdown",this.handleDocPointerDown),document.addEventListener("click",this.handleDocClick),document.addEventListener("keydown",this.handleDocKeyDown),document.addEventListener("pointermove",this.handleCursorPositionForCustomEyeDropper),window.addEventListener("resize",this.handleWindowResize)}close(){this.isOpen&&this.element&&(this.isOpen=!1,this.isClickStartedOnPanel=!1,this.panelToggleTrigger.trigger(!1),this.focusTrap&&this.focusTrap.release(),this.focusTrap=null,this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),document.removeEventListener("pointerdown",this.handleDocPointerDown),document.removeEventListener("click",this.handleDocClick),document.removeEventListener("keydown",this.handleDocKeyDown),document.removeEventListener("pointermove",this.handleCursorPositionForCustomEyeDropper),window.removeEventListener("resize",this.handleWindowResize),this.handleDocPointerUpDrag(),this.currentPosition=null,this.fromClass&&this.element.classList.add(this.fromClass),this.element.classList.add(`${o.panel}_hidden`),this.element.addEventListener("transitionend",this.handlePanelTransition),window.setTimeout((()=>{0===this.element.offsetWidth&&this.handlePanelTransition()}),0))}handlePanelTransition(){this.element.remove(),this.fromClass&&this.element.classList.remove(this.fromClass),this.fromClass=null,this.element.removeEventListener("transitionend",this.handlePanelTransition)}handleDocPointerMoveDrag(e){const{clientX:t,clientY:n}=e,{dragStartX:i,dragStartY:o,dragStartCoords:s}=this,r=t-i,l=n-o;let{x:a,y:c}=s;a+=r,c+=l,this.currentCoords={x:a,y:c},_n(this,kn,Un).call(this,!0,!0)}handleDocPointerUpDrag(){document.removeEventListener("pointermove",this.handleDocPointerMoveDrag),document.removeEventListener("pointerup",this.handleDocPointerUpDrag),document.documentElement.style.removeProperty("user-select"),document.documentElement.style.removeProperty("-webkit-user-select"),delete this.dragStartCoords,delete this.dragStartX,delete this.dragStartY}handleDocPointerDown(e){this.isClickStartedOnPanel=this.element&&this.element.contains(e.target)}async handleDocClick(e){if(this.isClickStartedOnPanel)return void(this.isClickStartedOnPanel=!1);if(this.confirmationInProgress)return;const{target:t}=e,{element:n,input:i,container:o}=this,{activeElement:s}=document,{isNoInputMode:r,isApiMode:l,confirmFunction:a}=this.config;if("function"==typeof a&&this.hasChanges){this.confirmationInProgress=!0;const e=await a();if(window.setTimeout((()=>this.confirmationInProgress=!1),0),!e)return}n.contains(t)||i?.contains(t)||o?.contains(t)||!r&&!l&&s===i||this.close()}async handleDocKeyDown(e){this.keyDownTrigger.trigger(e);const{key:t}=e,n=document.getElementById("tcolors-eyedropper-preview");if("Escape"!==t||this.confirmationInProgress||n)return;const{confirmFunction:i}=this.config;if("function"==typeof i&&this.hasChanges){this.confirmationInProgress=!0;const e=await i();if(window.setTimeout((()=>this.confirmationInProgress=!1),0),!e)return}this.close()}set theme(e){this.element&&this.element.classList.toggle(o.panelThemeDark,"dark"===e),this.config.theme=e}handleCursorPositionForCustomEyeDropper(e){const t=document.getElementById("tcolors-eyedropper-preview");if("function"==typeof window.EyeDropper||t)return;const{clientX:n,clientY:i}=e;this.cursorPosition.clientX=n,this.cursorPosition.clientY=i}}function An(){const{theme:e,panelZIndex:t,noDocumentColors:n,gradientHint:i,swatchesKey:s,isGradientsEnabled:r,isOpacityEnabled:l,isGradientOpacityOnly:a,isTextContrastCheckEnabled:c,isNoInputMode:d,isApiMode:h,isStyleEditMode:p,lang:u,defaultLibrary:g,openMatchingColorLibraryOnColorChange:m,styles:f}=this.config,{color:v,gradient:b,style:w}=this.currentValues,C=[{label:$("solid",u),value:"solid",selected:!b},{label:$("linear",u),value:"linear",selected:b&&"linear"===b.type},{label:$("radial",u),value:"radial",selected:b&&"radial"===b.type}],E=!!i.EN.gradient_hint&&b,_=v?`#${M(v)}`:"",S=d||h||p,T=y`
			<div
				className=${`${o.panel} ${o.panel}_hidden`}
				style=${`z-index:${t};--current-color:${_};`}
			>
				${r?y`
							<div
								className=${`${o.panel}__head`}
								onPointerdown=${_n(this,Pn,Wn).bind(this)}
							>
								<${rt}
									className=${`${o.panel}__gradient-select`}
									options=${C}
									onChange=${_n(this,Dn,Rn).bind(this)}
									bindTo=${[this,"gradientSelect"]}
									colorUpdateTrigger=${this.colorUpdateTrigger}
									panelToggleTrigger=${this.panelToggleTrigger}
								/>
								${E?_n(this,Tn,Fn).call(this):""}
								<button
									type="button"
									className=${`${o.panel}__close-btn`}
									onClick=${this.close.bind(this)}
									tooltip=${$("close",u)}
								></button>
							</div>
						`:""}
				${r?y`
							<${Ue}
								currentValues=${this.currentValues}
								colorChangeTrigger=${this.colorChangeTrigger}
								colorUpdateTrigger=${this.colorUpdateTrigger}
								panelToggleTrigger=${this.panelToggleTrigger}
								lang=${u}
							/>
						`:""}
				<${se}
					currentValues=${this.currentValues}
					colorMode=${this.colorMode}
					colorModeUpdateTrigger=${this.colorModeUpdateTrigger}
					colorChangeTrigger=${this.colorChangeTrigger}
					colorUpdateTrigger=${this.colorUpdateTrigger}
					panelToggleTrigger=${this.panelToggleTrigger}
					isStyleEditMode=${p}
					bindTo=${[this,"colorAreaElement"]}
				/>
				<${ft}
					currentValues=${this.currentValues}
					colorMode=${this.colorMode}
					colorModeUpdateTrigger=${this.colorModeUpdateTrigger}
					isOpacityEnabled=${l}
					isGradientOpacityOnly=${a}
					colorChangeTrigger=${this.colorChangeTrigger}
					colorUpdateTrigger=${this.colorUpdateTrigger}
					panelToggleTrigger=${this.panelToggleTrigger}
					keyDownTrigger=${this.keyDownTrigger}
					isStyleEditMode=${p}
					cursorPosition=${this.cursorPosition}
					lang=${u}
				/>
				<div className=${`${o.panel}__current-style`} bindTo=${[this,"currentStyleContainer"]}>
					${_n(this,Ln,Bn).call(this)}
				</div>
				${c?y`
							<${ye}
								currentValues=${this.currentValues}
								input=${this.input}
								panelToggleTrigger=${this.panelToggleTrigger}
								colorUpdateTrigger=${this.colorUpdateTrigger}
								lang=${u}
							/>
						`:""}
				<${Yt}
					currentValues=${this.currentValues}
					noDocumentColors=${n}
					isGradientsEnabled=${r}
					isOpacityEnabled=${l}
					isGradientOpacityOnly=${a}
					swatchesKey=${s}
					colorChangeTrigger=${this.colorChangeTrigger}
					colorUpdateTrigger=${this.colorUpdateTrigger}
					panelToggleTrigger=${this.panelToggleTrigger}
					lang=${u}
					defaultLibrary=${g}
					openMatchingColorLibraryOnColorChange=${m}
					isStyleEditMode=${p}
					styles=${f}
				/>
				<div
					className=${`${o.panel}__style-inputs`}
					style=${p?void 0:"display:none;"}
				>
					<div className=${`${o.panel}__style-label`}>
						<div>${$("style_name",u)}</div>
						<input
							type="text"
							className=${`${o.panel}__style-input`}
							maxlength="200"
							name="name"
							value=${w?.name||""}
							onInput=${_n(this,xn,jn).bind(this)}
						/>
					</div>
					<div className=${`${o.panel}__style-label`}>
						<div>${$("style_descr",u)}</div>
						<input
							type="text"
							className=${`${o.panel}__style-input`}
							maxlength="200"
							name="descr"
							value=${w?.descr||""}
							onInput=${_n(this,xn,jn).bind(this)}
						/>
					</div>
				</div>
				<div
					className=${`${o.panel}__btns`}
					style=${S?void 0:"display:none;"}
				>
					<button
						className=${`${o.panel}__action-btn ${o.panel}__action-btn_clear`}
						onClick=${_n(this,On,zn).bind(this)}
						type="button"
					>
						${$(h||p?"cancel":"clear",u)}
					</button>
					<button
						className=${`${o.panel}__action-btn ${o.panel}__action-btn_apply`}
						onClick=${_n(this,In,Kn).bind(this)}
						type="button"
						disabled=${!(!p||w?.name&&v)||void 0}
						bindTo=${[this,"applyButton"]}
					>
						${$(h||p?"save":"apply",u)}
					</button>
				</div>
			</div>
		`;return"dark"===e&&T.classList.add(o.panelThemeDark),j(T),T}function Fn(){const{gradientHint:e,lang:t}=this.config;return y`
			<${he}
				className=${`${o.panel}__hint_gradient`}
				hintText=${$("gradient_hint",t,e)}
				label="!"
				bindTo=${[this,"gradientHintElement"]}
			/>
		`}function Un(e,t){const n=window.matchMedia("(max-width: 640px)").matches,{colorAreaElement:i,element:s,input:r,styleDiv:l,currentValues:a}=this;if(!s||!i||n)return;const{positionPriority:c,isApiMode:d}=this.config,[h,p,u,g]=this.config.viewboxPadding,[m,y,f,v]=this.config.panelGap,$=s.getBoundingClientRect(),{posX:b,posY:w}=this.openPosition;let C;C=d?{top:w,left:b,width:0,height:0}:a.style&&l&&!a.gradient?l.getBoundingClientRect():r.getBoundingClientRect();const E=i.getBoundingClientRect(),_=document.documentElement.clientWidth,S=document.documentElement.clientHeight,{width:T,height:k}=$,P=E.top-$.top+E.height/2,M={bottom:S-C.top-C.height-f-u>=k,right:_-C.left-C.width-y-p>=T,left:C.left-v-g>=T,top:C.top-m-h>=k},L=e=>{let t=0,n=0;return"bottom"===e?(t=C.left,n=C.top+C.height+f):"right"===e?(t=C.left+C.width+y,n=C.top-P+C.height/2):"left"===e?(t=C.left-v-T,n=C.top-P+C.height/2):"top"===e&&(t=C.left,n=C.top-m-k),{x:t,y:n}};let D=this.currentCoords.x,x=this.currentCoords.y;if(!(this.currentPosition&&M[this.currentPosition]||t))for(const e of c)if(M[e]){this.fromClass=`${o.panel}_from-${e}`;const t=L(e);this.currentPosition=e,this.currentCoords=t,D=t.x,x=t.y;break}s.classList.toggle(`${o.panel}_instant-transition`,!0===e),D=G(g,D,_-T-p),x=G(h,x,S-k-u),this.currentCoords={x:D,y:x},s.style.translate=`${D}px ${x}px`}function Wn(e){const t=window.matchMedia("(max-width: 640px)").matches,n=e.target.classList.contains(`${o.panel}__head`);if(t||!n)return;const{clientX:i,clientY:s}=e;this.dragStartX=i,this.dragStartY=s,this.dragStartCoords={...this.currentCoords},document.addEventListener("pointermove",this.handleDocPointerMoveDrag),document.addEventListener("pointerup",this.handleDocPointerUpDrag),document.documentElement.style.userSelect="none",document.documentElement.style.webkitUserSelect="none"}function Gn(){const{gradientSelect:e,gradientHintElement:t,currentStyleContainer:n,applyButton:i}=this,{gradient:o,color:s,style:r}=this.currentValues,{gradientHint:l,isStyleEditMode:a}=this.config;e&&(e.value=o?o.type:"solid");const c=!!l.EN.gradient_hint&&o;if(t?c?t.style.removeProperty("display"):t.style.display="none":c&&(this.gradientHintElement=_n(this,Tn,Fn).call(this),e&&e.after(this.gradientHintElement)),this.element){const e=s?`#${M(s)}`:"";this.element.style.setProperty("--current-color",e)}n.innerHTML="",n.append(_n(this,Ln,Bn).call(this)),a&&i&&(i.disabled=Boolean(!r?.name||!s)),this.hasChanges=!0}function Bn(){const{style:e}=this.currentValues,{lang:t,isStyleEditMode:n}=this.config;return!e||n?"":y`
			<div
				className=${`${o.panel}__current-style-wrapper${e.deleted?` ${o.panel}__current-style-wrapper_deleted`:""}`}
			>
				<span
					className=${`${o.panel}__swatch ${o.panel}__style-swatch`}
					style=${"background:var(--current-color)"}
				></span>
				<span className=${`${o.panel}__style-name`}>
					${e.deleted?`[${$("deleted",t)}] ${e.name}`:e.name}
				</span>
				<button
					type="button"
					className=${`${o.panel}__style-unpin`}
					tooltip=${$("unpin_style",t)}
					onClick=${_n(this,Nn,Hn).bind(this)}
				></button>
			</div>
		`}function Rn(){const{gradientSelect:e,currentValues:t,colorChangeTrigger:n}=this,{color:i,opacity:o,gradient:s,style:r}=t,{value:l}=e,{isOpacityEnabled:a}=this.config;if(["linear","radial"].includes(l)&&s&&(s.type=l),"solid"===l&&s){const e=s.stops.find((e=>{let{active:t}=e;return t}))||s.stops[0];t.color=e?.color||[0,0,0],t.opacity=B(e?.opacity)?e.opacity:null,t.gradient=null,t.style=e?.style}if(["linear","radial"].includes(l)&&!s){const e=i||[0,0,0];t.gradient={type:l,angle:0,stops:[{color:[...e],opacity:B(o)?o:1,position:0,active:!0,style:r},{color:[...e],opacity:a?0:1,position:1,style:r}]}}n.trigger()}function jn(e){const{style:t,color:n}=this.currentValues;if(!t||!this.config.isStyleEditMode)return;const i=e.target;this.hasChanges=!0;const o=i.value.trim();t[i.name]=o,"name"===i.name&&(this.applyButton.disabled=Boolean(!o||!n))}async function zn(){const{confirmFunction:e,isStyleEditMode:t}=this.config;if("function"==typeof e&&this.hasChanges){this.confirmationInProgress=!0;const t=await e();if(window.setTimeout((()=>this.confirmationInProgress=!1),0),!t)return}if(t)return this.close();const{colorChangeTrigger:n,currentValues:i}=this;i.color=null,i.opacity=null,i.gradient=null,n.trigger({isPanelButton:!0})}function Kn(){const{colorChangeTrigger:e,styleSaveTrigger:t}=this,{isStyleEditMode:n}=this.config;e.trigger({isPanelButton:!0}),n&&t.trigger(),this.close()}function Hn(){const{currentValues:e,colorChangeTrigger:t}=this;if(e.style=null,e.gradient){const t=e.gradient.stops.find((e=>{let{active:t}=e;return t}))||e.gradient.stops[0];t&&(t.style=null)}t.trigger()}class Xn extends CustomEvent{constructor(e){super("paneltoggle"),this.isOpen=e}}class qn extends CustomEvent{constructor(e){let{currentColor:t,currentOpacity:n,currentGradient:i,currentStyle:o,type:s="colorchange"}=e;super(s),i&&(i=JSON.parse(JSON.stringify(i)),i.css=V(i),"radial"===i.type&&"angle"in i&&delete i.angle,i.stops.forEach((e=>{null===e.opacity&&(e.opacity=1),"active"in e&&delete e.active}))),this.currentColor={hex:t?"#"+M(t):t,rgb:t?T(t):t,hsl:t,opacity:null===n&&t?1:n,gradient:i,style:o||null}}}function Yn(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function Jn(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var Zn=new WeakSet,Qn=new WeakSet,ei=new WeakSet,ti=new WeakSet,ni=new WeakSet,ii=new WeakSet,oi=new WeakSet,si=new WeakSet,ri=new WeakSet,li=new WeakSet,ai=new WeakSet,ci=new WeakSet,di=new WeakSet,hi=new WeakSet;function pi(){const{isOpacityEnabled:e,isGradientsEnabled:t,isGradientOpacityOnly:n,swatchesKey:i,theme:o,isNoInputMode:s,isApiMode:r,panelZIndex:l,noDocumentColors:a,panelGap:c,gradientHint:d,isTextContrastCheckEnabled:h,viewboxPadding:p,positionPriority:u,appendTo:g,lang:m,defaultLibrary:y,openMatchingColorLibraryOnColorChange:f,confirmFunction:v,styles:$}=this.config,{colorChangeTrigger:b,colorUpdateTrigger:w,panelToggleTrigger:C,styleSaveTrigger:E,styleSelectTrigger:_,currentValues:S,isStyleEditMode:T}=this,{input:k,container:P,styleDiv:M}=this.elements;return new Vn({config:{isOpacityEnabled:e,isGradientsEnabled:t,isGradientOpacityOnly:n,swatchesKey:i,theme:o,isNoInputMode:s,isApiMode:r,isStyleEditMode:T,panelZIndex:l,noDocumentColors:a,panelGap:c,gradientHint:d,isTextContrastCheckEnabled:h,viewboxPadding:p,positionPriority:u,appendTo:g,lang:m,defaultLibrary:y,openMatchingColorLibraryOnColorChange:f,confirmFunction:v,styles:$},colorChangeTrigger:b,colorUpdateTrigger:w,panelToggleTrigger:C,styleSaveTrigger:E,styleSelectTrigger:_,currentValues:S,input:k,styleDiv:M,container:P})}function ui(){const{input:e}=this.elements,{isNoInputMode:t,disablePanelToggleOnInputReplacementClick:n,isApiMode:i}=this.config;t||i?!n&&t&&e.addEventListener("click",this.handleInputReplacementClick):(e.addEventListener("input",this.handleInput),e.addEventListener("focus",this.openPanel),e.addEventListener("blur",this.handleInputBlur),e.addEventListener("keydown",this.handleInputKeydown))}function gi(e,t,n){const{emptyColorKeywords:i,isGradientsEnabled:o,isOpacityEnabled:s,isGradientOpacityOnly:r,styles:l}=this.config,a=i.find((t=>t===e)),c=e.replace(/[^0-9A-Za-z]/g,""),{currentValues:d}=this;if(e&&c&&!a){const t=E({rawValue:e,styles:l});if(o&&t)s||t.stops.forEach((e=>e.opacity=1)),d.gradient=t,d.color=t.stops[0].color,d.opacity=t.stops[0].opacity,d.style=t.stops[0].style||null;else{const t=e.startsWith("var")&&l?q(e):null,i=t&&l?l.find((e=>{let{id:n}=e;return t.id===n})):null;i?(d.style=H(i),delete d.style.vars):d.style=null;let o=e;i?.vars?.color?o=i?.vars?.color:t?.value&&(o=t?.value);const a=C(o);let c=4===a.length?a.pop():null;c=s&&!r?c:null,A({currentValues:d,hsl:a,opacity:c,saveStyle:n})}this.emptyColorString=null}else d.color=null,d.opacity=null,d.gradient=null,d.style=null,this.emptyColorString=a||null;t?this.colorUpdateTrigger.trigger():this.colorChangeTrigger.trigger()}function mi(){const{input:e,styleDivSpan:t}=this.elements;t.textContent="",e.value="",e.dispatchEvent(new Event("input")),this.closePanel()}function yi(){const{currentValues:e}=this,{input:t}=this.elements;t.disabled||(e.style?this.openPanel():t.focus())}function fi(){const{container:e}=this.elements,{isClearBtnHidden:t}=this.config;t||e?.classList.add(`${o.container}_clear-btn-visible`)}function vi(){const{container:e}=this.elements;this.panel&&this.panel.isOpen||e?.classList.remove(`${o.container}_clear-btn-visible`)}function $i(e){const{input:t}=this.elements,n=new Xn(e);t?.dispatchEvent(n),e||Jn(this,oi,vi).call(this)}function bi(){const{format:e,letterCase:t,isGradientsEnabled:n}=this.config,i=this.currentValues.color,o=this.currentValues.gradient,s=this.currentValues.style;if(!i)return this.emptyColorString||"";let r="";if(n&&o)r=V(o);else if(s)r=`var(--uc-color-color-${s.id},#${M(i)})`;else if("hex"===e)r=`#${M(i)}`;else if("rgb"===e)r=`rgb(${T(i).join(",")})`;else if("hsl"===e){let[e,t,n]=i;e=Math.round(360*e),t=Math.round(100*t),n=Math.round(100*n),r=`hsl(${e},${t}%,${n}%)`}return"uppercase"!==t||r.includes("gradient")||r.includes("var")?r:r.toUpperCase()}function wi(e){this.colorUpdateTrigger.trigger(e);const t=e&&e.isPanelButton,{isNoInputMode:n}=this.config,i=n&&t||!n?"colorchange":"colorupdate";this.dispatchColorChangeEvent(i)}function Ci(){const{onStyleSave:e}=this.config,{style:t,color:n}=this.currentValues;n&&t&&e(JSON.stringify({...t,vars:{color:`#${M(n)}`}}))}function Ei(){const{isNoInputMode:e,isGradientsEnabled:t,isClearBtnHidden:n,isApiMode:i,lang:s}=this.config;if(e||i)return;const{input:r,container:l,clearBtn:a,styleDiv:c,styleDivSpan:d,unpinBtn:h}=this.elements,{color:p,opacity:u,gradient:g,style:m}=this.currentValues,y=this.panel&&this.panel.isOpen;let f="";t&&g?(f=V(g),this.emptyColorString=null,y&&!n&&l?.classList.add(`${o.container}_clear-btn-visible`)):p&&(f=N(p,u),this.emptyColorString=null,y&&!n&&l?.classList.add(`${o.container}_clear-btn-visible`)),!p&&a?a.style.display="none":a&&a.style.removeProperty("display"),l?.style.setProperty("--current-color",f),m&&!g?(c.style.removeProperty("display"),d.textContent=m.deleted?`[${$("deleted",s)}] ${m.name}`:m.name,r.style.display="none",l?.classList.add(`${o.container}_unpin-btn-visible`),m.deleted?l?.classList.add(`${o.container}_deleted-style`):l?.classList.remove(`${o.container}_deleted-style`),h.style.removeProperty("display")):(c.style.display="none",d.textContent="",r.style.removeProperty("display"),l?.classList.remove(`${o.container}_unpin-btn-visible`),l?.classList.remove(`${o.container}_deleted-style`),h.style.display="none"),document.activeElement!==r&&(r.value=Jn(this,ri,bi).call(this))}function _i(){const{currentValues:e,colorChangeTrigger:t}=this;if(e.style=null,e.gradient){const t=e.gradient.stops.find((e=>{let{active:t}=e;return t}))||e.gradient.stops[0];t&&(t.style=null)}t.trigger()}function Si(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.isInited)return;const{emptyColorKeywords:n,isOpacityEnabled:i,isGradientOpacityOnly:o,styles:s}=this.config,r=n.find((t=>t===e)),{currentValues:l}=this;if(!e||r)A({currentValues:l,hsl:null,opacity:null}),this.emptyColorString=r||null;else{const n=s?q(e):null,r=Array.isArray(s)?s.find((e=>{let{id:t}=e;return t&&t===n?.id})):null,a=C(r?.vars?.color||n?.value||e);let c=4===a.length?a.pop():null;if(c=i&&!o?c:null,A({currentValues:l,hsl:a,opacity:c,saveStyle:t}),this.emptyColorString=null,r){const e=H(r);delete e.vars,l.style=e}}this.colorUpdateTrigger.trigger()}window.TColorPicker=class{constructor(e,t){Yn(this,hi),Yn(this,di),Yn(this,ci),Yn(this,ai),Yn(this,li),Yn(this,ri),Yn(this,si),Yn(this,oi),Yn(this,ii),Yn(this,ni),Yn(this,ti),Yn(this,ei),Yn(this,Qn),Yn(this,Zn),t="[object Object]"===Object.prototype.toString.call(t)?t:{};const n="[object Object]"===Object.prototype.toString.call(t.gradientHint)?t.gradientHint:{};n.EN="string"==typeof n.EN&&n.EN||"",n.RU="string"==typeof n.RU&&n.RU||n.EN||"";let i="EN";const o=Object.keys(m);o.includes(t.lang)?i=t.lang:o.includes(window.lang)&&(i=window.lang),this.config={letterCase:["lowercase","uppercase"].includes(t.letterCase)?t.letterCase:"uppercase",format:["hex","rgb","hsl"].includes(t.format)?t.format:"hex",isOpacityEnabled:!!t.isOpacityEnabled,isGradientsEnabled:!!t.isGradientsEnabled,swatchesKey:t.swatchesKey||window.projectid||null,theme:["light","dark"].includes(t.theme)?t.theme:"light",panelZIndex:B(t.panelZIndex)?t.panelZIndex:99999,emptyColorKeywords:Array.isArray(t.emptyColorKeywords)?t.emptyColorKeywords:[],noDocumentColors:!!t.noDocumentColors,swatchSize:B(t.swatchSize)&&t.swatchSize>=0?t.swatchSize:35,swatchGap:B(t.swatchGap)&&t.swatchGap>=0?t.swatchGap:13,disablePanelToggleOnInputReplacementClick:!!t.disablePanelToggleOnInputReplacementClick,isNoInputMode:t.inputReplacement instanceof Element,isApiMode:!(e instanceof Element||t.inputReplacement instanceof Element),colorChangeDelay:B(t.colorChangeDelay)&&t.colorChangeDelay>=0?t.colorChangeDelay:50,isGradientOpacityOnly:!!t.isGradientOpacityOnly,isTextContrastCheckEnabled:!!t.isTextContrastCheckEnabled,gradientHint:{EN:{gradient_hint:n.EN},RU:{gradient_hint:n.RU}},clearBtnSize:B(t.clearBtnSize)&&t.clearBtnSize>=0?t.clearBtnSize:16,isClearBtnHidden:!!t.isClearBtnHidden,viewboxPadding:R(t.viewboxPadding,5),panelGap:R(t.panelGap,-3),positionPriority:z(t.positionPriority,["right","left","bottom"]),appendTo:t.appendTo instanceof Element?t.appendTo:document.body,lang:i,defaultLibrary:["document_colors","saved_colors","tilda_colors","tilda_gradients"].includes(t.defaultLibrary)?t.defaultLibrary:null,openMatchingColorLibraryOnColorChange:!!t.openMatchingColorLibraryOnColorChange,confirmFunction:t.confirmFunction,onColorChange:"function"==typeof t.onColorChange?t.onColorChange:()=>{},onStyleSave:"function"==typeof t.onStyleSave?t.onStyleSave:()=>{},styleCurrentCount:B(t.styleCurrentCount)?t.styleCurrentCount:0,styles:Array.isArray(t.styles)?t.styles:null},this.elements={input:t.inputReplacement||e},this.isInited=!1,this.isStyleEditMode=!1,this.handleInput=this.handleInput.bind(this),this.openPanel=this.openPanel.bind(this),this.handleInputBlur=this.handleInputBlur.bind(this),this.handleInputReplacementClick=this.handleInputReplacementClick.bind(this),this.handleInputKeydown=this.handleInputKeydown.bind(this),this.currentValues={color:null,opacity:null,gradient:null,style:null},this.emptyColorString=null,this.colorChangeTrigger=f(),this.colorUpdateTrigger=f(),this.panelToggleTrigger=f(),this.styleSaveTrigger=f(),this.styleSelectTrigger=f(),this.colorChangeTrigger.on(Jn(this,li,wi).bind(this)),this.colorUpdateTrigger.on(Jn(this,ci,Ei).bind(this)),this.panelToggleTrigger.on(Jn(this,si,$i).bind(this)),this.styleSaveTrigger.on(Jn(this,ai,Ci).bind(this)),this.dispatchColorChangeEvent=b(this.dispatchColorChangeEvent.bind(this),this.config.colorChangeDelay)}init(){if(this.isInited)return;this.isInited=!0;const{isNoInputMode:e,theme:t,clearBtnSize:n,swatchSize:i,swatchGap:s,lang:r,isApiMode:l}=this.config,{input:a}=this.elements;if(!l){if(e)a.classList.add(o.container),this.elements.container=a;else{a.classList.add(o.input);const e=`${i+s}px`;a.style.paddingLeft=e,a.setAttribute("inputmode","none"),a.setAttribute("autocomplete","off");const l=y`
				<div
					className=${o.container}
					onMouseenter=${Jn(this,ii,fi).bind(this)}
					onMouseleave=${Jn(this,oi,vi).bind(this)}
					style=${`--padding-right:${n+4}px;`}
				>
					<div
						className=${`${a.getAttribute("class")} ${o.container}__style-div`}
						bindTo=${[this.elements,"styleDiv"]}
						style="display:none;padding-left:${e};"
						disabled=${a.disabled||void 0}
						onClick=${Jn(this,ni,yi).bind(this)}
					>
						<span>
							<span>${"‍"}</span>
							<span
								className=${`${o.container}__style-span`}
								bindTo=${[this.elements,"styleDivSpan"]}
							></span>
						</span>
					</div>
					<div
						className=${o.swatch}
						style=${`width:${i}px;height:${i}px;`}
						onClick=${Jn(this,ni,yi).bind(this)}
						bindTo=${[this.elements,"swatch"]}
					></div>
					<button
						className=${`${o.container}__unpin-btn`}
						type="button"
						style=${`width:${n}px;height:${n}px;display:none;`}
						onClick=${Jn(this,di,_i).bind(this)}
						tooltip=${$("unpin_style",r)}
						bindTo=${[this.elements,"unpinBtn"]}
					></button>
					${a.disabled?"":y`
								<button
									className=${o.clearBtn}
									type="button"
									style=${`width:${n}px;height:${n}px;`}
									onClick=${Jn(this,ti,mi).bind(this)}
									tooltip=${$("clear",r)}
									bindTo=${[this.elements,"clearBtn"]}
								></button>
							`}
				</div>
			`;a.after(l),l.prepend(a),"dark"===t&&l.classList.add(o.containerThemeDark),this.elements.container=l,Jn(this,ei,gi).call(this,a.value,!0,!0)}Jn(this,Qn,ui).call(this)}}destroy(){if(!this.isInited)return;const{isNoInputMode:e,isApiMode:t}=this.config,{input:n,container:i}=this.elements;e||t?e&&(n.removeEventListener("click",this.handleInputReplacementClick),n.classList.remove(o.container)):(i.insertAdjacentElement("beforebegin",n),i.remove(),n.removeEventListener("input",this.handleInput),n.removeEventListener("focus",this.openPanel),n.removeEventListener("blur",this.handleInputBlur),n.removeEventListener("keydown",this.handleInputKeydown),n.style.removeProperty("padding-left"),n.removeAttribute("inputmode"),n.removeAttribute("autocomplete"),n.classList.remove(o.input)),this.panel&&this.panel.close(),this.isInited=!1,this.currentValues.color=null,this.currentValues.opacity=null,this.currentValues.gradient=null}handleInputBlur(){const{input:e}=this.elements;e.value=Jn(this,ri,bi).call(this)}handleInput(){const{value:e}=this.elements.input;Jn(this,ei,gi).call(this,e)}handleInputKeydown(e){const{key:t}=e;if("Enter"!==t)return;const{input:n}=this.elements;n.value=Jn(this,ri,bi).call(this),this.closePanel()}handleInputReplacementClick(){this.panel&&this.panel.isOpen?this.closePanel():this.openPanel()}openPanel(e,t){this.panel&&this.panel.isOpen||(this.panel||(this.panel=Jn(this,Zn,pi).call(this)),this.panel.open(e,t),this.isStyleEditMode&&window.setTimeout((()=>{const e=this.panel.element?.querySelector(`.${o.panel}__style-input[name="name"]`);e&&(e.focus(),e.select())}),200))}closePanel(){this.panel&&!this.panel.isOpen||!this.panel||this.panel.close()}dispatchColorChangeEvent(e){const t=this.currentValues.color,n=this.currentValues.opacity,i=this.currentValues.gradient,o=this.currentValues.style,{input:s}=this.elements,{isApiMode:r,onColorChange:l}=this.config,a=new qn({currentColor:t,currentOpacity:n,currentGradient:i,currentStyle:o,type:e});r?l(a):s.dispatchEvent(a)}get panelElement(){return this.panel&&this.panel.element||null}get panelState(){return this.panel&&this.panel.isOpen||!1}get color(){return this.currentValues.color}get opacity(){return this.currentValues.opacity}get style(){const{style:e,color:t}=this.currentValues;if(!e)return null;const n=H(e);return n.vars={color:t?`#${M(t)}`:""},n}get gradient(){const e=JSON.parse(JSON.stringify(this.currentValues.gradient));return e&&("radial"===e.type&&"angle"in e&&delete e.angle,e.stops.forEach((e=>{null===e.opacity&&(e.opacity=1),"active"in e&&delete e.active}))),e}set color(e){Jn(this,hi,Si).call(this,e)}set opacity(e){if(!this.isInited)return;const{currentValues:t}=this,{isOpacityEnabled:n,isGradientOpacityOnly:i}=this.config;let o=B(e)&&e<=1&&e>=0?e:t.opacity;o=n&&!i?o:null,A({currentValues:t,hsl:t.color,opacity:o}),this.colorUpdateTrigger.trigger()}set gradient(e){const{isOpacityEnabled:t,isGradientsEnabled:n}=this.config;if(!this.isInited||!n)return;const{currentValues:i}=this;e&&Array.isArray(e.stops)&&e.stops.length?(t||e.stops.forEach((e=>e.opacity=null)),i.gradient=e,i.color=e.stops[0].color,i.opacity=e.stops[0].opacity,i.style=e.stops[0].style||null):i.gradient=null,this.colorUpdateTrigger.trigger()}set style(e){if(!this.isInited)return;this.isStyleEditMode=!0;const{currentValues:t}=this,{styleCurrentCount:n,lang:i}=this.config;if(e&&e.name&&e.id&&"color"===e.type){const n=H(e);delete n.vars,t.style=n}else{let e=$("new_style",i);n>1&&(e=`${e} ${n}`),t.style={name:e,descr:"",type:"color",id:X()}}const o=e?.vars?.color;"string"==typeof o&&o&&Jn(this,hi,Si).call(this,o,!0)}set theme(e){this.isInited&&["light","dark"].includes(e)&&(this.elements.container?.classList.toggle(o.containerThemeDark,"dark"===e),this.panel&&(this.panel.theme=e),this.config.theme=e)}set panelGap(e){this.config.panelGap=R(e,-3),this.panel&&(this.panel.config.panelGap=this.config.panelGap)}set isClearBtnHidden(e){this.config.isClearBtnHidden=e}static parseColor(e){return C(e)}static parseGradient(e,t){return E({rawValue:e,styles:t})}static hexToRGB(e){return _(e)}static hexToHSL(e){return S(e)}static hslToRGB(e){return T(e)}static hslToRGBA(e){return k(e)}static rgbToHEX(e){return P(e)}static hslToHEX(e){return M(e)}static rgbToHSL(e){return L(e)}static hsvToHSL(e){return D(e)}static hslToHSV(e){return x(e)}static calcRelativeLuminance(e){return I(e)}}})();