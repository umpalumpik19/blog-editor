(()=>{"use strict";var t=function(e,i,o,s){var n;i[0]=0;for(var r=1;r<i.length;r++){var l=i[r++],a=i[r]?(i[0]|=l?1:2,o[i[r++]]):i[++r];3===l?s[0]=a:4===l?s[1]=Object.assign(s[1]||{},a):5===l?(s[1]=s[1]||{})[i[++r]]=a:6===l?s[1][i[++r]]+=a+"":l?(n=e.apply(a,t(e,a,o,["",null])),s.push(n),a[0]?i[0]|=2:(i[r-2]=0,i[r]=n)):s.push(a)}return s},e=new Map;const i=5,o=6,s=12,n=300,r=150,l=9999998,a="top",c="hint",h="hover",u=600,d=600,p=5;const m=function(i){var o=e.get(this);return o||(o=new Map,e.set(this,o)),(o=t(this,o.get(i)||(o.set(i,o=function(t){for(var e,i,o=1,s="",n="",r=[0],l=function(t){1===o&&(t||(s=s.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?r.push(0,t,s):3===o&&(t||s)?(r.push(3,t,s),o=2):2===o&&"..."===s&&t?r.push(4,t,0):2===o&&s&&!t?r.push(5,0,!0,s):o>=5&&((s||!t&&5===o)&&(r.push(o,0,s,i),o=6),t&&(r.push(o,t,0,i),o=6)),s=""},a=0;a<t.length;a++){a&&(1===o&&l(),l(a));for(var c=0;c<t[a].length;c++)e=t[a][c],1===o?"<"===e?(l(),r=[r],o=3):s+=e:4===o?"--"===s&&">"===e?(o=1,s=""):s=e+s[0]:n?e===n?n="":s+=e:'"'===e||"'"===e?n=e:">"===e?(l(),o=1):o&&("="===e?(o=5,i=s,s=""):"/"===e&&(o<5||">"===t[a][c+1])?(l(),3===o&&(r=r[0]),o=r,(r=r[0]).push(2,0,o),o=0):" "===e||"\t"===e||"\n"===e||"\r"===e?(l(),o=2):s+=e),3===o&&"!--"===s&&(o=4,r=r[0])}return l(),r}(i)),o),arguments,[])).length>1?o:o[0]}.bind((function(t,e){this[0]=3;for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];if("function"==typeof t){const i=new t(e).render();return i.append(...o.flat()),i}if("string"==typeof t){const i=["svg","circle"].includes(t)?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);return e&&Object.entries(e).forEach((t=>{let[e,o]=t;if(e.startsWith("on"))Array.isArray(o)?o.forEach((t=>i.addEventListener(e.substring(2).toLowerCase(),t))):i.addEventListener(e.substring(2).toLowerCase(),o);else if("className"===e)i.classList.add(...o.split(" "));else if("bindTo"===e){if(Array.isArray(o)){const[t,e]=o;t&&"object"==typeof t&&"string"==typeof e&&(t[e]=i)}}else["string","number"].includes(typeof o)?i.setAttribute(e,o):"boolean"==typeof o&&o&&i.setAttribute(e,"")})),i.append(...o.flat()),i}if(t instanceof Element)return t}));function g(t){if(!(t=t||""))return!1;const e=t.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(shorts\/)|(embed\/)|(watch\?v=))([^#&?]*).*/);return!(!e||11!==e[8].length)&&e[8]}function f(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}function v(t,e){return typeof t===e?t:arguments.length>2&&void 0!==arguments[2]?arguments[2]:""}function b(t,e,i){return e.includes(t)?t:i}function w(t,e){y(t,e),e.add(t)}function y(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function k(t,e){var i=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return e.get(t)}(t,e,"get");return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,i)}function _(t,e,i){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var $=new WeakSet,T=new WeakSet,E=new WeakSet,C=new WeakSet,O=new WeakSet,S=new WeakSet,W=new WeakSet,x=new WeakSet,L=new WeakSet,A=new WeakSet,N=new WeakSet,P=new WeakSet,M=new WeakSet,I=new WeakSet,R=new WeakSet,V=new WeakSet,H=new WeakSet,D=new WeakSet,F=new WeakSet,z=new WeakSet,B=new WeakSet,j=new WeakSet,K=new WeakSet,J=new WeakSet,U=new WeakSet,Y=new WeakSet,q=new WeakMap,G=new WeakSet;function Q(){this.scheduleClose=_(this,D,mt).bind(this),this.documentClickHandler=_(this,j,bt).bind(this),this.handleEscapeKey=_(this,B,vt).bind(this),this.instantClose=this.close.bind(this),this.scheduleOpen=_(this,H,pt).bind(this)}function X(t){t.stopPropagation()}function Z(){this.isVisible||(this.tooltip?.remove(),this.tooltip=null)}function tt(){this.isInitialized||(_(this,P,at).call(this),this.isInitialized=!0)}function et(){return m`
			<div
				className="t-tooltip__wrapper"
				onScroll=${_(this,z,ft).bind(this)}
				bindTo=${[this.elements,"wrapper"]}
			>
				${_(this,L,nt).call(this)}
			</div>
			${_(this,A,rt).call(this)}
		`}function it(){const t=`t-tooltip-${Math.random().toString(36).substring(2,9)}`;return this.tooltipContent=_(this,O,et).call(this),m`
			<div
				className="t-tooltip t-tooltip-${this.config.type}"
				role="t-tooltip"
				id="${t}"
				onClick=${_(this,T,X)}
				onMouseEnter=${_(this,F,gt).bind(this)}
				onMouseLeave=${"click"!==this.config.hideOn?_(this,D,mt).bind(this):void 0}
				onTransitionEnd=${_(this,E,Z).bind(this)}
			>
				${this.tooltipContent}
				${"info"!==this.config.type||this.config.content.coverImage||this.config.content.coverVideo?"":m`
							<div className="t-tooltip__arrow" bindTo=${[this.elements,"arrow"]}></div>
						`}
			</div>
		`}function ot(){const t=`t-tooltip-${Math.random().toString(36).substring(2,9)}`;this.tooltip=_(this,S,it).call(this),this.config.target.setAttribute("aria-describedby",t),document.body.appendChild(this.tooltip)}function st(t){if(!this.tooltip||!this.config.target)return;const e=this.config.target.getBoundingClientRect(),i=this.tooltip.getBoundingClientRect(),{arrow:n}=this.elements;if(!n)return;const r=this.getComputedStyle();if(r)switch(t){case"top":case"bottom":const t=parseFloat(r.borderLeftWidth)||0,l=parseFloat(r.paddingLeft)||0,a=s,c=e.left+t+l+(e.width-2*t-2*l)/2-i.left-a/2;n.style.setProperty("--arrow-left",`${c}px`);break;case"left":case"right":const h=parseFloat(r.borderTopWidth)||0,u=parseFloat(r.paddingTop)||0,d=e.top+h+u+(e.height-2*h-2*u)/2-i.top-o/2;n.style.setProperty("--arrow-top",`${d}px`)}}function nt(){const{title:t,description:e,shortcut:i,coverImage:o,coverVideo:s,mediaHeight:n,buttons:r}=this.config.content,{type:l}=this.config;return m`
			${(o||s)&&"info"===l?m`
						<div
							className="t-tooltip__media"
							style="
                            --media-height: ${n}px;"
						>
							${s?_(this,Y,_t).call(this,s,o):o?m`
											<img src="${o}" />
										`:""}
						</div>
					`:""}
			<div className="t-tooltip__body${r.length?"":" t-tooltip__body_without_buttons"}">
				${t||i&&"hint"===l?m`
							<div className="t-tooltip__main-content">
								${t?m`
											<div className="t-tooltip__title">
												${document.createRange().createContextualFragment(t)}
											</div>
										`:""}
								${i&&"hint"===l?m`
											<div className="t-tooltip__shortcut">
												${document.createRange().createContextualFragment(function(t){const e=t.split("+"),i=navigator.userAgent.includes("Mac"),o={Ctrl:i?"⌃":"Ctrl",Alt:i?"⌥":"Alt",Shift:i?"⇧":"Shift",ShortKey:i?"⌘":"Ctrl",Meta:i?"⌘":"⊞",Backspace:i?"⌫":"Backspace",Plus:"+",Minus:"-",Space:"␣",ArrowRight:"▶",ArrowLeft:"◀",ArrowUp:"▲",ArrowDown:"▼"};return e.map((t=>`<div class="t-tooltip-shortcuts-popup__key">${t in o?o[t]:t}</div>`)).join("")}(i))}
											</div>
										`:""}
							</div>
						`:""}
				${e?m`
							<div className="t-tooltip__description">
								${document.createRange().createContextualFragment(e)}
							</div>
						`:""}
			</div>
		`}function rt(){const{buttons:t}=this.config.content,{type:e}=this.config;return t?.length&&"hint"!==e?m`
			<div className="t-tooltip__buttons">
				${t.map((t=>t.link?m`
							<a
								href="${t.link}"
								target="_blank"
								className="t-tooltip__link t-tooltip__link-${t.type}"
								rel="noopener noreferrer"
							>
								${t.title}
							</a>
						`:m`
						<button
							className="t-tooltip__button t-tooltip__button-${t.type}"
							onClick=${t.onclick}
							type="button"
						>
							${t.title}
						</button>
					`))}
			</div>
		`:""}function lt(){this.mutationObserver||(this.mutationObserver=new MutationObserver((()=>{this.config.target.hasAttribute("disabled")?this.disable():this.enable()})),this.mutationObserver.observe(this.config.target,{attributes:!0,attributeFilter:["disabled"]})),this.intersectionObserver||(this.intersectionObserver=new IntersectionObserver((t=>{document.body.contains(this.config.target)?t[0].intersectionRatio<=.1&&this.close():this.destroy()}),{threshold:.1}),this.intersectionObserver.observe(this.config.target))}function at(){const{showOn:t,target:e,hideOn:i}=this.config;"hover"===t&&(e.addEventListener("mouseenter",this.scheduleOpen),e.addEventListener("focus",this.scheduleOpen),e.addEventListener("blur",this.scheduleClose)),"click"===t&&e.addEventListener("click",this.scheduleOpen),"unhover"===i&&e.addEventListener("mouseleave",this.scheduleClose),"unhover"===i&&"hover"===t&&e.addEventListener("click",this.instantClose)}function ct(){const{target:t}=this.config;t.removeEventListener("mouseenter",this.scheduleOpen),t.removeEventListener("focus",this.scheduleOpen),t.removeEventListener("click",this.scheduleOpen),t.removeEventListener("mouseleave",this.scheduleClose),t.removeEventListener("click",this.instantClose),t.removeEventListener("blur",this.scheduleClose)}function ht(){const{hideOn:t}=this.config;"click"===t&&document.addEventListener("click",this.documentClickHandler),document.addEventListener("keydown",this.handleEscapeKey)}function ut(){document.removeEventListener("click",this.documentClickHandler),document.removeEventListener("keydown",this.handleEscapeKey)}function dt(){return this.isEnabled=!this.config.target.hasAttribute("disabled"),f()&&!this.config.showOnTouchDevices||!this.isEnabled||this.isVisible}function pt(){this.openTimeout&&clearTimeout(this.openTimeout),this.closeTimeout&&clearTimeout(this.closeTimeout),_(this,V,dt).call(this)||(this.openTimeout=setTimeout(this.open.bind(this),this.config.openDelay))}function mt(){this.openTimeout&&clearTimeout(this.openTimeout),this.closeTimeout&&clearTimeout(this.closeTimeout),this.closeTimeout=setTimeout(this.close.bind(this),this.config.closeDelay)}function gt(){clearTimeout(this.closeTimeout)}function ft(){const{wrapper:t}=this.elements;if(!t)return;t.scrollHeight-(t.scrollTop+t.clientHeight)<1?t.classList.remove("t-tooltip__wrapper-with-mask"):t.classList.add("t-tooltip__wrapper-with-mask")}function vt(t){"Escape"===t.key&&this.isVisible&&_(this,D,mt).call(this)}function bt(t){!this.tooltip||this.config.target.contains(t.target)||this.tooltip.contains(t.target)||_(this,D,mt).call(this)}function wt(){this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=null),this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}function yt(){if(!this.tooltip)return;const{tooltip:t,config:e}=this;let{position:s}=this.config;const n=t.getBoundingClientRect(),r=e.target.getBoundingClientRect(),l="info"===e.type&&!(e.content.coverImage||e.content.coverVideo),a=n.height+(l?o:0),c=t=>function(t){let{position:e,targetRect:o,tooltipHeightWithArrow:s,tooltipRect:n,gap:r}=t;switch(e){case"top":return o.top-s-r>=i;case"bottom":return o.bottom+n.height+r<=document.documentElement.clientHeight-i;case"left":return o.left-n.width-r>=i;case"right":return o.right+n.width+r<=document.documentElement.clientWidth-i}}({position:t,tooltipRect:n,targetRect:r,tooltipHeightWithArrow:a,gap:this.config.gap});if(!c(s)){const t=["top","bottom","left","right"].filter((t=>t!==s));for(const e of t)if(c(e)){s=e;break}}const{right:h,width:u,bottom:d,top:p,left:m,height:g}=this.config.target.getBoundingClientRect(),{height:f,width:v}=this.tooltip.getBoundingClientRect(),b=()=>l?this.config.gap+o:this.config.gap;switch(s){case"bottom":t.style.setProperty("--pos-x",h-u/2+"px"),t.style.setProperty("--pos-y",`${d+b()}px`);break;case"top":t.style.setProperty("--pos-x",h-u/2+"px"),t.style.setProperty("--pos-y",`${Math.max(0,p-f-b())}px`);break;case"left":t.style.setProperty("--pos-x",m-v/2-b()+"px"),t.style.setProperty("--pos-y",`${Math.max(0,p-f/2+g/2)}px`);break;case"right":t.style.setProperty("--pos-x",`${h+v/2+b()}px`),t.style.setProperty("--pos-y",`${Math.max(0,p-f/2+g/2)}px`)}t.setAttribute("data-position",s),t.style.setProperty("--max-width",`${this.config.maxWidth}px`),t.style.setProperty("z-index",this.config.zIndex),t.style.setProperty("--scroll-bar-width",window.innerWidth-document.documentElement.clientWidth+"px"),this.elements.arrow&&(this.elements.arrow.setAttribute("data-position",s),_(this,x,st).call(this,s)),_(this,z,ft).call(this)}function kt(t){const e=t.currentTarget,{mediaElement:i,mediaPoster:o}=this.elements;if(i)if(o?.classList.add("t-tooltip__video-poster-hidden"),e.classList.add("t-tooltip__video-wrapper__play-btn-hidden"),i.classList.add("t-tooltip__video_visible"),"IFRAME"===i.tagName){const t=JSON.stringify({event:"command",func:"playVideo",args:""});i.contentWindow.postMessage(t,"*")}else"VIDEO"===i.tagName&&i.play()}function _t(t,e){if(g(t)){const i=k(this,q).call(this,t)+"?enablejsapi=1&autoplay=0";return m`
				<div className="t-tooltip__video-wrapper">
					<button
						className="t-tooltip__video-wrapper__play-btn"
						onClick=${_(this,U,kt).bind(this)}
					></button>
					<img
						src="${e}"
						className="t-tooltip__video-poster"
						bindTo=${[this.elements,"mediaPoster"]}
					/>
					<iframe
						class="t-tooltip__video"
						src="${i}"
						frameborder="0"
						allow="autoplay; fullscreen"
						allowfullscreen
						bindTo=${[this.elements,"mediaElement"]}
					></iframe>
				</div>
			`}const i=`native-video-${Math.random().toString(36).slice(2,11)}`;return m`
			<div className="t-tooltip__video-wrapper">
				<button
					className="t-tooltip__video-wrapper__play-btn"
					onClick=${_(this,U,kt).bind(this)}
				></button>
				<img src="${e}" className="t-tooltip__video-poster" bindTo=${[this.elements,"mediaPoster"]} />
				<video class="t-tooltip__video" id="${i}" controls bindTo=${[this.elements,"mediaElement"]}>
					<source src="${t}" type="video/mp4" />
					Your browser does not support the video tag.
				</video>
			</div>
		`}function $t(){const t=_(this,O,et).call(this);this.tooltipContent.forEach(((e,i)=>{e instanceof HTMLElement&&e.replaceWith(t[i])})),this.tooltipContent=t,_(this,J,yt).call(this)}window.Tooltip=class{constructor(t){let{target:e,content:i,type:o="hint",...s}=t;var m,k,X;if(w(this,G),w(this,Y),w(this,U),w(this,J),w(this,K),w(this,j),w(this,B),w(this,z),w(this,F),w(this,D),w(this,H),w(this,V),w(this,R),w(this,I),w(this,M),w(this,P),w(this,N),w(this,A),w(this,L),w(this,x),w(this,W),w(this,S),w(this,O),w(this,C),w(this,E),w(this,T),w(this,$),X={writable:!0,value:t=>{const e=function(t){const e={youtube:g};return Object.entries(e).map((e=>{let[i,o]=e;return{videoType:i,videoId:o(t)}})).find((t=>{let{videoId:e}=t;return e}))||!1}(t);return i=e.videoType,{youtube:`https://www.youtube.com/embed/${o=e.videoId}`,vimeo:`https://player.vimeo.com/video/${o}`,vk:`https://vk.com/video_ext.php?oid=${o[0]}&id=${o[1]}&hd=2`,rutube:`https://rutube.ru/play/embed/${o}`,kinescope:`https://kinescope.io/embed/${o}`}[i]||"";var i,o}},y(m=this,k=q),k.set(m,X),!(e&&e instanceof Element))throw new Error("Target element is invalid or not provided");this.config={target:e,content:{title:v(i.title,"string"),description:v(i.description,"string"),shortcut:v(i.shortcut,"string"),coverImage:v(i.coverImage,"string"),coverVideo:v(i.coverVideo,"string"),mediaWidth:v(i.mediaWidth,"number",n),mediaHeight:v(i.mediaHeight,"number",r),buttons:Array.isArray(i.buttons)?i.buttons:[]},type:b(o,["hint","info"],c),showOn:f()?"click":b(s.showOn,["hover","click"],h),hideOn:f()?"click":b(s.hideOn,["unhover","click"],"unhover"),showOnTouchDevices:v(s.showOnTouchDevices,"boolean","info"===o),position:b(s.position,["top","bottom","left","right"],a),zIndex:v(s.zIndex,"number",l),maxWidth:v(s.maxWidth,"number",n),gap:v(s.gap,"number",p),onOpen:v(i.onOpen,"function",(()=>{})),onClose:v(i.onClose,"function",(()=>{}))},this.config.openDelay="click"===this.config.showOn?0:v(s.openDelay,"number",d),this.config.closeDelay="click"===this.config.hideOn?0:v(s.closeDelay,"number",u),this.tooltip=null,this.elements={},this.closeTimeout=null,this.openTimeout=null,this.isVisible=!1,this.intersectionObserver=null,this.mutationObserver=null,this.isEnabled=!e.hasAttribute("disabled"),this.isInitialized=!1,_(this,$,Q).call(this),_(this,C,tt).call(this)}destroy(){this.openTimeout&&clearTimeout(this.openTimeout),this.closeTimeout&&clearTimeout(this.closeTimeout),this.close(),_(this,M,ct).call(this)}getComputedStyle(){if(document.body.contains(this.config.target))return this.targetStyleCache||(this.targetStyleCache=window.getComputedStyle(this.config.target)),this.targetStyleCache}open(){_(this,V,dt).call(this)||(_(this,F,gt).call(this),this.tooltip||_(this,W,ot).call(this),_(this,N,lt).call(this),_(this,I,ht).call(this),this.isVisible=!0,setTimeout((()=>{this.tooltip.classList.add("t-tooltip-visible")}),0),_(this,J,yt).call(this),this.config.onOpen())}close(){this.tooltip&&(this.tooltip.classList.remove("t-tooltip-visible"),_(this,K,wt).call(this),_(this,R,ut).call(this),this.isVisible=!1,this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null),this.openTimeout&&(clearTimeout(this.openTimeout),this.openTimeout=null),this.config.onClose())}disable(){this.close(),this.isEnabled=!1}enable(){this.isEnabled=!0}updateContent(t){this.config.content={...this.config.content,...t},this.tooltip&&_(this,G,$t).call(this)}}})();