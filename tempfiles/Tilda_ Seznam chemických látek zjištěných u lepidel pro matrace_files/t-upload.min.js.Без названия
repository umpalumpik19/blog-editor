function humanDigits(t,e){return 2==e.length?1==t?e[0]:e[1]:e[5<t%100&&t%100<20?2:[2,0,1,1,1,2][t%10<5?t%10:5]]||""}window.reqAnimationFrame||(window.reqAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}),"undefined"==typeof Tildaupload_UPLOADKEY&&(Tildaupload_UPLOADKEY="");var Tildavideoupload_UPLOADKEY=window.Tildavideoupload_UPLOADKEY||"",Tildaupload_URL=(!function(){var l,s,e,t,d,n,r,a,u=[].slice,p={}.hasOwnProperty;function i(){}r=function(){},i.prototype.addEventListener=i.prototype.on,i.prototype.on=function(t,e){return this._callbacks=this._callbacks||{},this._callbacks[t]||(this._callbacks[t]=[]),this._callbacks[t].push(e),this},i.prototype.emit=function(){var t,e,i,o=arguments[0],s=2<=arguments.length?u.call(arguments,1):[];if(this._callbacks=this._callbacks||{},t=this._callbacks[o])for(e=0,i=t.length;e<i;e++)t[e].apply(this,s);return this},i.prototype.removeListener=i.prototype.off,i.prototype.removeAllListeners=i.prototype.off,i.prototype.removeEventListener=i.prototype.off,i.prototype.off=function(t,e){var i,o,s,r;if(this._callbacks&&0!==arguments.length){if(i=this._callbacks[t])if(1===arguments.length)delete this._callbacks[t];else for(o=s=0,r=i.length;s<r;o=++s)if(i[o]===e){i.splice(o,1);break}}else this._callbacks={};return this},s=i,(l=function(){var D,W,t,e=N,i=s;for(t in i)p.call(i,t)&&(e[t]=i[t]);function o(){this.constructor=e}function N(t,e){if(this.element=t,this.version=N.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid tildaupload element.");if(this.elementid=this.element.getAttribute("id"),this.elementid||(this.elementid="tildaupload"+parseInt(Math.floor(Math.random()*(9e5+1))+99999),this.element.setAttribute("id",this.elementid)),this.element.tildaupload&&console.log("Error: Tildaupload already attached to "+this.elementid),this.options=D({},this.defaultOptions,void 0,null!=e?e:{}),this.originalelement||(this.originalelement=this.element),"INPUT"==this.element.nodeName&&(null===(t=this.element.getAttribute("data-tu-text-button"))&&(t=this.options.dicts[this.options.locale].buttonUpload,this.options.uploadMultiple)&&(t=this.options.dicts[this.options.locale].buttonUploads),N.getUploaderSettings(this.element).isVideo?this.element=N.createElement(this.createUploadVideoButtonHTML()):this.element=N.createElement(this.createUploadButtonHTML(t)),this.originalelement.parentNode.insertBefore(this.element,this.originalelement),this.originalelement.style.display="none",this.element.style.display=""),N.instances.push(this),this.element.tildaupload=this,t=null!=(t=N.optionsForElement(this.element))?t:{},this.options=D({},this.defaultOptions,t,null!=e?e:{}),this.options.forceFallback||!N.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(t=this.getExistingFallback())&&t.parentNode&&t.parentNode.removeChild(t),!1!==this.options.previewsContainer&&(this.options.previewsContainer?this.previewsContainer=N.getElement(this.options.previewsContainer,"previewsContainer"):this.previewsContainer=this.element),this.options.uploadMultiple&&(this.options.previewTemplate='<div class="tu-uploader-multiple-img-item tu-js-preview-item"> <div class="tu-uploader-multiple-img-wrapper"> <div class="tu-uploader-multiple-img-separator"></div> <div class="tu-uploader-multiple-img-progressbar" data-tu-uploadprogress="" style="width:0%;"></div> <div class="tu-uploader-multiple-img" data-tu-thumbnail></div> <div class="tu-uploader-multiple-remover" data-tu-remove=""> <div class="tu-uploader-multiple-remover-line tu-uploader-multiple-remover-line-first"></div> <div class="tu-uploader-multiple-remover-line tu-uploader-multiple-remover-line-second"></div> </div> </div> </div>'),this.options.clickable)if(!0===this.options.clickable)if(this.element==this.emptydropzone){var i,o=N.getElements("#"+this.emptydropzone.getAttribute("id")+" .tu-clickable","clickable");for(this.clickableElements=[this.originalelement],i=0;i<o.length;i++)this.clickableElements.push(o[i])}else this.clickableElements=[this.element];else this.clickableElements=N.getElements(this.options.clickable,"clickable");var s=this;setTimeout(function(){s.init()},150)}return o.prototype=i.prototype,e.prototype=new o,e.__super__=i.prototype,N.prototype.Emitter=s,N.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],N.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:10,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1e3,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,locale:"EN",dicts:{},accept:function(t,e){return e()},init:function(){return r},forceFallback:!1,fallback:function(){var t,e,i,o,s,r;for(this.element.className=this.element.className+" tu-browser-not-supported",o=0,s=(r=this.element.getElementsByTagName("div")).length;o<s;o++)t=r[o],/(^| )tu-message($| )/.test(t.className)&&((e=t).className="tu-message");return e||(e=N.createElement('<div class="tu-message"><span></span></div>'),this.element.appendChild(e)),(i=e.getElementsByTagName("span")[0])&&(null!=i.textContent?i.textContent=this.options.dicts[this.options.locale].fallbackMessage:null!=i.innerText&&(i.innerText=this.options.dicts[this.options.locale].fallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(t){var e,i={srcX:0,srcY:0,srcWidth:t.width,srcHeight:t.height},o=t.width/t.height;return!this.options.thumbnailWidth&&!this.options.thumbnailHeight&&(e=this.elementid,e=document.getElementById(e))&&(this.options.thumbnailWidth=e.getBoundingClientRect().width),i.optWidth=this.options.thumbnailWidth,i.optHeight=this.options.thumbnailHeight,null==i.optWidth&&null==i.optHeight?(i.optWidth=i.srcWidth,i.optHeight=i.srcHeight):null==i.optWidth?i.optWidth=o*i.optHeight:null==i.optHeight&&(i.optHeight=1/o*i.optWidth),e=i.optWidth/i.optHeight,t.height<i.optHeight||t.width<i.optWidth?(i.trgHeight=i.srcHeight,i.trgWidth=i.srcWidth):e<o?(i.srcHeight=t.height,i.srcWidth=i.srcHeight*e):(i.srcWidth=t.width,i.srcHeight=i.srcWidth/e),i.srcX=(t.width-i.srcWidth)/2,i.srcY=(t.height-i.srcHeight)/2,i},drop:function(){return this.element&&this.element.classList.remove("tu-drag-hover")},dragstart:r,dragend:function(){return this.element&&this.element.classList.remove("tu-drag-hover")},dragenter:function(){return this.element&&this.element.classList.add("tu-drag-hover")},dragover:function(){return this.element&&this.element.classList.add("tu-drag-hover")},dragleave:function(){return this.element&&this.element.classList.remove("tu-drag-hover")},paste:r,reset:function(){return this.element&&this.element.classList.remove("tu-started")},addedfile:function(i){var t,o,e,s,r,l,n,a,u,p,d,c,m,h,g,v,f,y=(this.originalelement||this.element).getAttribute("id"),b=(this.element&&this.element.classList.add("tu-started"),document.getElementById("tu-popup"));if(this.options.uploadMultiple?b?((m=b.querySelector(".tu-popup-content"))&&(N.addClass(m,"tu-uploader-multiple-screen"),N.addClass(m,"tu-uploader-has-miltiple-img")),this.previewsContainer=b.querySelector(".tu-uploader-multiple-images"),i.previewElement||(i.previewElement=N.createElement(this.options.previewTemplate.trim()),m=this.previewsContainer.firstChild,0<(h=this.previewsContainer.childNodes.length)&&(1==this.previewsContainer.childNodes[h-1].nodeType?m=this.previewsContainer.childNodes[h-1]:1<h&&1==this.previewsContainer.childNodes[h-2].nodeType&&(m=this.previewsContainer.childNodes[h-2])),this.previewsContainer.insertBefore(i.previewElement,m)),i.previewElement.querySelector("[data-tu-uploadprogress]").style.width="0%",h=b.querySelectorAll(".tu-js-preview-item").length,m="",m="RU"==this.options.locale?"Вы выбрали "+h+" "+humanDigits(h,["файл","файла","файлов"]):1==h?"You've selected "+h+" file":"You've selected "+h+" files",b.querySelector(".tu-uploader-multiple-title").innerHTML=m,b.querySelector(".tu-uploader-multiple-nav-title").innerHTML=m):(g=document.getElementById(y+"-previews"))&&g.querySelector(".tu-popup-progressbar-steps")&&((v=g.querySelector("[data-tu-uploadprogress]"))&&(v.style.width="0%"),N.removeClass(g,"tu-popup-progressbar-completed"),N.removeClass(g,"tu-popup-progressbar-uploaded"),N.removeClass(g,"tu-popup-progressbar-error"),N.removeClass(g,"tu-popup-progressbar-start")):"IMG"==this.originalelement.nodeName?(this.previewsContainer=this.originalelement,this.originalelement.setAttribute("data-tu-thumbnail",""),h=document.getElementById(y),N.setPositionForProgressLine(h)):"INPUT"==this.originalelement.nodeName?(g=document.getElementById(y+"-previews"))&&g.querySelector(".tu-popup-progressbar-steps")&&((v=(this.previewsContainer=g).querySelector("[data-tu-uploadprogress]"))&&(v.style.width="0%"),N.removeClass(g,"tu-popup-progressbar-uploaded"),N.removeClass(g,"tu-popup-progressbar-completed"),N.removeClass(g,"tu-popup-progressbar-error"),N.removeClass(g,"tu-popup-progressbar-start"),i.previewElement=this.previewsContainer):this.originalelement.getAttribute("bgimgfield")?(this.previewsContainer=this.originalelement.querySelector(".t-cover__carrier"),this.previewsContainer||(this.previewsContainer=this.originalelement),this.previewsContainer.setAttribute("data-tu-thumbnail",""),i.previewElement=this.previewsContainer):this.previewsContainer=null,this.previewsContainer){if(i.previewElement){for(i.previewTemplate=i.previewElement,e=0,l=(u=i.previewElement.querySelectorAll("[data-tu-name]")).length;e<l;e++)(t=u[e]).textContent=this._renameFilename(i.name),0<this.options.fileNameSize&&t.textContent.length>this.options.fileNameSize&&(t.textContent=t.textContent.substring(0,this.options.fileNameSize-3)+"...");for(s=0,n=(p=i.previewElement.querySelectorAll("[data-tu-size]")).length;s<n;s++)(t=p[s]).innerHTML=this.filesize(i.size);this.options.addRemoveLinks&&(i._removeLink=N.createElement('<a class="tu-remove" href="javascript:undefined;" data-tu-remove>'+this.options.dicts[this.options.locale].removeFile+"</a>"),i.previewElement.appendChild(i._removeLink))}if(f=this,o=function(t){return t.preventDefault(),t.stopPropagation(),i.status===N.UPLOADING?N.confirm(f.options.dicts[f.options.locale].cancelUploadConfirmation,function(){return f.removeFile(i)}):f.options.dicts[f.options.locale].removeFileConfirmation?N.confirm(f.options.dicts[f.options.locale].removeFileConfirmation,function(){return f.removeFile(i)}):f.removeFile(i)},c=[],i.previewElement)for(r=0,a=(d=i.previewElement.querySelectorAll("[data-tu-remove]")).length;r<a;r++){w=removeAllEventListeners(w=d[r]),c.push(w.addEventListener("click",o));var w=document.getElementById("closelayer");w&&w.addEventListener("click",function(t){var e=i.previewElement;e&&e.classList.contains("tu-processing")&&o(t)}),document.addEventListener("keydown",function(t){var e=i.previewElement;27==t.keyCode&&e&&e.classList.contains("tu-processing")&&o(t)})}return c}},removedfile:function(t){var e;return t.previewElement&&void 0===t.url?null!=(e=t.previewElement)&&e.parentNode&&e.parentNode.removeChild(t.previewElement):""!==t.url&&t.status===N.ADDED&&null!=(e=t.previewElement)&&e.parentNode&&(t.previewElement.classList.remove("tu-processing"),t.previewElement.classList.remove("tu-image-preview"),t.previewElement.classList.add("tu-popup-progressbar-start"),this.emit("error",t,this.options.dicts[this.options.locale].uploadCanceled)),this._updateMaxFilesReachedClass()},thumbnail:function(t,e){var i,o,s,r;if(t.previewElement){for(t.previewElement.classList.remove("tu-file-preview"),o=0,s=(r=t.previewElement===this.options.originalelemet&&"IMG"==this.options.originalelement.nodeName.toUpperCase()||t.previewElement===this.previewsContainer&&this.options.originalelement.getAttribute("bgimgfield")?[t.previewElement]:t.previewElement.querySelectorAll("[data-tu-thumbnail]")).length;o<s;o++)"IMG"==(i=r[o]).nodeName.toUpperCase()?(i.alt=t.name,i.src=e):(i.style["background-image"]="url("+e+")",i.setAttribute("title",t.name));return setTimeout(function(){return t.previewElement.classList.add("tu-image-preview")},1)}},error:function(t,e){var i,o,s,r,l;if(this.options.uploadMultiple)t.previewElement&&-1<t.previewElement.className.indexOf("tu-uploader-multiple-img-item")&&((u=t.previewElement.querySelector(".tu-uploader-multiple-img-item-error-text"))||(u=N.createElement('<div class="tu-uploader-multiple-img-item-error-wrapper"> <div class="tu-uploader-multiple-img-item-error-icon"> <svg width="34px" height="34px" viewBox="0 0 34 34"> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g transform="translate(-28.000000, 0.000000)" fill="#FF2E2E"> <g transform="translate(28.000000, 0.000000)"> <path d="M17,33.6458333 C7.79166667,33.6458333 0.354166667,26.2083333 0.354166667,17 C0.354166667,7.79166667 7.79166667,0.354166667 17,0.354166667 C26.2083333,0.354166667 33.6458333,7.79166667 33.6458333,17 C33.6458333,26.2083333 26.2083333,33.6458333 17,33.6458333 L17,33.6458333 Z M17,1.77083333 C8.57083333,1.77083333 1.77083333,8.57083333 1.77083333,17 C1.77083333,25.4291667 8.57083333,32.2291667 17,32.2291667 C25.4291667,32.2291667 32.2291667,25.4291667 32.2291667,17 C32.2291667,8.57083333 25.4291667,1.77083333 17,1.77083333 L17,1.77083333 Z"></path> <path d="M16.3625,21.1791667 L15.725,12.325 L15.725,8.64166667 L18.275,8.64166667 L18.275,12.325 L17.7083333,21.1791667 L16.3625,21.1791667 L16.3625,21.1791667 Z M15.7958333,25.3583333 L15.7958333,23.0208333 L18.1333333,23.0208333 L18.1333333,25.3583333 L15.7958333,25.3583333 L15.7958333,25.3583333 Z"></path> </g> </g> </g> </svg> </div> <div class="tu-uploader-multiple-img-item-error-text">Upload only images</div> </div>'),t.previewElement.appendChild(u),u=t.previewElement.querySelector(".tu-uploader-multiple-img-item-error-text")),u.innerHTML=e,N.addClass(t.previewElement,"tu-uploader-multiple-img-item-error"));else if(this.previewsContainer){this.previewsContainer.classList.add("tu-popup-progressbar-error");var n,a,u=this.previewsContainer.querySelector("[data-tu-errormessage]"),p=(u?(u.textContent=e,n="Upload error >",(a=this.previewsContainer.querySelector(".tu-popup-progressbar-error-title"))&&(25<(n=void 0!==e?e:n).length&&(n=n.substring(0,23)+"..."),a.textContent=n)):((u=document.getElementById("tu-global-error-container"))||((u=N.createElement('<div id="tu-global-error-container" class="tu-bubble-box"><div class="tu-bubble-box__text"></div></div>')).style.display="none",document.body.appendChild(u)),u.childNodes[u.childNodes.length-1].innerHTML=e,u.style.display="block",window.setTimeout(function(){var t=document.getElementById("tu-global-error-container");t&&(t.style.display="none")},5e3)),this);window.setTimeout(function(){p.previewsContainer.classList.add("tu-popup-progressbar-start"),p.previewsContainer.classList.remove("tu-popup-progressbar-error")},5e3)}else if(t.previewElement)for(t.previewElement.classList.add("tu-error"),"string"!=typeof e&&e.error&&(e=e.error),l=[],o=0,s=(r=t.previewElement.querySelectorAll("[data-tu-errormessage]")).length;o<s;o++)i=r[o],l.push(i.textContent=e);else t.tuInfo&&t.type!==t.tuInfo.type&&td__showBubbleNotice&&td__showBubbleNotice("Image type error! The file, you have uploaded with "+t.type.split("/")[1]+" type, has "+t.tuInfo.type.split("/")[1]+" type.",3e4,"");this.onUserFail&&!this.options.uploadMultiple&&this.onUserFail.call(this,t,e)},errormultiple:function(t,e){console.log("["+this.elementid+"] errormultiple in "+t.length+", text: ",e),this.onUserFail&&this.options.uploadMultiple&&this.onUserFail.call(this,t,e)},processing:function(t){if(t.previewElement&&(t.previewElement.classList.add("tu-processing"),t._removeLink))return t._removeLink.textContent=this.options.dicts[this.options.locale].cancelUpload},processingmultiple:r,uploadprogress:function(t,e){var i,o,s,r,l;if(t.previewElement){for(l=[],o=0,s=(r=t.previewElement.querySelectorAll("[data-tu-uploadprogress]")).length;o<s;o++)"PROGRESS"===(i=r[o]).nodeName?l.push(i.value=e):l.push(i.style.width=e+"%");return l}},totaluploadprogress:r,sending:r,sendingmultiple:r,success:function(t,e){var i,o,s=this;if(t.tuInfo||(t.tuInfo={}),t.previewElement){if(this.options.uploadMultiple&&e&&e.result)for(var r,l,n=0;n<e.result.length;n++)e.result[n].originalUrl.replace(/й/gi,"й")==t.name.replace(/й/gi,"й")&&(t.tuInfo=e.result[n],t.previewElement.setAttribute("data-tu-url",e.result[n].cdnUrl),(r=t.previewElement.querySelector("[data-tu-thumbnail]"))&&""<e.result[n].cdnUrl&&("IMG"==r.nodeName.toUpperCase()?r.setAttribute("src",e.result[n].cdnUrl):r.style["background-image"]="url("+e.result[n].cdnUrl+")"),l=t.previewElement,window.setTimeout(function(){var t=l.querySelector("[data-tu-uploadprogress]");t&&(t.style.width="0%")},500));else this.element&&"IMG"==this.element.tagName&&e&&1==e.result.length?(t.tuInfo=e.result[0],e.result[0]&&this.element.setAttribute("src",e.result[0].cdnUrl),t.previewElement!=this.element.parentNode&&(t.previewElement.style.width="100%",t.previewElement.style.display="none",this.element.style.display="")):-1<this.previewsContainer.className.indexOf("tu-popup-progressbar-container")?((i=N.getElement("[data-tu-uploadprogress]","progressbar"))&&(i.style.width="100%"),N.addClass(s.previewsContainer,"tu-popup-progressbar-uploaded"),window.setTimeout(function(){N.removeClass(s.previewsContainer,"tu-processing"),N.removeClass(s.previewsContainer,"tu-popup-progressbar-uploaded"),N.addClass(s.previewsContainer,"tu-popup-progressbar-completed"),i&&(i.style.width="0%")},500)):this.element.getAttribute("bgimgfield")&&((o=this.element.querySelector(".t-cover__carrier"))?o.style["background-image"]="url("+e.result[0].cdnUrl+")":this.element.style["background-image"]="url("+e.result[0].cdnUrl+")",e.result[0])&&this.element.setAttribute("data-tu-value",e.result[0].cdnUrl);return t.previewElement.classList.add("tu-success")}},successmultiple:r,canceled:function(t){return this.emit("error",t,this.options.dicts[this.options.locale].uploadCanceled)},canceledmultiple:r,complete:function(t){if(t._removeLink&&(t._removeLink.textContent=this.options.dicts[this.options.locale].removeFile),t.previewElement)return t.previewElement.classList.add("tu-complete")},completemultiple:r,maxfilesexceeded:r,maxfilesreached:r,queuecomplete:r,addedfiles:r,previewTemplate:'<div class="tu-preview tu-file-preview" style="width: 180px; float: left; overflow:hidden;"><div class="tu-details dztemplate" style="display:block;position: relative; width: 180px; padding: 5px; overflow: hidden;"> <img data-tu-thumbnail /> <div class="tu-filename"><span data-tu-name id="filenamer"></span></div> <div class="tu-size" data-tu-size></div> <div class="tu-remove-file" data-tu-remove><div class="tu-close"></div></div> </div> <div class="tu-progress" style=""><span class="tu-upload" data-tu-uploadprogress></span></div> <div class="tu-success-mark" style="display:none;"><span>✔</span></div> <div class="tu-error-mark" style="display:none;"><span>✘</span></div><div class="tu-error-message" style="display:none;"><span data-tu-errormessage></span></div></div>'},D=function(){for(var t,e,i,o=arguments[0],s=2<=arguments.length?u.call(arguments,1):[],r=0,l=s.length;r<l;r++)for(t in e=s[r])i=e[t],o[t]=i;return o},N.prototype.createUploadVideoButtonHTML=function(){var t;if(Tildavideoupload_UPLOADKEY)return t=this.options.dicts[this.options.locale].videoSize,'<button type="button" id="'+this.elementid+'-previews" class="tu-uploadvideo-button tooltip pe-tooltip tooltipstered" data-tooltip-position="top" data-tooltip="'+t+'" aria-label="'+t+'"><svg class="tu-video-btn" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none"><path stroke="#222" stroke-width="1.3" d="M3.5 13v2a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-2M10 4v8.5M10 4 7 7m3-3 3 3" opacity=".5"/></svg><svg class="tu-video-loader tu-video-elements_hidden" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none"><path stroke="#EEE" d="M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z"/><path stroke="#FA8669" stroke-linecap="round" d="M18 10a8 8 0 1 1-8-8"/></svg></button>'},N.prototype.createUploadButtonHTML=function(t){return'<div id="'+this.elementid+'-previews" class="tu-popup-progressbar-container tu-popup-progressbar-start"><div class="tu-popup-progressbar-error-container"> <div class="tu-popup-progressbar-error-wrapper"> <div class="tu-popup-progressbar-error-title">Upload error &gt; </div><div class="tu-popup-progressbar-error-text" data-tu-errormessage>Image files allowed only</div> </div> </div> <div class="tu-popup-progressbar-steps"> <div class="tu-popup-progressbar-step3"><div class="tu-popup-toggler '+this.elementid+'-button" id="'+this.elementid+'-button">'+t+'</div><div class="tu-popup-progressbar-final '+this.elementid+'-button"><div class="tu-popup-progressbar-final-text"> <span data-tu-name></span> <span data-tu-size>0KB</span> </div> </div> </div> <div class="tu-popup-progressbar-step2"> <div class="tu-popup-progressbar-checkmark-wrapper"> <div class="tu-popup-progressbar-checkmark"> <div class="tu-popup-progressbar-checkmark_stem"></div> <div class="tu-popup-progressbar-checkmark_kick"></div> </div> </div> </div> <div class="tu-popup-progressbar-step1"> <div class="tu-popup-progressbar-bg" data-tu-uploadprogress></div><div class="tu-popup-progressbar-text">'+this.options.dicts[this.options.locale].uploading+'</div><div class="tu-popup-progressbar-close-wrapper" data-tu-remove> <div class="tu-popup-progressbar-close"></div> <div class="tu-popup-progressbar-close-line tu-popup-progressbar-close-line-first"></div> <div class="tu-popup-progressbar-close-line tu-popup-progressbar-close-line-second"></div> </div> </div> </div> </div>'},N.prototype.getAcceptedFiles=function(){for(var t,e=this.files,i=[],o=0,s=e.length;o<s;o++)(t=e[o]).accepted&&i.push(t);return i},N.prototype.getRejectedFiles=function(){for(var t,e=this.files,i=[],o=0,s=e.length;o<s;o++)(t=e[o]).accepted||i.push(t);return i},N.prototype.getFilesWithStatus=function(t){for(var e,i=this.files,o=[],s=0,r=i.length;s<r;s++)(e=i[s]).status===t&&o.push(e);return o},N.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(N.QUEUED)},N.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(N.UPLOADING)},N.prototype.getAddedFiles=function(){return this.getFilesWithStatus(N.ADDED)},N.prototype.getActiveFiles=function(){for(var t,e=this.files,i=[],o=0,s=e.length;o<s;o++)(t=e[o]).status!==N.UPLOADING&&t.status!==N.QUEUED||i.push(t);return i},N.prototype.init=function(){var t,i,s,e,o,r,l,n,a,u,p,d,c,m,h,g,v,f,y;for(this.element&&"form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element&&this.element.classList.contains("tildaupload")&&!this.element.querySelector(".tu-message")&&this.element.appendChild(N.createElement('<div class="tu-default tu-message"><span>'+this.options.dicts[this.options.locale].defaultMessage+"</span></div>")),n=this,(s=function(){n.hiddenFileInput&&n.hiddenFileInput.parentNode.removeChild(n.hiddenFileInput),n.hiddenFileInput=document.createElement("input"),n.hiddenFileInput.setAttribute("type","file"),(null==n.options.maxFiles||1<n.options.maxFiles)&&n.hiddenFileInput.setAttribute("multiple","multiple"),n.hiddenFileInput.className="tu-hidden-input",null!=n.options.acceptedFiles&&n.hiddenFileInput.setAttribute("accept",n.options.acceptedFiles),null!=n.options.capture&&n.hiddenFileInput.setAttribute("capture",n.options.capture),n.hiddenFileInput.style.visibility="hidden",n.hiddenFileInput.style.position="absolute",n.hiddenFileInput.style.top="0",n.hiddenFileInput.style.left="0",n.hiddenFileInput.style.height="0",n.hiddenFileInput.style.width="0";var t=null;return"string"==typeof n.options.hiddenInputContainer?t=document.querySelector(n.options.hiddenInputContainer):n.options.hiddenInputContainer&&null!=n.options.hiddenInputContainer.nodeType&&(t=n.options.hiddenInputContainer),(t=t||document.querySelector("body")).appendChild(n.hiddenFileInput),n.hiddenFileInput.addEventListener("change",function(){var t,e,i,o=n.hiddenFileInput.files;if(o.length)for(e=0,i=o.length;e<i;e++)t=o[e],n.addFile(t);return n.emit("addedfiles",o),s()})})(),this.URL=null!=(r=window.URL)?r:window.webkitURL,e=0,o=(l=this.events).length;e<o;e++)t=l[e],this.on(t,this.options[t]);return this.on("uploadprogress",(a=this,function(){return a.updateTotalUploadProgress()})),this.on("removedfile",(u=this,function(){return u.updateTotalUploadProgress()})),this.on("canceled",(p=this,function(t){return p.emit("complete",t)})),this.on("complete",(d=this,function(){if(0===d.getAddedFiles().length&&0===d.getUploadingFiles().length&&0===d.getQueuedFiles().length)return setTimeout(function(){return d.emit("queuecomplete")},0)})),i=function(t){return t.stopPropagation(),t.preventDefault?t.preventDefault():t.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(t){return f.emit("dragstart",t)},dragenter:function(t){return i(t),v.emit("dragenter",t)},dragover:function(t){var e;try{e=t.dataTransfer.effectAllowed}catch(t){console.log(t)}return t.dataTransfer.dropEffect="move"===e||"linkMove"===e?"move":"copy",i(t),g.emit("dragover",t)},dragleave:function(t){return h.emit("dragleave",t)},drop:function(t){return i(t),m.drop(t)},dragend:(c=m=h=g=v=f=this,function(t){return c.emit("dragend",t)})}}],0<this.clickableElements.length&&this.clickableElements.forEach((y=this,function(e){return y.listeners.push({element:e,events:{click:function(t){return e===y.element&&t.target!==y.element&&!N.elementInside(t.target,y.element.querySelector(".tu-message"))||y.hiddenFileInput.click(),!0}}})})),this.enable(),this.options.init.call(this)},N.prototype.enableAddDropZone=function(){if(this.options.additionalDropzone){"string"==typeof this.options.additionalDropzone&&(this.options.additionalDropzone=[this.options.additionalDropzone]);for(var t=0;t<this.options.additionalDropzone.length;t++){var e=this.options.additionalDropzone[t],e=N.getElement(e,"addDropZone");if(e){this.clickableElements=[e.querySelector(".tu-clickable")];function o(t){return t.stopPropagation(),t.preventDefault?t.preventDefault():t.returnValue=!1}var i,s,r,l,n,a,u,p,d={element:e,events:{dragstart:function(e){return function(t){return e.emit("dragstart",t)}}(this),dragenter:function(e){return function(t){return o(t),e.emit("dragenter",t)}}(this),dragover:function(i){return function(t){var e;try{e=t.dataTransfer.effectAllowed}catch(t){console.log(t)}return t.dataTransfer.dropEffect="move"===e||"linkMove"===e?"move":"copy",o(t),i.emit("dragover",t)}}(this),dragleave:function(e){return function(t){return e.emit("dragleave",t)}}(this),drop:function(e){return function(t){return o(t),e.drop(t)}}(this),dragend:function(e){return function(t){return e.emit("dragend",t)}}(this)}};for(this.listeners.push(d),e.querySelector(".tu-clickable")?(this.addClickableElements=[e.querySelector(".tu-clickable")],i={element:this.addClickableElements[0],events:{click:function(e){var i=e.addClickableElements[0];return function(t){return i===e.element&&t.target!==e.element&&!N.elementInside(t.target,e.element.querySelector(".tu-message"))||e.hiddenFileInput.click(),!0}}(this)}},this.listeners.push(i)):i=null,p=[],n=0,a=(u=i?[d,i]:[d]).length;n<a;n++)s=u[n],p.push(function(){var t=s.events,e=[];for(r in t)l=t[r],e.push(s.element.addEventListener(r,l,!1));return e}())}}}},N.prototype.destroy=function(){var t;return this.disable(),this.removeAllFiles(!0),null!=(t=this.hiddenFileInput)&&t.parentNode&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.tildaupload,N.instances.splice(N.instances.indexOf(this),1)},N.prototype.updateTotalUploadProgress=function(){var t,e,i,o,s,r=0,l=0;if(this.getActiveFiles().length){for(i=0,o=(s=this.getActiveFiles()).length;i<o;i++)r+=(t=s[i]).upload.bytesSent,l+=t.upload.total;e=100*r/l}else e=100;return this.emit("totaluploadprogress",e,l,r)},N.prototype._getParamName=function(t){return"function"==typeof this.options.paramName?this.options.paramName(t):""+this.options.paramName+(this.options.uploadMultiple?"["+t+"]":"")},N.prototype._renameFilename=function(t){return"function"!=typeof this.options.renameFilename?t:this.options.renameFilename(t)},N.prototype.getFallbackForm=function(){var t,e=this.getExistingFallback();return e||(e='<div class="tu-fallback">',this.options.dicts[this.options.locale].fallbackText&&(e+="<p>"+this.options.dicts[this.options.locale].fallbackText+"</p>"),e+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',e=N.createElement(e),"FORM"!==this.element.tagName?(t=N.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>')).appendChild(e):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=t?t:e)},N.prototype.getExistingFallback=function(){for(var t,e=function(t){for(var e,i=0,o=t.length;i<o;i++)if(e=t[i],/(^| )fallback($| )/.test(e.className))return e},i=["div","form"],o=0,s=i.length;o<s;o++)if(t=e(this.element.getElementsByTagName(i[o])))return t},N.prototype.setupEventListeners=function(){for(var i,o,s,t=this.listeners,e=[],r=0,l=t.length;r<l;r++)i=t[r],e.push(function(){var t=i.events,e=[];for(o in t)s=t[o],null!==i.element&&e.push(i.element.addEventListener(o,s,!1));return e}());return e},N.prototype.removeEventListeners=function(){for(var i,o,s,t=this.listeners,e=[],r=0,l=t.length;r<l;r++)i=t[r],e.push(function(){var t=i.events,e=[];for(o in t)s=t[o],e.push(i.element.removeEventListener(o,s,!1));return e}());return e},N.prototype.disable=function(){var t,e,i,o,s;for(this.clickableElements.forEach(function(t){return t.classList.remove("tu-clickable")}),this.removeEventListeners(),s=[],e=0,i=(o=this.files).length;e<i;e++)t=o[e],s.push(this.cancelUpload(t));return s},N.prototype.enable=function(){return this.clickableElements.forEach(function(t){if(null!==t)return t.classList.add("tu-clickable")}),this.setupEventListeners()},N.prototype.filesize=function(t){var e,i,o,s,r,l=0,n="b";if(0<t){for(e=s=0,r=(o=["TB","GB","MB","KB","b"]).length;s<r;e=++s)if(i=o[e],Math.pow(this.options.filesizeBase,4-e)/10<=t){l=t/Math.pow(this.options.filesizeBase,4-e),n=i;break}return"<strong>"+(l=Math.round(10*l)/10)+"</strong> "+n}return""},N.prototype.sizeUploadedFiles=function(){var t,e=0,i="";if(this.files&&0<this.files.length){for(t=0;t<this.files.length;t++)e+=this.files[t].size;if(1024<e&&(i="Kb",1024<(e=parseFloat(e/1024)))&&(e=parseFloat(e/1024),i="Mb"),0<e)return"<strong>"+(e=(e=""+e).substring(0,4))+"</strong> "+i}return""},N.prototype._updateMaxFilesReachedClass=function(){return this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles&&0<this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element&&this.element.classList.add("tu-max-files-reached")):this.element&&this.element.classList.remove("tu-max-files-reached")},N.prototype.drop=function(t){var e,i,o,s;if(t.dataTransfer)if(this.emit("drop",t),e=t.dataTransfer.files,this.emit("addedfiles",e),e.length)(i=t.dataTransfer.items)&&i.length&&null!=i[0].webkitGetAsEntry?this._addFilesFromItems(i):this.handleFiles(e);else if(t.dataTransfer.types&&0<t.dataTransfer.types.length)for(o in t.dataTransfer.types)if((0<(s=t.dataTransfer.types[o]).indexOf("url")||0<s.indexOf("uri-"))&&""<(s=t.dataTransfer.getData(s))){this._addFilesFromItems([{url:s}]);break}},N.prototype.paste=function(t){var e;if(null!=(null!=t&&null!=(e=t.clipboardData)?e.items:void 0))return this.emit("paste",t),(e=t.clipboardData.items).length?this._addFilesFromItems(e):void 0},N.prototype.handleFiles=function(t){for(var e,i=[],o=0,s=t.length;o<s;o++)e=t[o],i.push(this.addFile(e));return i},N.prototype._addFilesFromItems=function(t){for(var e,i,o=[],s=0,r=t.length;s<r;s++)null!=(i=t[s]).webkitGetAsEntry&&(e=i.webkitGetAsEntry())?e.isFile?o.push(this.addFile(i.getAsFile())):e.isDirectory?o.push(this._addFilesFromDirectory(e,e.name)):o.push(void 0):null!=i.getAsFile?null==i.kind||"file"===i.kind?o.push(this.addFile(i.getAsFile())):o.push(void 0):""<i.url?this.uploadFileFromURL(i.url):o.push(void 0);return o},N.prototype._addFilesFromDirectory=function(t,s){var r,l,e=t.createReader(),i=function(t){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log(t):void 0};return l=this,(r=function(){return e.readEntries(function(t){var e,i,o;if(0<t.length){for(i=0,o=t.length;i<o;i++)(e=t[i]).isFile?e.file(function(t){if(!l.options.ignoreHiddenFiles||"."!==t.name.substring(0,1))return t.fullPath=s+"/"+t.name,l.addFile(t)}):e.isDirectory&&l._addFilesFromDirectory(e,s+"/"+e.name);r()}return null},i)})()},N.prototype.accept=function(t,e){return N.getUploaderSettings(this.element).isVideo&&(this.options.maxFilesize=5),t.size>1024*this.options.maxFilesize*1024?e(this.options.dicts[this.options.locale].fileTooBig.replace("{{filesize}}",Math.round(t.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):N.isValidFile(t,this.options.acceptedFiles)?this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles&&0<this.options.maxFiles?(e(this.options.dicts[this.options.locale].maxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",t)):this.options.accept.call(this,t,e):e(this.options.dicts[this.options.locale].invalidFileType)},N.prototype.addFile=function(e){return e.upload={progress:0,total:e.size,bytesSent:0},this.files.push(e),e.status=N.ADDED,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,(i=this,function(t){return t?(e.accepted=!1,i._errorProcessing([e],t)):(e.accepted=!0,i.options.autoQueue&&i.enqueueFile(e)),i._updateMaxFilesReachedClass()}));var i},N.prototype.enqueueFiles=function(t){for(var e,i=0,o=t.length;i<o;i++)e=t[i],this.enqueueFile(e);return null},N.prototype.enqueueFile=function(t){if(t.status!==N.ADDED||!0!==t.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(t.status=N.QUEUED,this.options.autoProcessQueue)return setTimeout((e=this,function(){return e.processQueue()}),0);var e},N.prototype._thumbnailQueue=[],N.prototype._processingThumbnail=!1,N.prototype._enqueueThumbnail=function(t){if(this.options.createImageThumbnails&&t.type.match(/image.*/)&&t.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(t),setTimeout((e=this,function(){return e._processThumbnailQueue()}),0);var e},N.prototype._processThumbnailQueue=function(){var t;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length)return this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),(t=this,function(){return t._processingThumbnail=!1,t._processThumbnailQueue()}))},N.prototype.removeFile=function(t){if(t.status===N.UPLOADING&&this.cancelUpload(t),this.files=a(this.files,t),this.emit("removedfile",t),0===this.files.length)return this.emit("reset");this.checkErrorFiles()},N.prototype.checkErrorFiles=function(){var t;this.files.some(t=>t.status===N.SUCCESS)?(t=(t=this.options.originalelement)?t.getAttribute("id"):"",(t=document.getElementById(t+"-previews"))&&t.classList.remove("tu-popup-progressbar-error"),this.enableUploadAllBtn()):this.disableUploadAllBtn()},N.prototype.removeAllFiles=function(t){var e,i,o,s;for(null==t&&(t=!1),i=0,o=(s=this.files.slice()).length;i<o;i++)(e=s[i]).status===N.UPLOADING&&!t||(e.previewElement&&-1<e.previewElement.className.indexOf("tu-popup-progressbar-container")&&(e.previewElement=!1),this.removeFile(e));return null},N.prototype.createThumbnail=function(t,e){var i,o=new FileReader;return o.onload=(i=this,function(){if("image/svg+xml"!==t.type)return i.createThumbnailFromUrl(t,o.result,e);i.emit("thumbnail",t,o.result),null!=e&&e()}),o.readAsDataURL(t)},N.prototype.createThumbnailFromUrl=function(o,t,s,e){var r,l=document.createElement("img");return e&&(l.crossOrigin=e),l.onload=(r=this,function(){var t,e,i;if(o.width=l.width,o.height=l.height,null==(e=r.options.resize.call(r,o)).trgWidth&&(e.trgWidth=e.optWidth),null==e.trgHeight&&(e.trgHeight=e.optHeight),i=(t=document.createElement("canvas")).getContext("2d"),t.width=e.trgWidth,t.height=e.trgHeight,n(i,l,null!=(i=e.srcX)?i:0,null!=(i=e.srcY)?i:0,e.srcWidth,e.srcHeight,null!=(i=e.trgX)?i:0,null!=(i=e.trgY)?i:0,e.trgWidth,e.trgHeight),i=t.toDataURL("image/png"),r.emit("thumbnail",o,i),null!=s)return s()}),null!=s&&(l.onerror=s),l.src=t},N.prototype.processQueue=function(){var t,e=this.options.parallelUploads,i=this.getUploadingFiles().length,o=i;if(!(e<=i)&&0<(t=this.getQueuedFiles()).length){if(this.options.uploadMultiple)return this.processFiles(t.slice(0,e-i));for(;o<e;){if(!t.length)return;this.processFile(t.shift()),o++}}},N.prototype.processFile=function(t){return this.processFiles([t])},N.prototype.processFiles=function(t){for(var e,i=0,o=t.length;i<o;i++)(e=t[i]).processing=!0,e.status=N.UPLOADING,this.emit("processing",e);return this.options.uploadMultiple&&this.emit("processingmultiple",t),this.uploadFiles(t)},N.prototype._getFilesWithXhr=function(s){var r;return function(){for(var t=this.files,e=[],i=0,o=t.length;i<o;i++)(r=t[i]).xhr===s&&e.push(r);return e}.call(this)},N.prototype.cancelUpload=function(t){var e,i,o,s,r,l,n;if(t.status===N.UPLOADING){for(o=0,r=(i=this._getFilesWithXhr(t.xhr)).length;o<r;o++)(e=i[o]).status=N.CANCELED;for(t.xhr.abort(),s=0,l=i.length;s<l;s++)e=i[s],this.emit("canceled",e);this.options.uploadMultiple&&this.emit("canceledmultiple",i)}else(n=t.status)!==N.ADDED&&n!==N.QUEUED||(t.status=N.CANCELED,this.emit("canceled",t),this.options.uploadMultiple&&this.emit("canceledmultiple",[t]));if(this.options.autoProcessQueue)return this.processQueue()},W=function(){var t=arguments[0],e=2<=arguments.length?u.call(arguments,1):[];return"function"==typeof t?t.apply(this,e):t},N.prototype.uploadFile=function(t){return this.uploadFiles([t])},N.prototype.uploadFiles=function(p){for(var d,t,i,e,o,s,r,l,n,a,u,c,m,h,g,v,f,y,b,w,E,L,U,T,C,F,k=new XMLHttpRequest,A=0,I=p.length;A<I;A++)(d=p[A]).xhr=k;var S,_,x,M=W(this.options.method,p),q="";for(e in this.element&&0<this.element.getAttribute("data-tu-max-width")&&(B=parseInt(this.element.getAttribute("data-tu-max-width"),10),"y"===window.Tildaupload_BIG&&(B*=1.5),q+="&maxwidth="+B),this.element&&0<this.element.getAttribute("data-tu-max-height")&&(B=parseInt(this.element.getAttribute("data-tu-max-height"),10),"y"===window.Tildaupload_BIG&&(B*=1.5),q+="&maxheight="+B),this.element&&this.element.getAttribute("data-tu-cover")&&""!=this.element.getAttribute("data-tu-cover")&&(q+="&crop="+this.element.getAttribute("data-tu-cover")),B=W(this.options.url,p),k.open(M,B+q,!0),k.withCredentials=!!this.options.withCredentials,c=null,i=function(){for(var t=[],e=0,i=p.length;e<i;e++)d=p[e],0==k.status?t.push(S._errorProcessing(p,c||S.options.dicts[S.options.locale].bigFileError,k)):t.push(S._errorProcessing(p,c||S.options.dicts[S.options.locale].responseError.replace("{{statusCode}}",k.status),k));return t},_=S=this,m=function(t){var e,i,o,s,r,l,n,a,u;if(null!=t)for(i=100*t.loaded/t.total,o=0,l=p.length;o<l;o++)(d=p[o]).upload={progress:i,total:t.total,bytesSent:t.loaded};else{for(e=!0,i=100,s=0,n=p.length;s<n;s++)100===(d=p[s]).upload.progress&&d.upload.bytesSent===d.upload.total||(e=!1),d.upload.progress=i,d.upload.bytesSent=d.upload.total;if(e)return}for(u=[],r=0,a=p.length;r<a;r++)d=p[r],u.push(_.emit("uploadprogress",d,i,d.upload.bytesSent));return u},k.onload=(x=this,function(e){var t;if(p[0].status!==N.CANCELED&&4===k.readyState){if(c=k.responseText,k.getResponseHeader("content-type")&&~k.getResponseHeader("content-type").indexOf("application/json"))try{c=JSON.parse(c)}catch(t){e=t,c="Invalid JSON response from server."}return m(),200<=(t=k.status)&&t<300?x._finished(p,c,e):i()}}),k.onerror=function(){if(p[0].status!==N.CANCELED)return i()},(null!=(M=k.upload)?M:k).onprogress=m,s={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&D(s,this.options.headers),s)(o=s[e])&&k.setRequestHeader(e,o);t=new FormData,window.Tildaupload_PUBLICKEY&&t.append("publickey",window.Tildaupload_PUBLICKEY);var B=N.getUploaderSettings(this.originalelement);if(t.append("uploadkey",B.uploadKey),"y"===window.Tildaupload_BIG&&t.append("big","y"),this.options.params)for(a in L=this.options.params)h=L[a],t.append(a,h);for(g=0,y=p.length;g<y;g++)d=p[g],this.emit("sending",d,k,t);if(this.options.uploadMultiple&&this.emit("sendingmultiple",p,k,t),this.element&&"FORM"===this.element.tagName)for(v=0,b=(U=this.element.querySelectorAll("input, textarea, select, button")).length;v<b;v++)if(n=(l=U[v]).getAttribute("name"),C=l.getAttribute("type"),"SELECT"===l.tagName&&l.hasAttribute("multiple"))for(f=0,w=(T=l.options).length;f<w;f++)(u=T[f]).selected&&t.append(n,u.value);else(!C||"checkbox"!==(C=C.toLowerCase())&&"radio"!==C||l.checked)&&t.append(n,l.value);for(r=E=0,F=p.length-1;0<=F?E<=F:F<=E;r=0<=F?++E:--E)t.append(this._getParamName(r),p[r],this._renameFilename(p[r].name));return this.submitRequest(k,t,p)},N.prototype.submitRequest=function(t,e){return t.send(e)},N.prototype._finished=function(t,e,i){for(var o,s,r,l,n,a=0,u=0,p=t.length;u<p;u++){if(o=t[u],r="",e&&e.errorExists&&e.result&&0<e.errorExists)for(s=0;s<e.result.length;s++){if(r=e.result[s],o.name==r.originalUrl||null==o.name&&"blob"==r.originalUrl){o.tuInfo=e.result[s];break}r=""}r&&r.error?(o.status=N.ERROR,this.emit("error",o,r.error,i),a=1):(o.status=N.SUCCESS,this.emit("success",o,e,i)),this.emit("complete",o)}if(this.options.uploadMultiple&&(l=t[0],n=(n=this.options.originalelement)?n.getAttribute("id"):"",n=window["tu_"+n+"_last_file"],l&&n&&l.name===n.name&&this.enableUploadAllBtn(),a?this.emit("errormultiple",t,e,i):this.emit("successmultiple",t,e,i),this.emit("completemultiple",t)),this.checkErrorFiles(),this.options.autoProcessQueue)return this.processQueue()},N.prototype.enableUploadAllBtn=function(){var t=document.querySelector(".tu-js-selected");t&&(t.style.opacity="1",t.style.pointerEvents="inherit")},N.prototype.disableUploadAllBtn=function(){var t=document.querySelector(".tu-js-selected");t&&(t.style.opacity="0.5",t.style.pointerEvents="none")},N.prototype._errorProcessing=function(t,e,i){for(var o,s=0,r=t.length;s<r;s++)(o=t[s]).status=N.ERROR,this.emit("error",o,e,i),this.emit("complete",o);if(this.options.uploadMultiple&&(this.emit("errormultiple",t,e,i),this.emit("completemultiple",t)),this.options.autoProcessQueue)return this.processQueue()},N.prototype.uploadFileFromURL=function(u){var t=this.originalelement,p=(t=t||this.element)?t.getAttribute("id"):"",d=this,t=u.split("\n"),e="image/*",t={url:u=t&&1<t.length?t[0]:u,name:u,size:""},t=(t.upload={progress:0,total:t.size,bytesSent:0},d.files.push(t),t.status=N.ADDED,d.emit("addedfile",t),""),e=this.element&&(0<this.element.getAttribute("data-tu-max-width")&&(t+="&maxwidth="+parseInt(this.element.getAttribute("data-tu-max-width"))),0<this.element.getAttribute("data-tu-max-height")&&(t+="&maxheight="+parseInt(this.element.getAttribute("data-tu-max-height"))),this.element.getAttribute("data-tu-cover")&&""!=this.element.getAttribute("data-tu-cover")&&(t+="&crop="+this.element.getAttribute("data-tu-cover")),"no"==this.element.getAttribute("data-tu-is-image"))?""<this.element.getAttribute("data-tu-accepted-files")?this.element.getAttribute("data-tu-accepted-files"):"no":"image/*",i={url:u,publickey:Tildaupload_PUBLICKEY,uploadkey:Tildaupload_UPLOADKEY,acceptedFiles:e};if("object"==typeof TUWidget.params&&null!==TUWidget.params)for(var o in TUWidget.params){var s=TUWidget.params[o];s&&(i[o]=s)}var r="";for(o in i)""!==r&&(r+="&"),r+=encodeURIComponent(o)+"="+encodeURIComponent(i[o]);e=document.getElementById(p+"-previews"),e&&(e.style.display="inline-block",e.classList.remove("tu-popup-progressbar-error"),e.classList.remove("tu-popup-progressbar-completed"),e.classList.remove("tu-popup-progressbar-uploaded"),e.classList.remove("tu-popup-progressbar-start")),TUWidget.hideUploader(),e=new XMLHttpRequest;function l(t,e){console.log("Upload script error: "+e),td__showBubbleNotice("Upload script error: "+e,3e4,"error");e=window["tu_"+p];null!=e&&void 0!==e&&e.onUserFail&&!e.options.uploadMultiple&&e.onUserFail.call(e,u,t)}e.open("POST",this.options.url+t,!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),e.timeout=2e4,e.responseType="text",e.addEventListener("loadend",function(){if(200<=this.status&&this.status<400){var t=this.response,e=(t&&"string"==typeof t&&"{"==t.substring(0,1)?t=JSON.parse(t):console.log(t),document.getElementById(p)),i=d;if(t&&t.result&&""<t.result[0].cdnUrl)d._finished(d.files,t);else{var i=window["tu_"+p],o=document.getElementById(p+"-previews");if(o){o.classList.remove("tu-popup-progressbar-completed"),o.classList.remove("tu-popup-progressbar-success"),o.classList.remove("tu-popup-progressbar-start"),o.classList.add("tu-popup-progressbar-error");var s="",r="Upload error";if(t&&t.result&&t.result[0]){var l,n=t.result.length-1;for(l in t.result)t.result[l].error&&""<t.result[l].error&&(s+=t.result[l].error,l!==n)&&(s+="<br>")}r=25<(s=""==s?"Upload only image files":s).length?s.substring(0,23)+"...":s;var a=o.querySelector(".tu-popup-progressbar-error-title");a&&(a.innerHTML=r),o.querySelector(".tu-popup-progressbar-error-text").innerHTML=s,window.setTimeout(function(){o.classList.remove("tu-popup-progressbar-error"),o.classList.add("tu-popup-progressbar-start")},5e3)}else{a=document.getElementById(p+"-progress");a&&(N.setPositionForProgressLine(e),a.style.backgroundColor="#ff2222")}null!=i&&void 0!==i&&i.onUserFail&&!i.options.uploadMultiple&&i.onUserFail.call(i,u,t)}}}),e.addEventListener("timeout",function(){td__showBubbleNotice("Request timeout (loading image). Please reload the page and try again.",3e4,"error"),l(this,"timeout")}),e.addEventListener("abort",function(){l.call(this,"abort")}),e.addEventListener("error",function(){l.call(this,"error")}),e.upload&&e.upload.addEventListener("progress",function(t){var e;t.lengthComputable&&(e=Math.ceil(t.loaded/t.total*100),d.emit("progress",e,t.loaded))},!1),e.send(r)},N.prototype.done=function(t){return this.onUserDone=t,this},N.prototype.fail=function(t){return this.onUserFail=t,this},N.prototype.progress=function(t){return this.onUserProgress=t,this},N}()).version="4.3.0",l.options={},l.optionsForElement=function(t){if(t.getAttribute("id"))return l.options[e(t.getAttribute("id"))]},l.instances=[],l.forElement=function(t){if(null==(null!=(t="string"==typeof t?document.querySelector(t):t)?t.tildaupload:void 0))throw new Error("No Tildaupload found for given element. This is probably because you're trying to access it before Tildaupload had the time to initialize. Use the `init` option to setup any additional observers on your Tildaupload.");return t.tildaupload},l.autoDiscover=!0,l.discover=function(){var t,e,r,i,o,s;for(document.querySelectorAll?r=document.querySelectorAll(".tildaupload"):(r=[],(t=function(t){for(var e,i=[],o=0,s=t.length;o<s;o++)e=t[o],/(^| )tildaupload($| )/.test(e.className)?i.push(r.push(e)):i.push(void 0);return i})(document.getElementsByTagName("div")),t(document.getElementsByTagName("form"))),s=[],i=0,o=r.length;i<o;i++)e=r[i],!1!==l.optionsForElement(e)?s.push(new l(e)):s.push(void 0);return s},l.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],l.isBrowserSupported=function(){var t,e,i,o=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(t=0,e=(i=l.blacklistedBrowsers).length;t<e;t++)i[t].test(navigator.userAgent)&&(o=!1);else o=!1;else o=!1;return o},a=function(t,e){for(var i,o=[],s=0,r=t.length;s<r;s++)(i=t[s])!==e&&o.push(i);return o},e=function(t){return t.replace(/[-_](\w)/g,function(t){return t.charAt(1).toUpperCase()})},l.createElement=function(t){var e=document.createElement("div");return e.innerHTML=t,e.childNodes[0]},l.elementInside=function(t,e){if(t===e)return!0;for(;t=t.parentNode;)if(t===e)return!0;return!1},l.addClass=function(t,e){var i;"string"==typeof t?i=document.querySelector(t):null!=t.nodeType&&(i=t),i&&(i.classList?i.classList.add(e):-1<i.className.indexOf(e)&&(i.className+=e))},l.setPositionForProgressLine=function(t){var e,i,o,s,r;return(t=t&&Object.getPrototypeOf(t).jquery?t[0]:t)?(t.offsetLeft,e=t.offsetTop,i={left:t.getBoundingClientRect().left+window.scrollX,top:t.getBoundingClientRect().top+window.scrollY},"y"===window.$is_email&&(i.left=0),o=t.getAttribute("id"),o=document.getElementById(o+"-progress"),r=parseInt(t.style.paddingLeft)||0,s=parseInt(t.style.paddingRight)||0,r=t.clientWidth-(r+s),o&&(""<t.getAttribute("bgimgfield")||t.classList.contains("tn-atom__img")||(o.style.top=e+t.getBoundingClientRect().height+"px",o.style.left=i.left+"px"),o.style.width=r+"px"),t):""},l.removeClass=function(t,e){var i;"string"==typeof t?i=document.querySelector(t):null!=t.nodeType&&(i=t),i&&(i.classList?i.classList.remove(e):i.className=i.className.replace("/\b"+e+"/g",""))},l.getElement=function(t,e){var i;if("string"==typeof t?i=document.querySelector(t):null!=t.nodeType&&(i=t),null!=i)return i;if("[data-tu-uploadprogress]"===t)return"";throw new Error("Invalid `"+e+"` option provided. Element is `"+t+"`, typeof is `"+typeof t+"`. Please provide a CSS selector or a plain HTML element.")},l.getElements=function(t,e){var i,o,s,r,l,n,a;if(t instanceof Array){o=[];try{for(s=0,l=t.length;s<l;s++)i=t[s],o.push(this.getElement(i,e))}catch(t){o=null}}else if("string"==typeof t)for(o=[],r=0,n=(a=document.querySelectorAll(t)).length;r<n;r++)i=a[r],o.push(i);else null!=t.nodeType&&(o=[t]);if(null!=o&&o.length)return o;throw new Error("Invalid `"+e+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.")},l.confirm=function(t,e,i){return window.confirm(t)?e():null!=i?i():void 0},l.isValidFile=function(t,e){var i,o,s,r,l;if(!e)return!0;for(e=e.split(","),i=(o=t.type).replace(/\/.*$/,""),r=0,l=e.length;r<l;r++)if("."===(s=(s=e[r]).trim()).charAt(0)){if(-1!==t.name.toLowerCase().indexOf(s.toLowerCase(),t.name.length-s.length))return!0}else if(/\/\*$/.test(s)){if(i===s.replace(/\/.*$/,""))return!0}else if(o===s)return!0;return!1},l.getAcceptedFilesType=function(t){var e="yes"===t.getAttribute("data-tu-is-video"),i=t.getAttribute("data-tu-accepted-files");return e?i||"video/*":!("no"!==t.getAttribute("data-tu-is-image"))&&i?i:"image/*"},l.getUploaderSettings=function(t){var e="yes"===t.getAttribute("data-tu-is-video");return{isVideo:e,url:e?Tildavideoupload_URL:TUWidget.urlUploadAPI,uploadKey:e?Tildavideoupload_UPLOADKEY:Tildaupload_UPLOADKEY,acceptedFiles:l.getAcceptedFilesType(t)}},l.animate=function(o,s,t,r){var e,i,l,n,a="slow"==t?500:"fast"==t?17:0<t?t:100;for(n in s)void 0!==o.style[n]&&(s[n].start||(s[n].start=0),s[n].start<s[n].end?s[n].step=Math.abs(s[n].step):s[n].step=-Math.abs(s[n].step),o.style[n]=s[n].start,e=(i=""+s[n].start).length,"px"==(i=i.substring(e-2))?s[n].unit="px":"pt"==i?s[n].unit="pt":"%"==i.substring(1)?s[n].unit="%":s[n].unit="");!function t(){var e,i=!0;for(e in s)void 0!==o.style[e]&&(s[e].start<s[e].end&&o.style[e]<s[e].end||s[e].start>s[e].end&&o.style[e]>s[e].end)&&(l=0<s[e].step&&s[e].step<1?parseFloat(o.style[e])+parseFloat(s[e].step):parseInt(o.style[e])+parseInt(s[e].step),o.style[e]=l+s[e].unit,i=!1);i?"function"==typeof r&&r(o):setTimeout(function(){window.reqAnimationFrame(t)},a)}()},"function"==typeof window.jQuery&&(window.jQuery.fn.tildaupload=function(t){return this.each(function(){return new l(this,t)})}),"undefined"!=typeof module&&null!==module?module.exports=l:window.Tildaupload=l,l.ADDED="added",l.QUEUED="queued",l.ACCEPTED=l.QUEUED,l.UPLOADING="uploading",l.PROCESSING=l.UPLOADING,l.CANCELED="canceled",l.ERROR="error",l.SUCCESS="success",d=function(t){var e,i,o,s,r=t.naturalHeight,l=document.createElement("canvas");for(l.width=1,l.height=r,(l=l.getContext("2d")).drawImage(t,0,0),e=l.getImageData(0,0,1,r).data,s=0,o=i=r;s<o;)0===e[4*(o-1)+3]?i=o:s=o,o=i+s>>1;return 0==(t=o/r)?1:t},n=function(t,e,i,o,s,r,l,n,a,u){var p=d(e);return t.drawImage(e,i,o,s,r,l,n,a,u/p)},t=function(e,i){var o=!1,t=!0,s=e.document,r=s.documentElement,l=s.addEventListener?"addEventListener":"attachEvent",n=s.addEventListener?"removeEventListener":"detachEvent",a=s.addEventListener?"":"on",u=function(t){if("readystatechange"!==t.type||"complete"===s.readyState)return("load"===t.type?e:s)[n](a+t.type,u,!1),!o&&(o=!0)?i.call(e,t.type||t):void 0},p=function(){try{r.doScroll("left")}catch(t){return void setTimeout(p,50)}return u("poll")};if("complete"!==s.readyState){if(s.createEventObject&&r.doScroll){try{t=!e.frameElement}catch(t){console.log(t)}t&&p()}return s[l](a+"DOMContentLoaded",u,!1),s[l](a+"readystatechange",u,!1),e[l](a+"load",u,!1)}},l._autoDiscoverFunction=function(){if(l.autoDiscover)return l.discover()},t(window,l._autoDiscoverFunction)}.call(this),"https://upload.tildacdn.com/api/upload/"),Tildavideoupload_URL="https://videoupload.tildaapi.com/api/upload/";function tu_onReady(t){"loading"!==document.readyState?t():document.addEventListener("DOMContentLoaded",t)}TUWidget={urlUploadAPI:Tildaupload_URL,locale:"EN",dicts:{EN:{defaultMessage:"Drop files here to upload",fallbackMessage:"Your browser does not support drag'n'drop file uploads.",fallbackText:"Please use the fallback form below to upload your files like in the olden days.",fileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",invalidFileType:"You can't upload files of this type.",responseError:"Server responded with {{statusCode}} code.",cancelUpload:"Cancel upload",cancelUploadConfirmation:"Are you sure you want to cancel this upload?",removeFile:"Remove file",removeFileConfirmation:null,removeAll:"Remove All",browseFiles:"Browse files",fileFromTheWeb:"File from the web",maxFilesExceeded:"You can not upload any more files.",buttonUploadLink:"Upload",buttonUpload:"Upload file",buttonUploads:"Upload files",buttonUploadImage:"Upload image",buttonUploadImages:"Upload images",backToLocalUpload:"Back to local upload",uploadToLink:"Upload from URL",uploadToPaste:"Paste",attentionToLink:"Grab any file off the web. Just provide the link",pasteLink:"Paste your link here",uploading:"Uploading...",uploadSelected:"Upload selected",selected:"You've selected {cnt} files",settings:{big:"Enable 1920px wide image uploading",attentionToBig:"By default, images are resized to 1680px. Wider images increase page load time and negatively affect SEO, conversion rates, and user experience"},uploadCanceled:"Upload canceled",videoSize:"Upload video (up to 5 MB)"},RU:{defaultMessage:"Бросьте файл сюда для загрузки",fallbackMessage:"Ваш браузер не поддерживает drag'n'drop",fallbackText:"Please use the fallback form below to upload your files like in the olden days",fileTooBig:"Файл слишком большой ({{filesize}}MiB). Максимальный размер: {{maxFilesize}}MiB",invalidFileType:"Вы не можете загрузить файл этого типа",responseError:"Сервер получил ответ {{statusCode}} код.",cancelUpload:"Отмена загрузки",cancelUploadConfirmation:"Вы действительно хотите отменить загрузку?",removeFile:"Удалить файл",removeFileConfirmation:null,removeAll:"Удалить все",browseFiles:"Посмотреть файлы",maxFilesExceeded:"Вы не можете больше загружать файлы",fileFromTheWeb:"Файл по ссылке",buttonUploadLink:"Загрузить",buttonUpload:"Загрузить файл",buttonUploads:"Загрузить файлы",buttonUploadImage:"Загрузить изображение",buttonUploadImages:"Загрузить изображения",uploadToLink:"Загрузка по ссылке",uploadToPaste:"Вставить",backToLocalUpload:"Вернуться к загрузке файлов с компьютера",attentionToLink:"Загрузите любой файл из сети. Просто укажите ссылку",pasteLink:"Вставьте ссылку сюда",uploading:"Загрузка...",uploadSelected:"Загрузить выбранное",selected:"Вы выбрали {cnt}",settings:{big:"Разрешить загрузку до 1920px",attentionToBig:"По умолчанию загруженные изображения сжимаются до 1680px. При использовании опции страницы могут загружаться медленнее, что может негативно повлиять на SEO, конверсию и опыт использования сайта"},uploadCanceled:"Загрузка отменена",videoSize:"Загрузить видео (до 5 MB)"}},settings:{big:""}},tu_onReady(function(){var t=document.body.getAttribute("data-lang")||window.lang,e=(TUWidget.locale="RU"==t?"RU":"EN",document.querySelector("[data-tu-ondrag-hide=yes]"));e&&Array.prototype.forEach.call(["dragstart","dragenter","dragover"],function(t){e.addEventListener(t,function(){var t="none"===window.getComputedStyle(void 0).display;t&&(t=window.getComputedStyle(t).display,e.setAttribute("data-tu-old-display",t),e.style.display="none")})})});var isTildaUploudBig=document.cookie.split(";").some(function(t){return 0<=t.trim().indexOf("Tildaupload_BIG=y")});function fadeIn(t,e,i){if(("1"===getComputedStyle(t).opacity||""===getComputedStyle(t).opacity)&&"none"!==getComputedStyle(t).display)return!1;var o=0,e=0<(e=parseInt(e))?e/10:40,s=(t.style.opacity=o,t.style.display="block",setInterval(function(){t.style.opacity=o,1<=(o+=.1)&&(clearInterval(s),"function"==typeof i)&&i()},e))}function fadeOut(t,e,i){e=parseInt(e);var o=10,s=setInterval(function(){--o,t.style.opacity=10===o?1:"0."+o,0===o&&(clearInterval(s),t.style.display="none",t.style.removeProperty("opacity"),"function"==typeof i)&&i()},0<e?e/10:40)}function removeAllEventListeners(t){var e;if(t)return e=t.cloneNode(!0),t.replaceWith(e),e}isTildaUploudBig?(window.Tildaupload_BIG="y",TUWidget.settings.big="checked"):(window.Tildaupload_BIG="",TUWidget.settings.big=""),TUWidget.getPopupHTML=function(){return'<div class="tu-popup" id="tu-popup">\t<div class="tu-popup-container"> \t\t<div class="tu-popup-bg">\t\t\t<input type="text" value="" id="tu-hidden-input-paste" style="position:absolute; opacity:0;width:1px; height:1px;">\t\t</div>\t\t<div class="tu-popup-close">\t\t\t<div class="tu-popup-close-line tu-popup-close-line-first"></div>\t\t\t<div class="tu-popup-close-line tu-popup-close-line-second"></div>\t\t</div>\t\t<div class="tu-popup-wrapper">\t\t\t<div class="tu-popup-closer"></div>\t\t\t<div class="tu-popup-content" style="display: block;">\t\t\t\t<div class="tu-uploader-steps">\t\t\t\t\t\x3c!-- Muliple screen --\x3e\t\t\t\t\t<div class="tu-uploader-multiple">\t\t\t\t\t\t<div class="tu-uploader-multiple-header">\t\t\t\t\t\t\t<div class="tu-uploader-multiple-title"></div>\t\t\t\t\t\t\t<div class="tu-uploader-multiple-buttons">\t\t\t\t\t\t\t\t<div class="tu-uploader-multiple-btn tu-uploader-multiple-btn-gray tu-js-removeall">\t\t\t\t\t\t\t\t'+TUWidget.dicts[TUWidget.locale].removeAll+'\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t<div class="tu-uploader-multiple-btn tu-uploader-multiple-btn-orange tu-js-selected">\t\t\t\t\t\t\t\t'+TUWidget.dicts[TUWidget.locale].uploadSelected+'\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="tu-uploader-multiple-images">\t\t\t\t\t\t\t<div class="tu-uploader-multiple-img-item">\t\t\t\t\t\t\t\t<div class="tu-uploader-multiple-addmore-wrapper">\t\t\t\t\t\t\t\t\t<div class="tu-uploader-multiple-addmore-separator"></div>\t\t\t\t\t\t\t\t\t<div class="tu-uploader-multiple-addmore-plus">\t\t\t\t\t\t\t\t\t\t<div class="tu-uploader-multiple-addmore-plus-line tu-uploader-multiple-addmore-plus-line-first"></div>\t\t\t\t\t\t\t\t\t\t<div class="tu-uploader-multiple-addmore-plus-line tu-uploader-multiple-addmore-plus-line-second"></div>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t\t\x3c!-- uploader main screen --\x3e\t\t\t\t\t<div class="tu-uploader-wrapper">\t\t\t\t\t\t\x3c!-- settings --\x3e\t\t\t\t\t\t<div class="tu-uploader-settings">\t\t\t\t\t\t\t<div class="tu-uploader-settings__icon">\t\t\t\t\t\t\t\t<div class="tu-uploader-settings__hover">\t\t\t\t\t\t\t\t\t<div class="tu-uploader-settings__hover__icon"></div>\t\t\t\t\t\t\t\t\t<div class="tu-uploader-settings__menu">\t\t\t\t\t\t\t\t\t\t<div class="tu-uploader-settings__group">\t\t\t\t\t\t\t\t\t\t\t<div class="tu-uploader-settings__switch">\t\t\t\t\t\t\t\t\t\t\t\t<label class="tu-uploader-settings__big">\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="checkbox" name="big" value="y" '+TUWidget.settings.big+'>\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="slider round"></span>\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="switch-state">'+TUWidget.dicts[TUWidget.locale].settings.big+'</span>\t\t\t\t\t\t\t\t\t\t\t\t</label>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t<div class="tu-uploader-settings__group__descr">\t\t\t\t\t\t\t\t\t\t\t'+TUWidget.dicts[TUWidget.locale].settings.attentionToBig+'\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>\t\t\t\t\t\t\x3c!-- multiple --\x3e\t\t\t\t\t\t<div class="tu-uploader-multiple-nav">\t\t\t\t\t\t\t<div class="tu-uploader-multiple-nav-title">\t\t\t\t\t\t\t\t'+TUWidget.dicts[TUWidget.locale].defaultMessage+'\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t<div class="tu-uploader-multiple-nav-btn">\t\t\t\t\t\t\t\t'+TUWidget.dicts[TUWidget.locale].browseFiles+'\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>\t\t\t\t\t\t\x3c!-- /end multiple --\x3e\t\t\t\t\t\t<div class="tu-uploader-area"></div>\t\t\t\t\t\t<div class="tu-uploader-title tu-title-lg">\t\t\t\t\t\t\t'+TUWidget.dicts[TUWidget.locale].defaultMessage+'\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="tu-uploader-button-wrapper">\t\t\t\t\t\t\t<div class="tu-uploader-button tu-clickable">\t\t\t\t\t\t\t'+TUWidget.dicts[TUWidget.locale].buttonUpload+'\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="tu-uploader-link-wrapper">\t\t\t\t\t\t\t<div class="tu-uploader-link-img tu-uploader-link">\t\t\t\t\t\t\t\t<svg viewBox="0 0 14 14" height="14px" width="14px">\t\t\t\t\t\t\t\t\t<g fill-rule="evenodd" fill="none" stroke-width="1" stroke="none">\t\t\t\t\t\t\t\t\t\t<g fill="#CCCCCC" transform="translate(-311.000000, -503.000000)" sketch:type="MSLayerGroup">\t\t\t\t\t\t\t\t\t\t\t<g transform="translate(311.000000, 503.000000)">\t\t\t\t\t\t\t\t\t\t\t\t<path d="M9.63740351,6.15189474 C9.46621053,5.76726316 9.22624561,5.40522807 8.91063158,5.08961404 C8.59477193,4.77424561 8.23298246,4.53403509 7.84835088,4.36284211 L7.37185965,4.83933333 L7.04077193,5.17017544 L6.69715789,5.51378947 C6.63329825,5.57740351 6.57901754,5.64666667 6.53161404,5.71912281 C6.9877193,5.74884211 7.41459649,5.93280702 7.74077193,6.25922807 C8.0762807,6.59449123 8.25066667,7.0262807 8.27964912,7.46568421 C8.29610526,7.70982456 8.26589474,7.95445614 8.18754386,8.18901754 C8.10059649,8.44985965 7.96059649,8.6957193 7.75722807,8.90547368 C7.75084211,8.91161404 7.74715789,8.91922807 7.74126316,8.92536842 L7.35098246,9.31515789 L6.80964912,9.85649123 L6.30466667,10.3617193 L4.98842105,11.6779649 C4.6322807,12.0341053 4.15922807,12.2298596 3.65522807,12.2298596 C3.15221053,12.2298596 2.67817544,12.033614 2.32203509,11.6774737 C1.96638596,11.3218246 1.77038596,10.8482807 1.77038596,10.3447719 C1.77038596,9.84126316 1.96614035,9.36747368 2.3222807,9.01157895 L3.64049123,7.69312281 C3.56508772,7.45929825 3.51129825,7.22007018 3.47814035,6.97863158 C3.45357895,6.79859649 3.43687719,6.61757895 3.43614035,6.43607018 C3.43368421,6.10252632 3.47494737,5.76922807 3.55207018,5.44280702 L1.15242105,7.84221053 C-0.229157895,9.2242807 -0.229157895,11.4652632 1.15242105,12.8473333 C1.84357895,13.538 2.74915789,13.8838246 3.65473684,13.8838246 C4.56080702,13.8838246 5.46638596,13.5382456 6.15729825,12.8473333 L8.55326316,10.4513684 L8.91014035,10.0949825 C9.11424561,9.89063158 9.28470175,9.66564912 9.42838596,9.42936842 C9.65459649,9.05849123 9.80835088,8.65666667 9.88522807,8.24207018 C9.92477193,8.02887719 9.94589474,7.81298246 9.94589474,7.59659649 C9.94638596,7.3325614 9.91396491,7.06901754 9.85550877,6.81014035 C9.80540351,6.58540351 9.73270175,6.36508772 9.63740351,6.15189474 L9.63740351,6.15189474 Z" />\t\t\t\t\t\t\t\t\t\t\t\t<path d="M12.8473333,1.15291228 C12.1561754,0.462 11.2503509,0.116421053 10.3450175,0.116421053 C9.43894737,0.116666667 8.53336842,0.462 7.84245614,1.15315789 L5.44673684,3.54887719 L5.08985965,3.90575439 C4.88550877,4.11010526 4.71529825,4.33508772 4.57136842,4.57112281 C4.34540351,4.942 4.19140351,5.34382456 4.1142807,5.75842105 C4.07473684,5.97161404 4.05361404,6.18775439 4.05361404,6.40389474 C4.05336842,6.66792982 4.08554386,6.93147368 4.144,7.19059649 C4.19484211,7.41508772 4.26754386,7.63540351 4.36284211,7.84884211 C4.53403509,8.23322807 4.77375439,8.59501754 5.08961404,8.91063158 C5.40547368,9.22624561 5.76701754,9.46621053 6.15189474,9.63764912 L6.62814035,9.16140351 L6.95922807,8.8305614 L7.30259649,8.48719298 C7.36645614,8.42333333 7.42098246,8.35407018 7.46838596,8.28136842 C7.01203509,8.25164912 6.58515789,8.06792982 6.25873684,7.74126316 C5.92273684,7.40550877 5.74835088,6.97273684 5.71936842,6.53235088 C5.70364912,6.28894737 5.73435088,6.04554386 5.81221053,5.81147368 C5.89866667,5.55063158 6.03866667,5.30452632 6.24252632,5.09501754 C6.24866667,5.08887719 6.25259649,5.08150877 6.25873684,5.07512281 L6.64877193,4.68508772 L7.19035088,4.14375439 L7.69557895,3.63852632 L9.01157895,2.32277193 C9.3677193,1.96663158 9.84101754,1.77038596 10.3450175,1.77038596 C10.8485263,1.77038596 11.3220702,1.96663158 11.6777193,2.32252632 C12.4130877,3.05764912 12.4130877,4.25378947 11.6782105,4.98866667 L10.3595088,6.30712281 C10.4351579,6.54119298 10.4887018,6.78017544 10.5218596,7.02185965 C10.5466667,7.20189474 10.5631228,7.38291228 10.5638596,7.56417544 C10.5663158,7.89796491 10.5252982,8.23101754 10.4474386,8.5574386 L12.8473333,6.15803509 C14.2289123,4.77596491 14.2289123,2.53498246 12.8473333,1.15291228 L12.8473333,1.15291228 Z" />\t\t\t\t\t\t\t\t\t\t\t</g>\t\t\t\t\t\t\t\t\t\t</g>\t\t\t\t\t\t\t\t\t</g>\t\t\t\t\t\t\t\t</svg>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t<div class="tu-uploader-link">\t\t\t\t\t\t\t'+TUWidget.dicts[TUWidget.locale].uploadToLink+'\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t<div class="tu-uploader-paste" style="display:none;">\t\t\t\t\t\t\t'+TUWidget.dicts[TUWidget.locale].uploadToPaste+'\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t\t\x3c!-- uploader url screen --\x3e\t\t\t\t\t<div class="tu-uploaderurl-wrapper">\t\t\t\t\t\t<div class="tu-uploaderurl-title tu-title-lg">\t\t\t\t\t\t\t'+TUWidget.dicts[TUWidget.locale].fileFromTheWeb+'\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="tu-uploadurl-descr tu-descr-sm">\t\t\t\t\t\t\t'+TUWidget.dicts[TUWidget.locale].attentionToLink+'\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="tu-uploadurl-form">\t\t\t\t\t\t\t<div class="tu-uploadurl-blockinput">\t\t\t\t\t\t\t\t<input placeholder="'+TUWidget.dicts[TUWidget.locale].pasteLink+'" class="tu-uploadurl-input">\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t<div class="tu-uploadurl-blockbtn">\t\t\t\t\t\t\t\t<button class="tu-uploadurl-btn">\t\t\t\t\t\t\t\t'+TUWidget.dicts[TUWidget.locale].buttonUploadLink+'\t\t\t\t\t\t\t\t</button>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="tu-uploaderurl-link-wrapper">\t\t\t\t\t\t\t<div class="tu-uploaderurl-link-img">\t\t\t\t\t\t\t\t<svg viewBox="0 0 4 12" height="12px" width="4px">\t\t\t\t\t\t\t\t\t<g fill-rule="evenodd" fill="none" stroke-width="1" stroke="none">\t\t\t\t\t\t\t\t\t\t<g fill="#FC8665" transform="translate(2.000000, 6.000000) scale(1, -1) translate(-2.000000, -6.000000) ">\t\t\t\t\t\t\t\t\t\t\t<path d="M1.8545625,0.1845 L0.09675,3.19035937 C0.0405,3.28879687 0.085359375,3.375 0.197859375,3.375 L1.40639063,3.375 L1.40639063,12 L2.53139063,12 L2.53139063,3.375 L3.71348438,3.375 C3.82598438,3.375 3.88054688,3.28879687 3.81023438,3.19035937 L2.05242188,0.1845 C2.03132813,0.13528125 1.9996875,0.109828125 1.96453125,0.109828125 C1.92923438,0.109828125 1.88971875,0.13528125 1.8545625,0.1845 Z" />\t\t\t\t\t\t\t\t\t\t</g>\t\t\t\t\t\t\t\t\t</g>\t\t\t\t\t\t\t\t</svg>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t<div class="tu-uploaderurl-link">\t\t\t\t\t\t\t'+TUWidget.dicts[TUWidget.locale].backToLocalUpload+"\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t</div>\t\t</div>\t</div></div>"},TUWidget.showUploader=function(){fadeIn(document.getElementById("tu-popup"),200);var t=document.querySelector(".tu-popup-content");fadeIn(t,10,function(){t.classList.add("tu-popup-content-scale")})},TUWidget.hideUploader=function(t){var e=document.getElementById("tu-popup");if(!e)return!1;fadeOut(e,400),document.body.classList.remove("tu-opened"),document.body.classList.remove("t-body_popupshowed");var i=e.querySelector(".tu-popup-content"),i=(i&&i.classList.remove("tu-popup-content-scale"),window.tu_flag_widget_ui_focus=!1,e.getAttribute("tu-id")),o=window["tu_"+i],i=document.getElementById(i);void 0!==i&&(o.element=i),o.options.uploadMultiple&&0===o.getActiveFiles().length&&0<o.files.length&&!0!==t&&(i=document.getElementById(o.elementid+"-previews"))&&(i.classList.remove("tu-popup-progressbar-error"),i.classList.remove("tu-popup-progressbar-completed"),i.classList.remove("tu-popup-progressbar-uploaded"),i.classList.add("tu-popup-progressbar-start")),e.remove(),document.removeEventListener("paste",TUWidget.popupPasteHandler)},TUWidget.sortFiles=function(){var s,r,t,e=document.getElementById("tu-popup");e&&(t=e.getAttribute("tu-id"),(s=window["tu_"+t]).files)&&0<s.files.length&&(r=[],t=e.querySelectorAll(".tu-js-preview-item"),Array.prototype.forEach.call(t,function(t){for(var e=0,e=0;e<s.files.length;e++){var i=s.files[e],o=t.getAttribute("data-tu-url");if(i&&i.tuInfo&&o==i.tuInfo.cdnUrl){r.push(i);break}}}),s.files.length==r.length?s.files=r:console.log("Error in sort files"))},TUWidget.getPopup=function(){var t,o=document.getElementById("tu-popup");return o||(document.body.insertAdjacentHTML("beforeend",TUWidget.htmlPopup),t=(o=document.getElementById("tu-popup")).querySelectorAll(".tu-uploader-link"),Array.prototype.forEach.call(t,function(t){t.addEventListener("click",function(){var t=o.querySelector(".tu-popup-content"),t=(t&&t.classList.add("tu-linkupload-screen"),o.querySelector(".tu-uploadurl-input"));t&&t.focus()})}),(t=o.querySelector(".tu-uploaderurl-link"))&&t.addEventListener("click",function(){var t=o.querySelector(".tu-popup-content");t&&t.classList.remove("tu-linkupload-screen")}),(t=o.querySelector(".tu-uploader-multiple-nav-btn"))&&t.addEventListener("click",function(){var t=o.querySelector(".tu-popup-content");t&&t.classList.add("tu-uploader-multiple-screen")}),(t=o.querySelector(".tu-uploader-multiple-addmore-wrapper"))&&t.addEventListener("click",function(){var t=o.querySelector(".tu-popup-content");t&&t.classList.remove("tu-uploader-multiple-screen")}),t=o.querySelector(".tu-uploader-settings__big input"),"y"===window.Tildaupload_BIG&&t&&(t.checked=!0),t&&t.addEventListener("change",function(){this.checked?(window.Tildaupload_BIG="y",document.cookie="Tildaupload_BIG=y; max-age=43200"):(window.Tildaupload_BIG="",document.cookie="Tildaupload_BIG=; expires=Thu, 01 Jan 1970 00:00:00 GMT")}),(t=o.querySelector(".tu-uploader-paste"))&&t.addEventListener("click",function(t){var e=o.getAttribute("tu-id");return window["tu_"+e].paste(t),!1}),(t=o.querySelector(".tu-js-selected"))&&t.addEventListener("click",function(){var t=o.getAttribute("tu-id"),e=window["tu_"+t],i=(TUWidget.sortFiles(),e.getActiveFiles());if(0<i.length)return TUWidget.hideUploader(!0),!1;0<e.files.length&&(t=document.getElementById(t+"-previews"))&&t.classList.remove("tu-popup-progressbar-error");t=o.querySelector(".tu-popup-content");t&&t.classList.remove("tu-uploader-multiple-screen"),e.onUserDone&&e.options.uploadMultiple&&(e.onUserDone.call(e,e.files),0==i.length)&&e.removeAllFiles(!0),TUWidget.hideUploader(!0)}),(t=o.querySelector(".tu-js-removeall"))&&t.addEventListener("click",function(){var t=o.getAttribute("tu-id"),t=(window["tu_"+t].removeAllFiles(!0),o.querySelector(".tu-uploader-multiple-nav-title")),t=(t&&(t.innerHTML=TUWidget.dicts[TUWidget.locale].defaultMessage),o.querySelector(".tu-uploader-multiple-title")),t=(t&&(t.innerHTML=""),o.querySelector(".tu-popup-content"));t&&(t.classList.remove("tu-uploader-multiple-screen"),t.classList.remove("tu-uploader-has-miltiple-img"))}),document.addEventListener("keydown",function(t){27==t.keyCode&&document.body.classList.contains("tu-opened")&&TUWidget.hideUploader()}),Array.prototype.forEach.call([".tu-popup-bg",".tu-popup-close",".tu-popup-closer"],function(t){t=o.querySelector(t);t&&t.addEventListener("click",function(){TUWidget.hideUploader()})}),(t=o.querySelector(".tu-uploadurl-blockbtn"))&&t.addEventListener("click",function(t){t.preventDefault();var t=o.getAttribute("tu-id"),e=this.closest(".tu-uploadurl-form").querySelector(".tu-uploadurl-input").value;return window["tu_"+t].uploadFileFromURL(e),!1}),t=o.querySelector(".tu-uploader-multiple-images"),window.TSortableLite&&t&&new window.TSortableLite(t,{selector:"div.tu-js-preview-item",handleSelector:"div.tu-js-preview-item",dragImage:{zIndex:99999999},isAutoUpdateEnabled:!0,autoScroll:{isEnabled:!0,container:t}}).init()),o},TUWidget.popupPasteHandler=function(t){var e,i,o,s,r,l=document.getElementById("tu-popup");l.querySelector(".tu-linkupload-screen")||(e=t.originalEvent||t,i=l.getAttribute("tu-id"),i=window["tu_"+i],e.clipboardData?(console.log("PASTED!="+e+", "+e.clipboardData),e.clipboardData.items&&0<e.clipboardData.items.length?i.paste(e):""<(o=""==(o=(o=e.clipboardData.getData("text/html"))&&0<o.toLowerCase().indexOf("<img")&&(o=(o=(o=o.toLowerCase().split("<img"))[1]).split("src="))[1]?(s=(o=o[1].substring(1)).indexOf("'"))<(r=o.indexOf('"'))&&0<s?o.substring(0,s):o.substring(0,r):o)&&"http"!=(o=e.clipboardData.getData("text/plain")).substring(0,4)?"":o)&&(l.querySelector(".tu-uploader-link").dispatchEvent(new Event("click")),l.querySelector(".tu-uploadurl-input").value=o,l.querySelector(".tu-uploadurl-btn").dispatchEvent(new Event("click")))):window.clipboardData&&(window.clipboardData.items&&0<window.clipboardData.items.length?i.paste(window):(o=window.clipboardData.getData("Html"))&&0<o.toLowerCase().indexOf("<img")&&""<(o=""==(o=(o=(o=(o=o.toLowerCase().split("<img"))[1]).split("src="))[1]?(s=(o=o[1].substring(1)).indexOf("'"))<(r=o.indexOf('"'))&&0<s?o.substring(0,s):o.substring(0,r):o)&&"http"!=(o=window.clipboardData.getData("Text")).substring(0,4)?"":o)&&(l.querySelector(".tu-uploader-link").dispatchEvent(new Event("click")),l.querySelector(".tu-uploadurl-input").value=o,l.querySelector(".tu-uploadurl-btn").dispatchEvent(new Event("click")))),TUWidget.focusHiddenArea(),t.preventDefault())},TUWidget.focusHiddenArea=function(){var t=document.getElementById("tu-popup");if(t&&t.querySelector(".tu-linkupload-screen"))return;t=document.getElementById("tu-hidden-input-paste");t&&(t.value="",t.focus(),t.select())},TUWidget.openPopup=function(t,e){var i=TUWidget.getPopup(),t=t.getAttribute("id"),o=window["tu_"+t],e=(o.element=i.querySelector(".tu-uploader-wrapper"),document.body.classList.add("tu-opened"),document.body.classList.add("t-body_popupshowed"),window.tu_flag_widget_ui_focus=!0,i.setAttribute("tu-id",t),TUWidget.showUploader(),o.waitCompletedForSuccess=!1,o.enableAddDropZone(),0<o.files.length&&o.removeAllFiles(!0),e&&((t=i.querySelector(".tu-uploader-link-wrapper"))&&(t.style.display="none"),(e=i.querySelector(".tu-uploader-settings"))&&(e.style.display="none"),t=document.activeElement)&&t.classList.contains("tu-uploadvideo-button")&&t.blur(),document.addEventListener("paste",TUWidget.popupPasteHandler),i.querySelector(".tu-uploader-button")),t=o.options.uploadMultiple?TUWidget.dicts[TUWidget.locale].buttonUploads:TUWidget.dicts[TUWidget.locale].buttonUpload;e.innerHTML=t},TUWidget.init=function(e){if(!(e=e&&Object.getPrototypeOf(e).jquery?e[0]:e))return{done:function(){return this},fail:function(){return this},progress:function(){return this}};TUWidget.htmlPopup=TUWidget.getPopupHTML();var t,i,o,s,r=e.getAttribute("id"),l=250,n=(r||(r="tuwidget"+parseInt(Math.floor(Math.random()*(9e5+1))+99999),e.setAttribute("id",r)),"yes"==e.getAttribute("data-tu-multiple")),a=e.tagName.toUpperCase(),a=("IMG"==a?(t=r,u=parseInt(e.style.paddingLeft)||0,p=parseInt(e.style.paddingRight)||0,l=e.clientWidth-(u+p),i="yes"===e.getAttribute("data-tu-noclick")?"":r,o=t):"INPUT"==a?(t=r+"-previews",i=o=(t=r)+"-previews","hidden"!==e.getAttribute("type")&&(e.style.display="none")):(t=r,u=parseInt(e.style.paddingLeft)||0,p=parseInt(e.style.paddingRight)||0,l=e.clientWidth-(u+p),i="yes"!==e.getAttribute("data-tu-noclick")?r:"",o="",e.getAttribute("data-tu-preview-container")&&"undefined"!=e.getAttribute("data-tu-preview-container")&&(o=e.getAttribute("data-tu-preview-container"))),Tildaupload_UPLOADKEY=Tildaupload_UPLOADKEY||"",Tildavideoupload_UPLOADKEY=Tildavideoupload_UPLOADKEY||"",document.getElementById(t)),u=Tildaupload.getUploaderSettings(e),p=new Tildaupload("#"+t,{url:u.url+"?publickey="+Tildaupload_PUBLICKEY+"&uploadkey="+u.uploadKey,params:TUWidget.params||{},clickable:!1,thumbnailWidth:l,thumbnailHeight:null,addRemoveLinks:!1,originalelement:e,additionalDropzone:["#tu-popup .tu-uploader-wrapper","#tu-popup  .tu-uploader-multiple-addmore-wrapper"],previewsContainer:o?"#"+o:null,hiddenInputContainer:a?a.parentElement:"body",fileNameSize:22,uploadMultiple:n,maxFiles:n?50:1,parallelUploads:1,locale:TUWidget.locale,dicts:TUWidget.dicts,acceptedFiles:u.acceptedFiles,isVideo:u.isVideo});return p.on("addedfile",function(t){var e,i,o,s,r,l,n,a,u,p,d=this.originalelement,c=d.getAttribute("id");this.options.uploadMultiple||(document.getElementById("tu-popup")&&TUWidget.hideUploader(),e=document.getElementById(c+"-thumb-progress"),i=d.tagName.toUpperCase(),o=document.getElementById(c+"-progress"),"IMG"===i?(l={left:d.offsetLeft,top:d.offsetTop},s={left:d.getBoundingClientRect().left+window.scrollX,top:d.getBoundingClientRect().top+window.scrollY},"y"===window.$is_email&&(s.left=0),o?(o.style.display="block",Tildaupload.setPositionForProgressLine(d),o.style.backgroundColor="#222",r=document.querySelectorAll("#"+c+"-progress > div"),Array.prototype.forEach.call(r,function(t){t.style.width="0"})):(n=parseInt(d.style.paddingLeft)||0,a=parseInt(d.style.paddingRight)||0,u=d.clientWidth-(n+a),d&&d.classList.contains("tn-atom__img")?d.insertAdjacentHTML("afterend",p='<div id="'+c+'-progress" style="width: '+u+'px; height: 3px; box-sizing: border-box; padding: 0; margin:0; position: absolute;background: #222222;">\t<div style="height: 100%; margin:0; padding:0; background: #FC8665; width: 0%; position: relative;" data-tu-uploadprogress></div></div>'):(p=`<div id="${c}-progress" style="width:${u}px; top: ${parseInt(l.top+d.getBoundingClientRect().height)}px; left: ${s.left}px;
                        height: 3px; box-sizing: border-box; padding: 0; margin:0; position: absolute;background: #222222;
                        ${"y"===window.$is_email?"z-index: 1;":""}">
                        <div style="height: 100%; margin:0; padding:0; background: #FC8665; width: 0%; position: relative;" data-tu-uploadprogress></div></div>`,d.insertAdjacentHTML("afterend",p))),t.previewElement=null):"INPUT"!==i&&(""<d.getAttribute("bgimgfield")?(o?(console.log("show progress line for bg"),o.style.display="block",o.style.top="0",o.style.left="0",o.style.backgroundColor="#222",r=document.querySelectorAll("#"+c+"-progress > div"),Array.prototype.forEach.call(r,function(t){t.style.width="0"})):(l={left:d.getBoundingClientRect().left+window.scrollX,top:d.getBoundingClientRect().top+window.scrollY},n=parseInt(d.style.paddingLeft)||0,a=parseInt(d.style.paddingRight)||0,p='<div id="'+c+'-progress" style="width: '+(u=d.clientWidth-(n+a))+'px; height: 3px; box-sizing: border-box; padding: 0; margin:0; position: absolute;z-index:100;background: #000000; background: #222222;">\t<div style="height: 100%; margin:0; padding:0; background: #FC8665; width: 0%; position: relative;" data-tu-uploadprogress></div></div>',d.insertAdjacentHTML("beforebegin",p)),t.previewElement=null):e&&e.insertAdjacentHTML("beforeend",p='<div id="'+c+'-progress">\t<div style="height: 3px; margin:0; padding:0; background: #FC8665; width: 0%; position: relative;" data-tu-uploadprogress></div>   <style>       #'+c+"-thumb {           display: block;       }       #"+c+"-thumb-progress {           overflow: hidden;       }       #"+c+"-progress {           box-sizing: border-box;           width: 100% !important;           height: 100% !important;           position: absolute;           top: 0 !important;           left: 0 !important;           padding: 0 5px;           margin:0;           background-color: rgba(0, 0, 0, 0.4);           display: flex;           align-items: center;           justify-content: flex-start;           font-size: 0px !important;       }       #"+c+"-thumb-progress img {           filter: blur(2px);           width: 100%;       }   </style></div>")))}),p.on("uploadprogress",function(t,e){var i=this.originalelement,o=i.getAttribute("id"),o=document.getElementById(o+"-progress");this.onUserProgress&&!this.options.uploadMultiple?this.onUserProgress.call(this,e,t):o&&(Tildaupload.setPositionForProgressLine(i),e*=.8,(t=o.querySelector("div")).style.width=e+"%",80==e)&&Tildaupload.animate(t,{width:{start:80,end:95,step:1}},"slow")}),n&&(p.on("addedfiles",function(t){var e,i=this.originalelement,o=i.getAttribute("id"),s=(window["tu_"+o+"_last_file"]=t[t.length-1],document.getElementById(o+"-previews")),o=document.getElementById(o+"-progress");this.disableUploadAllBtn(),s?((e=s.querySelector("[data-tu-uploadprogress]"))&&(e.style.width="0"),s.classList.remove("tu-popup-progressbar-start"),s.classList.remove("tu-popup-progressbar-completed"),s.classList.remove("tu-popup-progressbar-uploaded"),s.classList.add("tu-processing"),(e=s.querySelector("[data-tu-name]"))&&(e.innerHTML="Uploading "+t.length+" files"),(e=s.querySelector("[data-tu-size]"))&&(e.innerHTML=this.sizeUploadedFiles())):o&&(Tildaupload.setPositionForProgressLine(i),o.querySelector("div").style.width="0")}),p.on("totaluploadprogress",function(t){var e,i,o=this.originalelement,s=o.getAttribute("id"),r=document.getElementById(s+"-progress"),s=document.getElementById(s+"-previews"),l=document.getElementById("tu-popup");this.options.uploadMultiple&&(this.onUserProgress?this.onUserProgress.call(this,t):(r?(Tildaupload.setPositionForProgressLine(o),r.querySelector("div").style.width=t+"%"):this.originalelement&&"INPUT"===this.originalelement.nodeName.toUpperCase()&&s&&(o=s.querySelector("[data-tu-uploadprogress]"))&&(o.style.width=parseInt(t,10)+"%"),this.options.uploadMultiple&&l&&(r=this.files.length,(o=l.querySelector(".tu-js-selected"))&&(o.style.display="inline-block"),(t=l.querySelector(".tu-js-removeall"))&&(t.style.display="none"),e=l.querySelector(".tu-uploader-multiple-nav-title"),i=l.querySelector(".tu-uploader-multiple-title"),l=l.querySelector(".tu-popup-content"),0==r?(e.innerHTML="Drop file here",i.innerHTML="",l.classList.remove("tu-uploader-multiple-screen"),l.classList.remove("tu-uploader-has-miltiple-img"),o.style.display="none",t.style.display="none"):("RU"==this.options.locale?(l=humanDigits(r,["файл","файла","файлов"]),i.innerHTML="Вы выбрали "+r+" "+l,e.innerHTML="Вы выбрали "+r+" "+l):(i.innerHTML="You've selected "+(r+=1==r?" file":" files"),e.innerHTML="You've selected "+r),o.style.display="inline-block",1<r&&(t.style.display="inline-block"),s&&(l=s.querySelector("[data-tu-name]"),i=s.querySelector("[data-tu-size]"),"RU"==this.options.locale?l.innerHTML="Загружено файлов: "+this.files.length+", ":l.innerHTML="Uploaded "+this.files.length+" files",i.innerHTML=this.sizeUploadedFiles())))))}),p.on("successmultiple",function(t,e){var i,o=this.originalelement,s=o.nodeName.toUpperCase(),r=o.getAttribute("id"),l=document.getElementById(r+"-progress"),n=document.getElementById("tu-popup"),a=document.getElementById(r+"-previews");if((e="string"==typeof e&&"{"==e.substring(0,1)?JSON.parse(e):e).result&&0<e.result.length)for(var u=0;u<e.result.length;u++)for(var p=0;p<this.files.length;p++)if(this.files[p].name==e.result[u].originalUrl||null==this.files[p].name&&"blob"==e.result[u].originalUrl){(!this.files[p].tuInfo||this.files[p].tuInfo&&"object"==typeof this.files[p].tuInfo&&"{}"===JSON.stringify(this.files[p].tuInfo))&&(this.files[p].tuInfo=e.result[u]);break}o&&"IMG"===s?(o.style.opacity=1,l&&setTimeout(function(){fadeOut(l,20)},500)):o&&"INPUT"==s&&a&&(r=a.querySelector("[data-tu-name]"),o=a.querySelector("[data-tu-size]"),a.classList.add("tu-popup-progressbar-uploaded"),s=this.getActiveFiles().length,i=this.files.length-s,"RU"==this.options.locale?r.innerHTML=0<s?"Загружено файлов: "+i+" из "+this.files.length+", ":"Загружено файлов: "+i+", ":r.innerHTML=0<s?"Uploaded "+i+" from "+this.files.length+" files":"Uploaded "+i+" files",o.innerHTML=this.sizeUploadedFiles(),window.setTimeout(function(){a.classList.remove("tu-processing"),a.classList.remove("tu-popup-progressbar-uploaded"),a.classList.add("tu-popup-progressbar-completed"),a.querySelector("[data-tu-uploadprogress]").style.width="0"},500)),n||0!=this.getActiveFiles().length||this.onUserDone&&this.options.uploadMultiple&&this.onUserDone.call(this,this.files)}),p.on("errormultiple",function(t){var e=this.originalelement,i=e.getAttribute("id"),o=document.getElementById(i+"-previews"),s=document.getElementById(i+"-progress"),e=e.nodeName.toUpperCase();this.originalelement&&"IMG"===e&&s?s.style.backgroundColor="#ff2222":this.originalelement&&"INPUT"===e&&o&&(o.classList.add("tu-popup-progressbar-error"),o.querySelector("[data-tu-errormessage]").innerHTML="Error !"),console.log("_["+i+"] error multiple: "+t.length)}),p.on("completemultiple",function(){document.getElementById("tu-popup")||0!=this.getActiveFiles().length||this.removeAllFiles(!0)})),p.on("thumbnail",function(t,e){var i,o,s=this.originalelement,r=s.getAttribute("id");this.options.uploadMultiple||(o=s.nodeName.toUpperCase(),i=s.querySelector(".t-cover__carrier"),"IMG"===o?s.setAttribute("src",e):s.getAttribute("bgimgfield")?i?i.backgroundImage="url("+e+")":s.backgroundImage="url("+e+")":"image/"===t.type.substring(0,6)&&(o=document.getElementById(r+"-thumb"))&&(o.innerHTML='<img src="'+e+'" width="250" />'))}),p.on("success",function(t,e){var i=this.originalelement,o=i.getAttribute("id"),s=i.nodeName.toUpperCase(),r="",l="Upload error",n=(t.tuInfo||(t.tuInfo={}),e);if("string"==typeof e&&console.log("_[#"+o+"] success event error: "+e),(e=e&&"string"==typeof e&&"{"==e.substring(0,1)?JSON.parse(e):e)&&e.result&&0<e.result.length)this.options.uploadMultiple||(t.tuInfo=e.result[0],"IMG"===s?(i.setAttribute("src",e.result[0].cdnUrl),i.style.opacity=1,i.setAttribute("data-tu-value",e.result[0].cdnUrl)):i.getAttribute("bgimgfield")?((s=i.querySelector(".t-cover__carrier"))?s.style.backgroundImage="url("+e.result[0].cdnUrl+")":i.style.backgroundImage="url("+e.result[0].cdnUrl+")",i.setAttribute("data-tu-value",e.result[0].cdnUrl)):(r="",i.value=e.result[0].cdnUrl,""<e.result[0].cdnUrl?(s=document.getElementById(o+"-thumb"))&&t.type&&"image/"==t.type.substring(0,6)?s.innerHTML='<img src="'+e.result[0].cdnUrl+'" width="250" />':s&&(s.innerHTML=e.result[0].cdnUrl):r=e.result[0].error&&""<e.result[0].error?e.result[0].error:"Upload error. Reload page and try again",u=document.getElementById(o+"-previews"),p=document.getElementById(o+"-progress"),""<r?(u?(l=25<r.length?r.substring(0,23)+"...":r,h=u.querySelector(".tu-popup-progressbar-error-title"),g=u.querySelector(".tu-popup-progressbar-error-text"),h.innerHTML=l,g.innerHTML=r,u.classList.remove("tu-popup-progressbar-completed"),u.classList.remove("tu-popup-progressbar-success"),u.classList.remove("tu-popup-progressbar-start"),u.classList.add("tu-popup-progressbar-error"),window.setTimeout(function(){u.classList.remove("tu-popup-progressbar-error"),u.classList.add("tu-popup-progressbar-start")},5e3)):p&&(Tildaupload.setPositionForProgressLine(i),p.style.backgroundColor="#ff2222"),null!=(a=window["tu_"+o])&&void 0!==a&&a.onUserFail&&!a.options.uploadMultiple&&a.onUserFail.call(a,t,e)):u&&(u.classList.add("tu-popup-progressbar-uploaded"),window.setTimeout(function(){u.classList.remove("tu-processing"),u.classList.remove("tu-popup-progressbar-uploaded"),u.classList.add("tu-popup-progressbar-completed");var t=u.querySelector("[data-tu-uploadprogress]");t&&(t.style.width="0")},500))));else{console.log("event success ["+o+"]: error: "+n);var a,u=document.getElementById(o+"-previews"),p=document.getElementById(o+"-progress");if(u){u.classList.remove("tu-popup-progressbar-completed"),u.classList.remove("tu-popup-progressbar-success"),u.classList.remove("tu-popup-progressbar-start"),u.classList.add("tu-popup-progressbar-error");var d="",l="Upload error";if(e&&e.result&&e.result[0]){var c,m=e.result.length-1;for(c in e.result)e.result[c].error&&""<e.result[c].error&&(d+=e.result[c].error,c!==m)&&(d+="<br>")}else e&&""<e.error&&(d=e.error);l=25<(d=""==d?"Upload only image files":d).length?d.substring(0,23)+"...":d;var h=u.querySelector(".tu-popup-progressbar-error-title"),g=u.querySelector(".tu-popup-progressbar-error-text");h.innerHTML=l,g.innerHTML=d,window.setTimeout(function(){u.classList.remove("tu-popup-progressbar-error"),u.classList.add("tu-popup-progressbar-start")},5e3)}else p&&(Tildaupload.setPositionForProgressLine(i),p.style.backgroundColor="#ff2222");null!=(a=window["tu_"+o])&&void 0!==a&&a.onUserFail&&!a.options.uploadMultiple&&a.onUserFail.call(a,t,e)}this.onUserDone&&!this.options.uploadMultiple&&this.onUserDone.call(this,t)}),p.on("complete",function(t){var e,i=this.originalelement,o=i.getAttribute("id"),s=document.querySelectorAll("[data-tu-ondrag-hide=yes]");Array.prototype.forEach.call(s,function(t){var e="none"===window.getComputedStyle(t).display,i=t.getAttribute("data-tu-old-display");e&&i&&(t.style.display=i)}),this.options.uploadMultiple||(s=i.nodeName.toUpperCase(),e=document.getElementById(o+"-progress"),t.previewElement=Tildaupload.createElement("<div></div>"),"IMG"==s?(i.style.opacity=1,e&&setTimeout(function(){fadeOut(e,20,function(){e.remove()})},500)):e?setTimeout(function(){fadeOut(e,20,function(){e.remove()})},500):(i=(s=document.getElementById(o+"-previews"))&&s.querySelector("[data-tu-size]"),s&&i&&(i.innerHTML=this.filesize(t.size))))}),p.on("queuecomplete",function(){this.options.uploadMultiple||this.removeAllFiles()}),window["tu_"+r]=p,"undefined"!=typeof $&&$(e).data("tildaupload",p),Array.isArray(window.tu_ids)||(window.tu_ids=[]),window.tu_ids.push(r),i&&(s=document.getElementById(i))&&s.addEventListener("click",function(t){t.preventDefault();t=s.classList.contains("tu-uploadvideo-button");return TUWidget.openPopup(e,t),!1}),p};
