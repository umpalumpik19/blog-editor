window.t_delivery__browserLang=(window.navigator.userLanguage||window.navigator.language).toUpperCase().slice(0,2),t_onReady((function(){var e=document.getElementById("allrecords"),t=e?e.getAttribute("data-tilda-project-lang"):"";t&&(window.t_delivery__browserLang=t)})),window.t_delivery__isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);var tcart_newDelivery={deliveryState:{currentRequest:null,projectId:null,city:{},services:{},searchboxes:{},focusoutTimers:{},cityCoordinates:null,ymapApiKey:null,cityGuid:null,streetGuid:null,currencyCode:null,pickupList:null,postalCode:null,staticCities:null,geoData:null,autocompleteData:{cities:null},badResponseCounters:{services:0},activeServiceUid:null,freeDeliveryThreshold:null,isDisableFields:!1,isSavedAddressSelected:!1},deliveryKeys:["city","street","pickup-name","house","entrance","floor","aptoffice","phone","entrancecode","comment","hash","postalcode","country","userinitials","onelineaddress"],init:function e(t){var r=this;window.tcart_newDeliveryActive=!0,r.updateProjectId();var i=document.querySelector(".t706");i&&(r.deliveryState.currencyCode=i.getAttribute("data-project-currency-code")),r.deliveryState.ymapApiKey=t,r.deliveryState.ymapApiKey&&r.mapAppendScript("",t);var a=i.querySelector(".t-radio__wrapper-delivery"),n=i.querySelectorAll(".t-radio__wrapper-delivery");n.length>0&&Array.prototype.forEach.call(n,(function(e){e.innerHTML=""})),a.setAttribute("id","customdelivery");var o=r.createTitle(t_delivery__dict("delivery"));a.appendChild(o),tcart__blockSubmitButton();var s=function e(t){var i;t&&(r.renderRegionFields(),t.cities?(i=t.cities[0],r.deliveryState.staticCities=t.cities):i=t,r.setCityState(i),r.setCityInput(i.name),r.setPostalCodeInput(i.postalCode),r.renderServices(),tcart__updateDelivery())},d=function e(){r.renderRegionFields(),r.renderServices(),tcart__updateDelivery()};r.restoreFromLastOrder().catch(r.restoreFromLS).catch(r.getCityFromGeoWithFailHandler).then(s).catch((function(e){console.error("Can not get delivery from any source: "+e),d()}));var c=document.getElementById("customdelivery");if(c){var l="click",u="";window.t_delivery__isMobile?(l+=" touchstart",u=".searchbox-input, .t-input-clear"):(l+=" mousedown",u+=".t-input-clear"),l.split(" ").forEach((function(e){c.addEventListener(e,(function(e){for(var t=e.target;t&&t!=this;t=t.parentNode){if(t.matches(".searchbox-change-pickup")){var r=t.closest(".searchbox-wrapper");r&&r.classList.remove("show-info")}if(t.matches(u)){p.call(t,e);break}}}),!1)}))}function p(e){var t=e.target,i=!1;if(t.matches(".searchbox-input")&&window.t_delivery__isMobile){var a=getComputedStyle(t),n=t.offsetWidth+parseInt(a.marginLeft)+parseInt(a.marginRight),o=t.closest(".t-input-block");n-e.offsetX<=45&&o&&o.classList.contains("active")&&(i=!0)}else t.matches(".t-input-clear")&&(i=!0);if(i){var s=t.closest(".searchbox-wrapper"),d=s.getAttribute("id");s.querySelector(".searchbox-list").innerHTML="",clearTimeout(r.deliveryState.focusoutTimers[d]),s.querySelector(".searchbox-input").value="",s.querySelector(".t-input-block").classList.remove("active"),setTimeout((function(){s.querySelector(".searchbox-input").focus()}),50),r.deliveryState.searchboxes[d]&&r.deliveryState.searchboxes[d].address&&(r.deliveryState.searchboxes[d].address=null)}}r.renderFullAddressNode()},setCityState:function e(t){var r=this;if(t&&(this.deliveryState.geoData=t,this.deliveryState.city=t,this.deliveryState.cityGuid=t.guid,this.deliveryState.countryIso=t.countryIso,this.deliveryState.postalCode=t.postalCode),""!==t.name){if(t.fullName){var i=document.querySelector(".t706 #city-searchbox .t-input-description");i&&(i.textContent=t.fullName)}if(t.countryIso){var a=document.querySelector('[name="tildadelivery-country"]');a&&(a.value=t.countryIso)}this.deliveryState.ymapApiKey&&t.name&&this.getCityCoordinates("yandex",t.name,(function(e){try{var t;(t=e.response.GeoObjectCollection.featureMember[0].GeoObject.Point.pos.split(" "))&&(t=[t[1],t[0]],r.deliveryState.cityCoordinates=t)}catch(i){console.error(i)}})),this.deliveryState.searchboxes["city-searchbox"]||(this.deliveryState.searchboxes["city-searchbox"]={}),this.deliveryState.searchboxes["city-searchbox"].address=t}else{var n=document.querySelector(".t706 #city-searchbox input");n&&(n.classList.remove("load"),n.readOnly=!1)}},fetchLastOrderShippings:function e(){var t,r,i={token:(window.t_cart__getMembersToken||window.tcart__getMembersToken)()},a,n="https://"+window.tcart_endpoint+"/api/orders/getdeliverieslist/";return window.tcart__fetchData(n,{data:i})},restoreFromLastOrder:function e(){var t=this;return new Promise((function(e,r){window.mauser?t_delivery__loadJSFile("https://static.tildacdn."+t_delivery__getRootZone()+"/js/tilda-orders-common-1.0.min.js").then((function(){t.fetchLastOrderShippings().then((function(i){if(i.length&&i[0].city){t.renderSavedAddressesSelect(i),t.deliveryState.isSavedAddressSelected=!0;var a=i[0];e(t.saveDelivery(a))}else r("no_last_order_data")})).catch((function(e){r(e)}))})).catch((function(){r("no_orders-common_script")})):r("no_memberarea")}))},restoreFromLS:function e(){try{var t=tcart_newDelivery;return window.tcart__restoreFields?Promise.resolve(window.tcart__restoreFields.getFormFieldsFromLS()).then((function(e){if(!e)return Promise.reject("No fields from saved in Local Storage");var r=e.filter((function(e){return e.name.startsWith("tildadelivery")}));r.forEach((function(e){e.name=e.name.replace("tildadelivery-","")}));var i=r.reduce((function(e,t){return e[t.name]=t.value,e}),{});return t.deliveryState.isSavedAddressSelected=!0,t.saveDelivery(i)})):Promise.reject("tcart__restoreFields is not defined")}catch(r){return Promise.reject(r)}},saveDelivery:function e(t){var r=this,i={pattern:t.city};return window.t_delivery__lang.lang=t.lang,new Promise((function(e,a){tcart_newDelivery.getAddresses(JSON.stringify(i),"city",(function(i){if(Array.isArray(i)&&0!==i.length){var n=i.find((function(e){return e.name===t.city&&e.countryIso===t.country}));if(n){t["service-id"]&&(tcart_newDelivery.deliveryState.activeServiceUid=parseInt(t["service-id"],10)),n.postalCode=t.postalcode||n.postalCode,r.deliveryState.postalCode=n.postalCode;var o=!!t["pickup-id"],s;tcart_newDelivery.deliveryState.pickupPointId=o?t["pickup-id"]:"",window.t_delivery__userFieldsAutoComplete=window.t_delivery__userFieldsAutoComplete||{},["street","house","entrance","floor","aptoffice","phone","entrancecode","comment","postalcode","country","userinitials","onelineaddress","pickup-name","pickup-address","pickup-id"].forEach((function(e){window.t_delivery__userFieldsAutoComplete[e]=t[e]||""})),r.hideFieldsErrors(),e(n)}else a("city_not_found")}else a("no_cities")}),(function(){return a("no_addresses")}))}))},renderSavedAddressesSelect:function e(t){var r=this,i=document.querySelector(".t-radio__wrapper-delivery"),a=document.createElement("div");a.classList.add("js-saved-addresses-wrap","t-input-group","t-input-group_nm");var n,o,s=[{value:"new",html:'<div class="tcart-address">'+t_delivery__dict("newAddress")+"</div>"},{html:'<div class="tcart__address-selectbox-title">'+t_delivery__dict("savedAddresses")+":</div>"}].concat(t.map((function(e,t){return{value:t.toString(),selected:0===t,html:r.getFullAddressHtml(e)}})));window.savedAddressesSelect=new TCartSelect(a,{placeholder:"Выберите опцию",items:s}),window.savedAddressesSelect.onChange((function(e){var i=t[e];r.deliveryState.isSavedAddressSelected=!0,r.hideSavedAddressesUnavailableMessage(),"new"===e?r.getCityFromGeoWithFailHandler().then((function(e){window.t_delivery__autocompleteFields.clearState(),r.deliveryState.activeServiceUid=null,r.setCityState(e),r.setCityInput(e.name),r.setPostalCodeInput(e.postalCode),r.renderServices()})):r.saveDelivery(i).then((function(e){r.setCityState(e),r.setCityInput(e.name),r.setPostalCodeInput(e.postalCode),r.renderServices()})).catch((function(e){console.error("Could not set saved delivery: ",e),r.showSavedAddressesUnavailableMessage(),r.clearAddressSelect()}))})),i.appendChild(a),document.addEventListener("membersLogout",(function(){a.remove()}))},onAddressChange:function e(t){var r=t.target,i=tcart_newDelivery;r.matches('.t706 input[name^="tildadelivery"]')&&(i.clearAddressSelect(),i.hideSavedAddressesUnavailableMessage(),r.matches('input[name^="tildadelivery-city"]')&&window.t_delivery__lang.clearLang())},clearAddressSelect:function e(){var t=window.savedAddressesSelect;t&&t.setValue("new",!0)},showSavedAddressesUnavailableMessage:function e(){var t;if(window.savedAddressesSelect&&window.savedAddressesSelect.value&&"new"!==window.savedAddressesSelect.value&&!document.querySelector(".js-saved-addresses-warning")){var r=document.querySelector(".js-saved-addresses-wrap");if(r){var i=document.createElement("div");i.classList.add("js-saved-addresses-warning"),i.innerHTML='\n            <div class="t-text t-text_md t706__warning">\n                '+t_delivery__dict("savedAddressesSelectWarning")+"\n            </div>",r.insertAdjacentElement("afterend",i)}}},hideSavedAddressesUnavailableMessage:function e(){var t=document.querySelector(".js-saved-addresses-warning");t&&t.remove()},getFullAddressHtml:function e(t){if(!t)return"";var r=t["pickup-name"],i,a=function e(r){return r.filter((function(e){return t[e.value]})).map((function(e){var r,i;return[e.prefix?t_delivery__dict(e.prefix).toLowerCase()+" ":"",e.transform?e.transform(t[e.value]):t[e.value]].filter((function(e){return e})).join(" ")})).join(", ")},n,o,s=[{value:"userinitials"},{value:"comment"}],d;return"\n            <div class=\"tcart-address\">\n                <p class='tcart-address__name'>"+t.name+(r?": "+r:"")+"</p>\n                <p class='tcart-address__text'>"+a([{value:"country",transform:function e(t){return"RU"===t.toUpperCase()?t_delivery__dict("RU"):t}},{value:"postalcode"},{value:"city"},{value:"onelineaddress"},{value:"street"},{value:"house"},{prefix:"apt_short",value:"aptoffice"},{prefix:"floor",value:"floor"},{prefix:"entrance",value:"entrance"},{prefix:"entranceCode",value:"entrancecode"},{value:"pickup-address"}])+"</p>\n                <p class='tcart-address__subtext'>"+a(s)+"</p>\n            </div>"},disableChoseServiceControls:function e(){var t=document.querySelectorAll('.t706 input[name="tildadelivery-type"]');Array.prototype.forEach.call(t,(function(e){e.setAttribute("disabled","disabled")}))},enableChoseServiceControls:function e(){var t=document.querySelectorAll('.t706 input[name="tildadelivery-type"]');Array.prototype.forEach.call(t,(function(e){e.removeAttribute("disabled")}))},getInputFields:function e(){var t=[];return window.tcart_newDelivery.deliveryKeys.forEach((function(e){var r=t_delivery__getDeliveryInputByKey(e);r&&t.push(r)})),t},getInputValues:function e(){var t=this.getInputFields(),r={};return t.forEach((function(e){var t=e.name.replace("tildadelivery-","");r[t]=e.value})),r},hideFieldsErrors:function e(){var t;window.tcart__errorHandler.hide(),this.getInputFields().forEach((function(e){window.window.tcart__inputErrorHandler.hide(e)}))},getFullAddress:function e(){var t=tcart_newDelivery.deliveryState.city||{},r=t.name,i=t.fullName,a=this.getInputValues(),n=a.city,o=a.street,s=a.house,d=a["pickup-name"],c=i||r||n,l=[],u;return l.push(c),d?l.push(d):l.push(o,s),l.filter((function(e){return e})).join(", ")},renderFullAddressNode:function e(){var t=document.createElement("div"),r;t.classList.add("delivery-full-address"),t.classList.add("t-descr"),document.querySelector(".t706__cartwin-totalamount-info").insertAdjacentElement("afterend",t)},setFullAddress:function e(t){var r=document.querySelector(".delivery-full-address");r&&(r.textContent=t)},changeCartInputsHandler:function e(){var t=this,r=document.querySelectorAll(".t706 input");Array.prototype.forEach.call(r,(function(e){e.removeEventListener("change",t.saveTcartDelivery),e.addEventListener("change",t.saveTcartDelivery)}))},saveTcartDelivery:function e(){var t=document.querySelector(".t706");window.tcart_newDelivery.deliveryKeys.forEach((function(e){var r,i=t.querySelector('[name="tildadelivery-'+e+'"]');i&&(r=i.value),!r&&""!==r||void 0===window.tcart.delivery||(window.tcart.delivery[e]=r)}));var r={"service-id":'[name="tildadelivery-type"]:checked',"pickup-id":"[data-pickup-id]","pickup-address":"[data-pickup-address]"},i;Object.keys(r).forEach((function(e){var i,a=t.querySelector(r[e]);a&&(i=a.getAttribute("data-"+e)),!i&&""!==i||void 0===window.tcart.delivery||(window.tcart.delivery[e]=i)})),window.tcart.delivery&&(window.tcart.delivery.lang=window.t_delivery__lang.lang),window.t_delivery__userFieldsAutoComplete=window.t_delivery__userFieldsAutoComplete||{},["street","house","entrance","floor","aptoffice","phone","entrancecode","comment","postalcode","country","userinitials","onelineaddress"].forEach((function(e){var t=t_delivery__getDeliveryInputByKey(e);if(t){var r=t.value;(r||""===r)&&(window.t_delivery__userFieldsAutoComplete[e]=r)}}))},restoreTcartDelivery:function e(){var t=this,r=document.querySelector(".t706"),i=window.t_delivery__userFieldsAutoComplete;if(i){var a;["street","house","entrance","floor","aptoffice","phone","entrancecode","comment","postalcode","country","userinitials","onelineaddress"].forEach((function(e){var r=t_delivery__getDeliveryInputByKey(e);if(r){var a=i[e];if(a){var n=r.closest(".searchbox-wrapper");if(!t.deliveryState.isSavedAddressSelected&&n)return;r.value=a,n&&r.setAttribute("data-option-selected","true")}}}));var n=i.postalcode,o=i["pickup-id"],s=i["pickup-address"],d=i["pickup-name"],c=tcart_newDelivery.deliveryState.activeServiceUid,l=tcart_newDelivery.deliveryState.services[c],u=l&&"pickup"===l.type,p=Object.values(l.fields).some((function(e){return e.autocomplete}));if(this.deliveryState.isSavedAddressSelected&&o){var v=r.querySelector("#pickup-searchbox"),y=r.querySelector('[name="tildadelivery-pickup-name"]');if(!v||!y)return;y.setAttribute("data-pickup-id",i["pickup-id"]||""),y.setAttribute("data-pickup-address",i["pickup-address"]||""),y.setAttribute("data-option-selected","true"),y.value=i["pickup-name"]||"",this.changePickupHandler(o,d,n,v,s),this.showPickupInfo(i["pickup-id"],v)}else(this.deliveryState.isSavedAddressSelected||!u&&!p)&&this.updateDeliveryPrice(n,c);this.deliveryState.isSavedAddressSelected=!1}},clearDeliveryFields:function e(){var t=tcart_newDelivery;window.t_delivery__autocompleteFields.clearState(),t.renderServices()},mapAppendScript:function e(t,r){var i=document.createElement("script");i.src="https://api-maps.yandex.ru/2.1/?apikey="+(r||"")+"&lang=ru_RU",document.head.appendChild(i)},mapInit:function e(t){if("yandex"===t&&void 0!==window.ymaps){var r=document.createElement("div");r.id="delivery-yandex-map",document.getElementById("pickup-searchbox").querySelector(".searchbox-inner-wrapper").appendChild(r);var i=this;window.ymaps.ready((function(){window.t_delivery__map=new ymaps.Map("delivery-yandex-map",{center:i.deliveryState.cityCoordinates||[55.76,37.64],zoom:8,controls:["zoomControl"],minZoom:3,maxZoom:20},{yandexMapDisablePoiInteractivity:!0,suppressMapOpenBlock:!0});var e,t=window.t_delivery__map.panes.get("events").getElement(),r={EN:"Use two fingers to move the map",RU:"Чтобы переместить карту проведите по ней двумя пальцами",FR:"Utilisez deux doigts pour déplacer la carte",DE:"Verschieben der Karte mit zwei Fingern",ES:"Para mover el mapa, utiliza dos dedos",PT:"Use dois dedos para mover o mapa",UK:"Переміщуйте карту двома пальцями",JA:"地図を移動させるには指 2 本で操作します",ZH:"使用双指移动地图",PL:"Przesuń mapę dwoma palcami",KK:"Картаны екі саусақпен жылжытыңыз",IT:"Utilizza due dita per spostare la mappa",LV:"Lai pārvietotu karti, bīdiet to ar diviem pirkstiem"},a={alignItems:"center",boxSizing:"border-box",color:"white",display:"flex",justifyContent:"center",fontSize:"22px",fontFamily:"Arial,sans-serif",opacity:"0.0",padding:"25px",textAlign:"center",transition:"opacity .3s",touchAction:"auto"};Object.keys(a).forEach((function(e){t.style[e]=a[e]})),window.tStoreIsMobile&&(window.t_delivery__map.behaviors.disable("drag"),window.ymaps.domEvent.manager.add(t,"touchmove",(function(e){1===e.get("touches").length&&(t.style.transition="opacity .3s",t.style.background="rgba(0, 0, 0, .45)",t.textContent=r[window.t_delivery__browserLang]||r.EN,t.style.opacity="1")})),window.ymaps.domEvent.manager.add(t,"touchend",(function(){t.style.transition="opacity .8s",t.style.opacity="0"})))}))}},mapAddPoints:function e(t,r,i){var a=this;void 0!==window.ymaps&&window.ymaps.ready((function(){window.t_delivery__map.geoObjects&&window.t_delivery__map.geoObjects.removeAll();var e=[];if(r.forEach((function(t){0===t.coordinates[0]&&0===t.coordinates[1]||e.push(t.coordinates)})),e.length>0){for(var t=new ymaps.Clusterer({preset:"islands#circleIcon",groupByCoordinates:!1,clusterDisableClickZoom:!1,clusterHideIconOnBalloonOpen:!1,geoObjectHideIconOnBalloonOpen:!1}),n=function e(t){var n=r[t],o=n.name,s=n.address||"",d=n.workTime||"",c=n.phones||"",l=n.addressComment||"",u,p="";p+="<b>"+o+"</b>";var v="";v+="<b>"+t_delivery__dict("address")+": </b>"+s+"</br>";var y="";return n.cash&&"n"===n.cash&&(y+="cash"),v+='<div style="margin: 10px 0;" class="delivery-map-point-select" '+(y?'data-restrictions="'+y+'"':"")+" data-point-index="+t+' onclick="window.tcart__chosePointOnMap(this); return false;">'+t_delivery__dict("select")+"</div>",v+=l?l+"</br>":"",v+=d?"<b>"+t_delivery__dict("workingHours")+": </b>"+d+"</br>":"",c.length&&(v+=(u=c.length>1?"<b>"+t_delivery__dict("phones")+": </b>":"<b>"+t_delivery__dict("phone")+": </b>")+c.join(", ")+"</br>"),window.tcart__chosePointOnMap=function(e){var t=e.dataset.pointIndex,n=r[t],o=i.querySelector(".searchbox-input"),s=i.getAttribute("id");window.tcart__inputErrorHandler.hide(o),o.setAttribute("data-option-selected",!0);var d=n.postalCode;""===d&&(d=a.deliveryState.city.postalCode),a.deliveryState.postalCode=d,a.deliveryState.pickupPointId=n.id,a.deliveryState.searchboxes[s]||(a.deliveryState.searchboxes[s]={}),a.deliveryState.searchboxes[s].address={name:n.name,pickupid:n.id,postalCode:d},a.setPostalCodeInput(d),a.changePickupHandler(n.id,n.name,d,i,n.address),document.querySelector('.t706 [name="tildadelivery-pickup-name"]').value=n.name,a.saveTcartDelivery(),window.t_delivery__map.balloon.close(),a.showPickupInfo(n.id,i),a.hidePaymentMethod(e)},{balloonContentHeader:p,balloonContentBody:v,balloonContentFooter:""}},o=function e(t){return{preset:"islands#circleIcon",index:t}},s=[],d=0,c=e.length;d<c;d++)s[d]=new ymaps.Placemark(e[d],n(d),o(d));t.options.set({gridSize:80,clusterDisableClickZoom:!1}),t.add(s),window.t_delivery__map.geoObjects.add(t),window.t_delivery__map.setBounds(t.getBounds(),{checkZoomRange:!0}).then((function(){var e=window.t_delivery__map.getZoom();e>=20&&window.t_delivery__map.setZoom(18),0===e&&window.t_delivery__map.setZoom(8)}),this)}}))},setPostalCodeInput:function e(t){var r;document.querySelector(".t706").querySelector('input[name="tildadelivery-postalcode"]').value=t},setHashInput:function e(t){var r;document.querySelector(".t706").querySelector('input[name="tildadelivery-hash"]').value=t},setCityInput:function e(t){var r=document.querySelector('input[name="tildadelivery-city"]');r&&(r.value=t,r.setAttribute("data-option-selected",Boolean(t).toString()))},createSearchbox:function e(t,r){var i=document.createElement("div");i.classList.add("searchbox-wrapper"),i.setAttribute("id",r);var a=document.createElement("div");a.classList.add("searchbox-inner-wrapper"),a.appendChild(t);var n=document.createElement("div");n.classList.add("searchbox-list"),n.setAttribute("tabindex",-1),a.appendChild(n),i.appendChild(a);var o=document.createElement("div");return o.classList.add("searchbox-info"),o.setAttribute("tabindex",-1),i.appendChild(o),i},searchboxInit:function e(t,r){var i=document.getElementById(t),a=i.querySelector(".searchbox-input"),n=a.closest(".t-input-block"),o=this,s;"paste keyup".split(" ").forEach((function(e){a.addEventListener(e,(function(e){e.keyCode>=33&&e.keyCode<=40||(clearTimeout(s),o.deliveryState.searchboxes[t]&&(o.deliveryState.searchboxes[t].address=null),o.deliveryState.searchboxes[t]&&"pickup"!==r&&(o.deliveryState.searchboxes[t].autocompleteAddress=null),""===a.value||n.classList.contains("active")||n.classList.add("active"),s=setTimeout((function(){o.changeSearchboxInputHandler(e,i,r),s=null}),500))}),!1)}));var d=!1,c;"click mousedown keyup".split(" ").forEach((function(e){a.addEventListener(e,(function(e){d||(d=!0,clearTimeout(c),c=setTimeout((function(){o.clickSearchboxInputHandler(e,i,r)}),150)),setTimeout((function(){d=!1}),200)}),!1)})),a.addEventListener("blur",(function(e){var t=e.relatedTarget;t&&t.classList.contains("searchbox-list")||(clearTimeout(s),o.focusoutSearchboxInputHandler(i,r))}),!1)},clickSearchboxInputHandler:function e(t,r,i){var a,n=r.querySelector(".searchbox-input"),o=n.closest(".t-input-block");""===n.value||o.classList.contains("active")||o.classList.add("active");var s=r.querySelector(".searchbox-list"),d;if(r.querySelectorAll(".searchbox-list-item").length)s.style.display="";else if(!n.classList.contains("load")){var c,l=parseInt(n.getAttribute("data-service-id"),10);l&&(c=this.deliveryState.services[l].strongAddress);var u=this,p=r.getAttribute("id");this.deliveryState.searchboxes[p]&&"pickup"!==i&&(this.deliveryState.searchboxes[p].autocompleteAddress=null);var v=(t.target.value||"").trim(),y,h;switch(r.classList.contains("load")||(r.classList.add("load"),r.readOnly=!0),i){case"city":if(""===v)return s.innerHTML='<div class="searchbox-list-item t-text" style="user-select: none; pointer-events: none;">'+t_delivery__dict("noResult")+"</div>",s.style.display="",r.classList.remove("load"),void(r.readOnly=!1);y={pattern:v},y=JSON.stringify(y);var m=function e(t){r.classList.remove("load"),r.readOnly=!1,t.error||0===t.length?""!==n.value?s.innerHTML='<div class="searchbox-list-item t-text" style="user-select: none; pointer-events: none;">'+t_delivery__dict("noResult")+"</div>":s.innerHTML="":(s.style.display="",u.deliveryState.searchboxes[p].autocompleteAddress=t[0],u.deliveryState.searchboxes[p].addresses=t,u.deliveryState.autocompleteData.cities=t,u.fillSearchList(s,t,"address"),u.choseSearchListItemHandler(r,i))};null!=(a=u.deliveryState.searchboxes[p])&&a.autocompleteAddress||u.deliveryState.staticCities?m(u.deliveryState.staticCities||u.deliveryState.searchboxes[p].autocompleteAddress):u.getAddresses(y,i,m,(function(e){u.changeEndpoint(e,(function(){u.getAddresses(y,i,m)}))}));break;case"pickup":var f=n.getAttribute("data-service-id"),_="",S=document.querySelector('.t706 input.t-radio_delivery[data-service-id="'+f+'"]');if(S&&(_=S.dataset.restrictions||""),u.deliveryState.searchboxes[p]&&u.deliveryState.searchboxes[p].autocompleteAddress){if(r.classList.remove("load"),r.readOnly=!1,(h=u.deliveryState.searchboxes[p].autocompleteAddress).error||0===h.length){s.innerHTML="";var w=window.t_delivery__browserLang.toLowerCase(),g=h.userFriendlyError?h.userFriendlyError[w]||h.userFriendlyError.en:"";return void tcart__errorHandler.show(g||h.error)}h=(h=h.filter((function(e){return-1!==e.name.toLowerCase().indexOf(v.toLowerCase())||-1!==e.address.toLowerCase().indexOf(v.toLowerCase())}))).map((function(e){return"cash"===_&&(e.cash="n"),e})),u.deliveryState.searchboxes[p]||(u.deliveryState.searchboxes[p]={}),u.fillSearchList(s,h,"pickup"),u.choseSearchListItemHandler(r,i)}else{var b=function e(t){if(r.classList.remove("load"),r.readOnly=!1,t.error||0===t.length){""!==n.value?s.innerHTML='<div class="searchbox-list-item t-text" style="user-select: none; pointer-events: none;">'+t_delivery__dict("noResult")+"</div>":s.innerHTML="";var a=window.t_delivery__browserLang.toLowerCase(),o=t.userFriendlyError?t.userFriendlyError[a]||t.userFriendlyError.en:"";tcart__errorHandler.show(o||t.error)}else u.deliveryState.searchboxes[p]||(u.deliveryState.searchboxes[p]={}),u.deliveryState.searchboxes[p].autocompleteAddress=t,u.deliveryState.pickupList=t,u.fillSearchList(s,t,"pickup"),u.choseSearchListItemHandler(r,i)};u.getPickupList({projectId:u.deliveryState.projectId,postalCode:u.deliveryState.city.postalCode,deliveryId:f,pattern:v,onDone:b,onFail:function e(t){u.changeEndpoint(t,(function(){u.getPickupList({projectId:u.deliveryState.projectId,postalCode:u.deliveryState.city.postalCode,deliveryId:f,pattern:v,onDone:b})}))}})}break;case"street":y={pattern:v,fias:this.deliveryState.cityGuid},y=JSON.stringify(y),u.deliveryState.searchboxes[p]||(u.deliveryState.searchboxes[p]={}),c&&"street"===i&&n.setAttribute("data-option-selected",!1);var A=function e(t){r.classList.remove("load"),r.readOnly=!1,t.error||0===t.length?""!==n.value?s.innerHTML='<div class="searchbox-list-item t-text" style="user-select: none; pointer-events: none;">'+t_delivery__dict("noResult")+"</div>":s.innerHTML="":(u.deliveryState.searchboxes[p].autocompleteAddress=t[0],u.fillSearchList(s,t,"address"),u.choseSearchListItemHandler(r,i))};u.getAddresses(y,i,A,(function(e){u.changeEndpoint(e,(function(){u.getAddresses(y,i,A)}))}));break;case"house":y={pattern:v,fias:this.deliveryState.streetGuid||this.deliveryState.cityGuid},y=JSON.stringify(y);var L=function e(t){r.classList.remove("load"),r.readOnly=!1,t.error||0===t.length?s.innerHTML="":(u.deliveryState.searchboxes[p]||(u.deliveryState.searchboxes[p]={}),u.deliveryState.searchboxes[p].autocompleteAddress=t[0],u.fillSearchList(s,t,"address"),u.choseSearchListItemHandler(r,i))};u.getAddresses(y,i,L,(function(e){u.changeEndpoint(e,(function(){u.getAddresses(y,i,L)}))}));break;default:r.classList.remove("load"),r.readOnly=!1}}},changeSearchboxInputHandler:function e(t,r,i){var a=this,n=r.querySelector(".searchbox-list"),o=r.querySelector(".searchbox-input"),s=o.closest(".t-input-block"),d=r.getAttribute("id"),c=parseInt(o.getAttribute("data-service-id")),l;if(c&&(l=this.deliveryState.services[c].strongAddress),!o.classList.contains("load")){var u=(t.target.value||"").trim(),p,v;switch(r.classList.contains("load")||(r.classList.add("load"),r.readOnly=!0),""===o.value&&s.classList.remove("active"),i){case"city":if(p={pattern:u},p=JSON.stringify(p),a.deliveryState.searchboxes[d]||(a.deliveryState.searchboxes[d]={}),a.deliveryState.searchboxes[d]&&a.deliveryState.staticCities){if(r.classList.remove("load"),r.readOnly=!1,v=a.deliveryState.staticCities,Array.isArray(v)?v=v.filter((function(e){return-1!==e.name.toLowerCase().indexOf(u.toLowerCase())||-1!==e.fullName.toLowerCase().indexOf(u.toLowerCase())})):console.info(v),0===v.length)return void(""!==o.value?n.innerHTML='<div class="searchbox-list-item t-text" style="user-select: none; pointer-events: none;">'+t_delivery__dict("noResult")+"</div>":n.innerHTML="");a.deliveryState.searchboxes[d].autocompleteAddress=v[0],a.deliveryState.searchboxes[d].addresses=v,a.deliveryState.autocompleteData.cities=v,a.fillSearchList(n,v,"address"),a.choseSearchListItemHandler(r,i)}else{var y=function e(t){r.classList.remove("load"),r.readOnly=!1,t.error||0===t.length?""!==o.value?n.innerHTML='<div class="searchbox-list-item t-text" style="user-select: none; pointer-events: none;">'+t_delivery__dict("noResult")+"</div>":n.innerHTML="":(a.deliveryState.searchboxes[d].autocompleteAddress=t[0],a.deliveryState.searchboxes[d].addresses=t,a.deliveryState.autocompleteData.cities=t,a.fillSearchList(n,t,"address"),a.choseSearchListItemHandler(r,i))};a.getAddresses(p,i,y,(function(e){a.changeEndpoint(e,(function(){a.getAddresses(p,i,y)}))}))}break;case"pickup":if(o.setAttribute("data-option-selected",!1),a.deliveryState.searchboxes[d]&&a.deliveryState.searchboxes[d].autocompleteAddress){if(r.classList.remove("load"),r.readOnly=!1,0===(v=(v=a.deliveryState.searchboxes[d].autocompleteAddress).filter((function(e){return-1!==e.name.toLowerCase().indexOf(u.toLowerCase())||-1!==e.address.toLowerCase().indexOf(u.toLowerCase())}))).length)return void(""!==o.value?n.innerHTML='<div class="searchbox-list-item t-text" style="user-select: none; pointer-events: none;">'+t_delivery__dict("noResult")+"</div>":n.innerHTML="");a.fillSearchList(n,v,"pickup"),a.choseSearchListItemHandler(r,i)}break;case"street":p={pattern:u,fias:this.deliveryState.cityGuid},p=JSON.stringify(p),a.deliveryState.searchboxes[d]||(a.deliveryState.searchboxes[d]={}),l&&o.setAttribute("data-option-selected",!1);var h=function e(t){r.classList.remove("load"),r.readOnly=!1,t.error||0===t.length?""!==o.value?n.innerHTML='<div class="searchbox-list-item t-text" style="user-select: none; pointer-events: none;">'+t_delivery__dict("noResult")+"</div>":n.innerHTML="":(a.deliveryState.searchboxes[d].autocompleteAddress=t[0],a.deliveryState.searchboxes[d].addresses=t,a.fillSearchList(n,t,"address"),a.choseSearchListItemHandler(r,i))};a.getAddresses(p,i,h,(function(e){a.changeEndpoint(e,(function(){a.getAddresses(p,i,h)}))}));break;case"house":p={pattern:u,fias:this.deliveryState.streetGuid||this.deliveryState.cityGuid},p=JSON.stringify(p),a.deliveryState.searchboxes[d]||(a.deliveryState.searchboxes[d]={});var m=function e(t){r.classList.remove("load"),r.readOnly=!1,t.error||0===t.length?""!==o.value?n.innerHTML='<div class="searchbox-list-item t-text" style="user-select: none; pointer-events: none;">'+t_delivery__dict("noResult")+"</div>":n.innerHTML="":(a.deliveryState.searchboxes[d].autocompleteAddress=t[0],a.deliveryState.searchboxes[d].addresses=t,a.fillSearchList(n,t,"address"),a.choseSearchListItemHandler(r,i))};a.getAddresses(p,i,m,(function(e){a.changeEndpoint(e,(function(){a.getAddresses(p,i,m)}))}))}}},updateDeliveryPrice:function e(t,r,i,a){var n=this,o=function e(t){if(t.error||0===t.length){var i,o,s=window.t_delivery__browserLang.toLowerCase(),d=(null==(i=t.userFriendlyError)?void 0:i[s])||(null==(o=t.userFriendlyError)?void 0:o.en)||"";return tcart__errorHandler.show(d||t.error),window.tcart.emptyDeliveryServices=!0,void tcart__updateDelivery()}if(window.tcart.emptyDeliveryServices=!1,tcart__errorHandler.hide(),void 0!==t.hash&&n.setHashInput(t.hash),void 0!==t.price){var c=t.price;n.updatePriceValueInRadio(c,r)}"function"==typeof a&&a(),n.setFullAddress(n.getFullAddress()),tcart__showDeliveryPrice()},s=function e(a){n.changeEndpoint(a,(function(){n.getDeliveryPrice({projectId:n.deliveryState.projectId,postalCode:t,serviceId:r,pickPointId:i,onDone:o,onFail:function e(){var t;t="RU"===window.t_delivery__browserLang?'Невозможно получить почтовый индекс для доставки. Пожалуйста, перезагрузите страницу и попробуйте еще раз. Если ситуация не изменилась, обратитесь в поддержку <a href="mailto:team@tilda.cc?subject=Unable to get a postal code for street" style="color:#fff;text-decoration:underline;">team@tilda.cc</a>.':'Unable to get a postal code for delivery. Please <a href="javascript:window.location.reload();" style="color:#fff;text-decoration:underline;">reload the page</a> and try again. If the situation has not changed, please contact support <a href="mailto:team@tilda.cc?subject=Unable to get a postal code for street" style="color:#fff;text-decoration:underline;">team@tilda.cc</a>.',tcart__errorHandler.show("Request failed: "+t),window.tcart.emptyDeliveryServices=!0,tcart__updateDelivery()}})}))};n.getDeliveryPrice({projectId:n.deliveryState.projectId,postalCode:t,serviceId:r,pickupPointId:i,onDone:o,onFail:s})},choseSearchListItemHandler:function e(t,r){var i=t.getAttribute("id"),a=t.querySelector(".searchbox-input"),n=t.querySelector(".t-input-description"),o=t.querySelector(".searchbox-list"),s=t.querySelectorAll(".searchbox-list-item"),d,c=this,l,u=a.closest(".t-input-block");window.tcart__inputErrorHandler.hide(a);var p=!1;function v(e){var t;try{(t=e.response.GeoObjectCollection.featureMember[0].GeoObject.Point.pos.split(" "))&&(t=[t[1],t[0]],c.deliveryState.cityCoordinates=t)}catch(r){console.error(r)}}"click mousedown".split(" ").forEach((function(e){Array.prototype.forEach.call(s,(function(s){s.addEventListener(e,(function(e){if(!p){switch(p=!0,tcart__blockSubmitButton(),u.classList.remove("active"),clearTimeout(c.deliveryState.focusoutTimers[i]),d=e.target.dataset.postalcode,c.deliveryState.postalCode=d,c.setPostalCodeInput(d),c.deliveryState.searchboxes[i]||(c.deliveryState.searchboxes[i]={}),r){case"city":var s;a.classList.add("load"),a.readOnly=!0,tcart__errorHandler.hide(),a.value=e.target.dataset.name,n.innerHTML=e.target.dataset.fullName,document.querySelector('.t706 [name="tildadelivery-country"]').value=e.target.dataset.countryIso,a.setAttribute("data-guid",e.target.dataset.guid),c.deliveryState.ymapApiKey&&e.target.dataset.name&&c.getCityCoordinates("yandex",e.target.dataset.name,v),c.deliveryState.searchboxes[i].address={name:e.target.dataset.name,postalCode:d,guid:e.target.dataset.guid},c.deliveryState.city={name:e.target.dataset.name,fullName:e.target.dataset.fullName,postalCode:d,guid:e.target.dataset.guid,hasStreets:"true"===e.target.dataset.hasStreets,hasHousesWithoutStreets:"true"===e.target.dataset.hasHousesWithoutStreets},c.deliveryState.city.postalCode=d;for(var y=c.deliveryState.autocompleteData.cities.length,h=0;h<y;h++)if(c.deliveryState.autocompleteData.cities[h].guid===e.target.dataset.guid){s=c.deliveryState.autocompleteData.cities[h];break}c.deliveryState.geoData=s,c.deliveryState.cityGuid=e.target.dataset.guid,c.deliveryState.streetGuid=null,document.getElementById("delivery-services-wrapper").innerHTML="",window.t_delivery__autocompleteFields.clearState(),c.renderServices(),o.style.display="none";break;case"street":l=parseInt(a.getAttribute("data-service-id"),10),a.value=e.target.dataset.shortname,a.setAttribute("data-guid",e.target.dataset.guid),d=d||c.deliveryState.city.postalCode,c.deliveryState.searchboxes[i].address={name:e.target.dataset.name,shortName:e.target.dataset.shortname,postalCode:d,guid:e.target.dataset.guid},c.deliveryState.streetGuid=e.target.dataset.guid,c.clearHouseInput(),window.tcart.emptyDeliveryServices=!0,tcart__updateDelivery(),c.updateDeliveryPrice(d,l),o.innerHTML="";break;case"pickup":var m=e.target.dataset.coordinates.split(",");c.hidePaymentMethod(e.target);var f=e.target.dataset.name||e.target.dataset.address;c.changePickupHandler(e.target.dataset.pickupid,f,d,t,e.target.dataset.address,m),c.deliveryState.searchboxes[i].address={name:f,pickupid:e.target.dataset.pickupid,postalCode:d},c.deliveryState.pickupPointId=e.target.dataset.pickupid,c.showPickupInfo(e.target.dataset.pickupid,t),o.innerHTML="";break;case"house":l=parseInt(a.getAttribute("data-service-id"),10),a.value=e.target.dataset.name,d=d||c.deliveryState.city.postalCode,c.deliveryState.searchboxes[i].address={postalCode:d},window.tcart.emptyDeliveryServices=!0,tcart__updateDelivery(),c.updateDeliveryPrice(d,l),o.innerHTML=""}var _;a.setAttribute("data-option-selected",!0),t_triggerEvent(a,"input"),setTimeout((function e(){p=!1}),200)}}),!1)}))}))},focusoutSearchboxInputHandler:function e(t,r){var i=this,a,n=t.querySelector(".searchbox-list"),o=t.querySelector(".t-input-description"),s=t.getAttribute("id"),d=t.querySelector(".searchbox-input"),c=d.closest(".t-input-block"),l,u=parseInt(d.getAttribute("data-service-id"),10),p;u&&""!==n.innerHTML?(p=this.deliveryState.services[u].strongAddress,this.deliveryState.city.hasHousesWithoutStreets&&(p=!1),d.setAttribute("data-option-selected",!1)):d.setAttribute("data-option-selected",!0),this.deliveryState.focusoutTimers[s]=setTimeout((function(){if(c.classList.remove("active"),i.deliveryState.searchboxes[s]&&i.deliveryState.searchboxes[s].address)return window.tcart__inputErrorHandler.hide(d),void("city"===r?n.style.display="none":n.innerHTML="");switch(r){case"city":if(i.deliveryState.searchboxes[s]&&i.deliveryState.searchboxes[s].autocompleteAddress&&d.value===i.deliveryState.searchboxes[s].autocompleteAddress.name){var e;d.classList.add("load"),d.readOnly=!0,l=i.deliveryState.searchboxes[s].autocompleteAddress,i.deliveryState.searchboxes[s].address=l,window.tcart__inputErrorHandler.hide(d),i.deliveryState.ymapApiKey&&l.name&&i.getCityCoordinates("yandex",l.name,(function(e){var t;try{(t=e.response.GeoObjectCollection.featureMember[0].GeoObject.Point.pos.split(" "))&&(t=[t[1],t[0]],i.deliveryState.cityCoordinates=t)}catch(r){console.error(r)}})),a=l.postalCode,i.deliveryState.postalCode=a,i.setPostalCodeInput(a),document.querySelector('[name="tildadelivery-country"]').value=l.countryIso,d.value=l.name,o.innerHTML=l.fullName,d.setAttribute("data-guid",l.guid),i.deliveryState.city.name=l.name,i.deliveryState.city.fullName=l.fullName,i.deliveryState.city.postalCode=a,i.deliveryState.city.guid=l.guid,i.deliveryState.city.postalCode=a,i.deliveryState.cityGuid=l.guid,i.deliveryState.streetGuid=null;for(var v=i.deliveryState.autocompleteData.cities.length,y=0;y<v;y++)if(i.deliveryState.autocompleteData.cities[y].guid===l.guid){e=i.deliveryState.autocompleteData.cities[y];break}i.deliveryState.geoData=e,n.style.display="none",i.renderServices(),d.setAttribute("data-option-selected",!0)}else{n.innerHTML="";var h=document.getElementById("addresses-wrapper");h&&h.parentNode&&h.parentNode.removeChild(h),d.setAttribute("data-option-selected",!1),i.deliveryState.streetGuid=null,window.tcart__inputErrorHandler.show(d,t_delivery__dict("selectCity"))}document.getElementById("delivery-services-wrapper").innerHTML="";break;case"street":i.deliveryState.searchboxes[s]&&i.deliveryState.searchboxes[s].autocompleteAddress&&d.value===i.deliveryState.searchboxes[s].autocompleteAddress.shortName?(l=i.deliveryState.searchboxes[s].autocompleteAddress,i.deliveryState.searchboxes[s].address=l,window.tcart__inputErrorHandler.hide(d),a=l.postalCode,i.deliveryState.postalCode=a,d.value=l.shortName,d.setAttribute("data-guid",l.guid),i.deliveryState.streetGuid=l.guid,i.setPostalCodeInput(a),d.setAttribute("data-option-selected",!0),n.innerHTML="",i.updateDeliveryPrice(a,u)):(p&&(d.setAttribute("data-option-selected",!1),n.innerHTML="",window.tcart__inputErrorHandler.show(d,t_delivery__dict("selectAddress"))),i.deliveryState.city.hasHousesWithoutStreets&&(d.removeAttribute("data-guid"),i.deliveryState.streetGuid=null,window.t_delivery__userFieldsAutoComplete&&(window.t_delivery__userFieldsAutoComplete.street=""),tcart__unblockSubmitButton()),n.innerHTML=""),i.clearHouseInput();break;case"house":i.deliveryState.searchboxes[s]&&i.deliveryState.searchboxes[s].autocompleteAddress&&d.value===i.deliveryState.searchboxes[s].autocompleteAddress.name?(l=i.deliveryState.searchboxes[s].autocompleteAddress,i.deliveryState.searchboxes[s].address=l,window.tcart__inputErrorHandler.hide(d),a=l.postalCode,i.deliveryState.postalCode=a,d.val(l.name),d.setAttribute("data-option-selected",!0),i.setPostalCodeInput(a),n.innerHTML="",i.updateDeliveryPrice(a,u)):(n.innerHTML="",i.deliveryState.city.hasHousesWithoutStreets&&window.tcart__inputErrorHandler.show(d,t_delivery__dict("selectAddress")));break;case"pickup":n.innerHTML="";var m=null,f=null;i.deliveryState.searchboxes[s]&&i.deliveryState.searchboxes[s].autocompleteAddress&&(m=i.deliveryState.searchboxes[s].autocompleteAddress,l=m,m.forEach((function(e){e.name===d.value&&(f=e)}))),m&&f?(l=f,i.deliveryState.searchboxes[s].address=l,window.tcart__inputErrorHandler.hide(d),d.setAttribute("data-option-selected",!0),i.changePickupHandler(l.id,l.name,l.postalCode,t,l.address,l.coordinates),i.setPostalCodeInput(l.postalCode),i.deliveryState.pickupPointId=l.id,i.deliveryState.postalCode=l.postalCode,n.innerHTML=""):(d.setAttribute("data-option-selected",!1),d.removeAttribute("data-pickup-id"),d.removeAttribute("data-pickup-address"),d.removeAttribute("data-delivery-price"),delete i.deliveryState.pickupPointId,window.tcart__inputErrorHandler.show(d,t_delivery__dict("selectAddress")))}}),200)},fillSearchList:function e(t,r,i){var a=document.createElement("div"),n,o,s;r.forEach((function(e){var t=document.createElement("div");switch(t.classList.add("searchbox-list-item"),t.classList.add("t-text"),i){case"pickup":o=e.name,s=e.address;var r="";e.cash&&"n"===e.cash&&(r+="cash"),t.dataset.restrictions=r;break;case"address":if(e.fullName){o=e.fullName.split(",").reverse()[0];var d=e.fullName;(d=d.split(",").reverse()).shift(),d=d.join(", "),s=d}else o=e.name,s=""}t.dataset.name=e.name,t.dataset.fullName=e.fullName||"",t.dataset.postalcode=e.postalCode,t.dataset.guid=e.guid||"",t.dataset.pickupid=e.id||"",t.dataset.shortname=e.shortName||"",t.dataset.address=e.address||"",t.dataset.hasStreets=e.hasStreets,e.hasHousesWithoutStreets&&(t.dataset.hasHousesWithoutStreets=!0),t.dataset.coordinates=e.coordinates||"",t.dataset.countryIso=e.countryIso||"";var c=document.createElement("div");c.classList.add("searchbox-list-item-text"),c.appendChild(document.createTextNode(o)),t.appendChild(c),(n=document.createElement("div")).classList.add("searchbox-list-item-description"),n.appendChild(document.createTextNode(s)),t.appendChild(n),a.appendChild(t)})),t.innerHTML="",t.appendChild(a),t.scrollTop=0},showPickupInfo:function e(t,r){var i=r.querySelector(".searchbox-info"),a=this.deliveryState.pickupList.find((function(e){return e.id==t}));if(a){r.classList.add("show-info");var n=a.name,o=a.address||"",s=a.workTime||"",d=a.phones||"",c=a.addressComment||"",l="";l+='<p style="font-weight: 400; margin-bottom: 15px;" class="t-text">'+t_delivery__dict("pickup")+":</p>",l+='<p class="t-text">'+n+"</p>",l+='<p class="t-text">'+t_delivery__dict("address")+": "+o+"</p>",c&&(l+='<p class="t-text" style="opacity: 0.6; line-height: 22px; font-size: .9rem;">'+c+"</p>"),l+=s?'<p class="t-text">'+t_delivery__dict("workingHours")+": "+s+"</p>":"",d.length&&(l+=d.length>1?'<p class="t-text">'+t_delivery__dict("phones")+": "+d.join(", ")+"</p>":'<p class="t-text">'+t_delivery__dict("phone")+": "+d.join(", ")+"</p>"),l+='<span style="border-bottom: 1px dashed #000; font-weight: 400; margin-top: 10px; display: inline-block; cursor: pointer;" class="t-text searchbox-change-pickup">'+t_delivery__dict("change")+"</span>",i.innerHTML=l}},hidePickupInfo:function e(){var t=document.querySelector(".t706 #pickup-searchbox");if(t){var r=t.querySelector(".searchbox-info");t.classList.remove("show-info"),r.innerHTML=""}},renderServices:function e(t){this.deliveryState.services={},this.deliveryState.postalCode={};var r=document.getElementById("delivery-services-wrapper");r&&(r.innerHTML="");var i=document.getElementById("addresses-wrapper");i&&i.parentNode&&i.parentNode.removeChild(i);var a=this.deliveryState.city.postalCode||"",n=this,o=this.deliveryState.currencyCode,s=document.querySelector(".t706 #city-searchbox input"),d=document.querySelector(".t706"),c=d.querySelector(".t-radio__wrapper-delivery"),l=function e(i){if(window.tcart__unblockCartUI(),i.error){var a,o,c=window.t_delivery__browserLang.toLowerCase(),l=(null==(a=i.userFriendlyError)?void 0:a[c])||(null==(o=i.userFriendlyError)?void 0:o.en)||"";return window.tcart.emptyDeliveryServices=!0,tcart__errorHandler.show(l||i.error),s.classList.remove("load"),s.readOnly=!1,void tcart__updateDelivery()}0===i.length?(window.tcart.emptyDeliveryServices=!0,n.deliveryState.activeServiceUid=null,tcart__errorHandler.show(t_delivery__dict("deliveryNotPossible")),s.classList.remove("load"),s.readOnly=!1):window.tcart.emptyDeliveryServices=!1;var u=document.querySelectorAll(".t706 #delivery-services-wrapper .t-radio__control");if(Array.prototype.forEach.call(u,(function(e){e&&e.parentNode&&e.parentNode.removeChild(e)})),Array.isArray(i)){var p=[];i.forEach((function(e){p.push(parseInt(e.id,10))}));var v,y=n.deliveryState.activeServiceUid;-1===p.indexOf(y)&&(n.showSavedAddressesUnavailableMessage(),n.clearAddressSelect(),n.deliveryState.activeServiceUid=null),i.forEach((function(e,t){if(e.currency&&e.currency!==n.deliveryState.currencyCode)return console.error(e.title+": wrong delivery currency ("+e.currency+")"),void(i.length===t+1&&(s.classList.remove("load"),s.readOnly=!1));n.deliveryState.services[e.id]=tcart__mapDeliveryService(e);var r="";"n"===e.cash&&(r+="cash");var a=!1;0===t&&(a=!0);var o=n.createRadio({title:e.title,minimumTime:e.minimumDeliverTime,minimumPrice:e.minimumPrice,staticPrice:e.staticPrice,deliveryType:e.type,serviceId:e.id,hint:e.hint,hash:e.hash,restrictions:r,checkedStatus:a,freeDeliveryThreshold:e.freeDeliveryThreshold});document.getElementById("delivery-services-wrapper").appendChild(o)}))}tcart__updateDelivery(),n.changeDeliveryTypeListener(),t_triggerEvent(r,"renderDeliveryServices");var h=document.getElementById("delivery-services-wrapper").querySelector('input[name="tildadelivery-type"]:checked');h&&t_triggerEvent(h,"change"),tcart__showDeliveryPrice(),"function"==typeof t&&t(),d.removeEventListener("input",n.onAddressChange),d.addEventListener("input",n.onAddressChange)};n.getServices(n.deliveryState.projectId,a,o,l,(function(e){if(0===n.deliveryState.badResponseCounters.services)return n.deliveryState.badResponseCounters.services++,void setTimeout((function(){n.renderServices()}),2500);n.deliveryState.badResponseCounters.services>0&&n.changeEndpoint(e,(function(){n.getServices(n.deliveryState.projectId,a,o,l,(function(){window.tcart__preloader.hide(),n.showUnavailableMessage(c)}))}),(function(){window.tcart__preloader.hide(),n.showUnavailableMessage(c)}))}))},getCityFromGeoWithFailHandler:function e(){var t=tcart_newDelivery;return new Promise((function(e,r){var i=document.querySelector(".t706");if(i){var a=i.querySelector(".t-radio__wrapper-delivery"),n=function e(i){t.showUnavailableMessage(a),r("Error getting city from Geo: "+i+"}")};t.getCityFromGeo(t.deliveryState.projectId,e,(function(r){return t.changeEndpoint(r,(function(){return t.getCityFromGeo(t.deliveryState.projectId,e,n)}),n)}))}else r("No cart element")}))},getCityFromGeo:function e(t,r,i){window.t_delivery__lang.clearLang();var a={projectId:t,lang:window.t_delivery__lang.lang};if(!window.dev){var n=sessionStorage.getItem("tCityFromGeo");if(null!==n)try{return void r(JSON.parse(n))}catch(u){}}var o,s=document.getElementById("allrecords").getAttribute("data-tilda-root-zone");s&&(a.rz=s),a=JSON.stringify(a);var d=new XMLHttpRequest;if(d.onload=function(){d.readyState===d.DONE&&200===d.status&&(window.dev||sessionStorage.setItem("tCityFromGeo",d.responseText),r(JSON.parse(d.responseText)))},"function"==typeof i){var c=function e(t){d.isTimeout="timeout"===t.type,i(d)};d.ontimeout=c,d.onerror=c}var l=this;l.endpointDelivery||(l.endpointDelivery=".tildacdn.com"),d.open("POST","https://geoserv"+l.endpointDelivery+"/api/detect-city/"),d.timeout=3e4,d.send(a)},getPayTypes:function e(){var t=document.getElementById("customdelivery"),r;if(t&&(r=t.getAttribute("data-paytypes")),!t)return null;if(r)try{r=JSON.parse(r)}catch(n){}if(!r||"object"!=typeof r&&"function"!=typeof r){r={};var i=document.querySelectorAll(".t706 input[name=paymentsystem]");if(Array.prototype.forEach.call(i,(function(e){"cash"===e.value?r.cash="y":"banktransfer"===e.value?r.banktransfer="y":r.card="y"})),!r.card&&!r.cash&&!r.banktransfer){var a=document.querySelector(".t706").getAttribute("data-payment-system");"cash"==a?r.cash="y":"banktransfer"==a?r.banktransfer="y":a&&""!=a&&"none"!=a?r.card="y":r.none="y"}t.setAttribute("data-paytypes",JSON.stringify(r))}return r},getServices:function e(t,r,i,a,n){tcart__blockSubmitButton(),this.updateTotal();var o=window.tcart.total||0;if(void 0===o||o<1)a({error:new Error("RU"===window.t_delivery__browserLang?"добавьте в корзину хотя бы один товар":"add at least one product")});else{var s=window.tcart.prodamount||0;window.tcart.prodamount_withdiscount||0===window.tcart.prodamount_withdiscount?s=window.tcart.prodamount_withdiscount:window.t_cart__discounts&&window.t_cart__discounts.length>0&&void 0!==window.tcart.prodamount_withdyndiscount&&(s=window.tcart.prodamount_withdyndiscount);var d=this.removeEmptyOrDeletedProducts(),c=document.getElementById("delivery-services-wrapper");c&&(c.style.display="none",window.tcart__preloader.show(c,t_delivery__dict("loadingServices"))),tcart__hideDeliveryPrice();var l={action:"list",projectId:t,postalCode:r||0,currency:i,itemsCount:o,cartAmount:s,geoData:this.deliveryState.geoData||{},products:d,paytypes:this.getPayTypes()},u=document.getElementById("allrecords"),p=u.getAttribute("data-tilda-project-lang");p&&(l.lang=p);var v=u.getAttribute("data-tilda-root-zone");v&&(l.rz=v),l=JSON.stringify(l);var y=new XMLHttpRequest;if(y.onload=function(){window.tcart__preloader.hide(),c&&(c.style.display=""),y.readyState===y.DONE&&200===y.status&&a(JSON.parse(y.responseText))},"function"==typeof n){var h=function e(t){y.isTimeout="timeout"===t.type,n(y)};y.ontimeout=h,y.onerror=h}var m=this;m.endpointDelivery||(m.endpointDelivery=".tildacdn.com"),y.open("POST","https://delivery"+m.endpointDelivery+"/cart-api/"),y.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8"),y.timeout=3e4,y.send(l)}},getPickupList:function e(t){tcart__blockSubmitButton(),this.updateTotal();var r=window.tcart.total||0;if(void 0===r||r<1)t.onDone({error:new Error("RU"===window.t_delivery__browserLang?"добавьте в корзину хотя бы один товар":"add at least one product")});else{var i=window.tcart.prodamount||0;window.tcart.prodamount_withdiscount||0===window.tcart.prodamount_withdiscount?i=window.tcart.prodamount_withdiscount:window.t_cart__discounts&&window.t_cart__discounts.length>0&&void 0!==window.tcart.prodamount_withdyndiscount&&(i=window.tcart.prodamount_withdyndiscount);var a=this.removeEmptyOrDeletedProducts(),n={action:"pickup-list",projectId:t.projectId,postalCode:t.postalCode||0,deliveryId:t.deliveryId,pattern:t.pattern,itemsCount:r,cartAmount:i,geoData:this.deliveryState.geoData||{},products:a,paytypes:this.getPayTypes()},o=document.getElementById("allrecords"),s=o.getAttribute("data-tilda-project-lang");s&&(n.lang=s);var d=o.getAttribute("data-tilda-root-zone");d&&(n.rz=d),n=JSON.stringify(n);var c=new XMLHttpRequest;if(c.onload=function(){c.readyState===c.DONE&&200===c.status&&t.onDone(JSON.parse(c.responseText)),tcart__updateDelivery()},"function"==typeof t.onFail){var l=function e(r){c.isTimeout="timeout"===r.type,t.onFail(c)};c.ontimeout=l,c.onerror=l}var u=this;u.endpointDelivery||(u.endpointDelivery=".tildacdn.com"),c.open("POST","https://delivery"+u.endpointDelivery+"/cart-api/"),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8"),c.timeout=3e4,c.send(n)}},getDeliveryPrice:function e(t){var r;tcart__hideDeliveryPrice(),tcart__blockSubmitButton(),this.updateTotal();var i=window.tcart.total||0;if(void 0===i||i<1)t.onDone({error:new Error("RU"===window.t_delivery__browserLang?"добавьте в корзину хотя бы один товар":"add at least one product")});else{var a=window.tcart.prodamount||0;window.tcart.prodamount_withdiscount||0===window.tcart.prodamount_withdiscount?a=window.tcart.prodamount_withdiscount:window.t_cart__discounts&&window.t_cart__discounts.length>0&&void 0!==window.tcart.prodamount_withdyndiscount&&(a=window.tcart.prodamount_withdyndiscount);var n=this.removeEmptyOrDeletedProducts(),o={action:"calculate",projectId:t.projectId,postalCode:t.postalCode,deliveryId:t.serviceId,currency:this.deliveryState.currencyCode,itemsCount:i,cartAmount:a,pickupPointId:t.pickupPointId,products:n,guid:this.deliveryState.cityGuid||0};null!=(r=window.tcart)&&r.delivery&&(o.address={city:window.tcart.delivery.city||"",street:window.tcart.delivery.street||"",house:window.tcart.delivery.house||""}),o=JSON.stringify(o);var s=new XMLHttpRequest;if(s.onload=function(){s.readyState===s.DONE&&200===s.status&&t.onDone(JSON.parse(s.responseText)),tcart__updateDelivery()},"function"==typeof t.onFail){var d=function e(r){s.isTimeout="timeout"===r.type,t.onFail(s)};s.ontimeout=d,s.onerror=d}var c=this;c.endpointDelivery||(c.endpointDelivery=".tildacdn.com"),s.open("POST","https://delivery"+c.endpointDelivery+"/cart-api/"),s.timeout=3e4,s.send(o)}},getCityCoordinates:function e(t,r,i){var a=new XMLHttpRequest;a.onload=function(){a.readyState===a.DONE&&200===a.status&&i(JSON.parse(a.responseText))},a.open("GET","https://geocode-maps.yandex.ru/1.x/?apikey="+this.deliveryState.ymapApiKey+"&format=json&geocode="+r),a.timeout=3e4,a.send()},getAddresses:function e(t,r,i,a){var n=this,o=t;n.deliveryState.currentRequest&&n.deliveryState.currentRequest.abort(),n.endpointDelivery||(n.endpointDelivery=".tildacdn.com");var s={street:"https://geoserv"+n.endpointDelivery+"/api/address/",city:"https://geoserv"+n.endpointDelivery+"/api/city/",pickup:"https://delivery"+n.endpointDelivery+"/cart-api/",house:"https://geoserv"+n.endpointDelivery+"/api/house/"},d="";try{var c=JSON.parse(o);if(c.lang=window.t_delivery__lang.lang,d="t"+r+"_"+c.lang+"_"+c.pattern.toLowerCase(),void 0!==c.fias&&(d+="_"+c.fias),void 0===window.dev){var l=sessionStorage.getItem(d);if(null!==l)try{return void i(JSON.parse(l))}catch(h){}}var u,p=document.getElementById("allrecords").getAttribute("data-tilda-root-zone");p&&(c.rz=p,o=JSON.stringify(c))}catch(h){}var v=new XMLHttpRequest;if(v.onload=function(){v.readyState===v.DONE&&200===v.status&&(window.dev||sessionStorage.setItem(d,v.responseText),i(JSON.parse(v.responseText))),tcart__updateDelivery(),n.deliveryState.currentRequest=null},"function"==typeof a){function y(e){v.isTimeout="timeout"===e.type,a(v),n.deliveryState.currentRequest=null}v.ontimeout=y,v.onerror=y}s[r]&&v.open("POST",s[r]),v.timeout=3e4,v.send(o),n.deliveryState.currentRequest=v},createInput:function e(t,r,i,a,n,o,s,d,c,l,u,p,v){var y=r||"",h=i||"",m=o||"",f=t||"",_=p||"",S=v||"",w=u?1:0,g=s+" t-input"||"t-input",b=document.createElement("div");b.classList.add("t-input-group"),b.classList.add("t-input-group_in"),l&&(b.style.cssText=l),c&&b.setAttribute("hidden",""),b.setAttribute("data-input-lid","");var A=document.createElement("div");A.classList.add("t-input-title"),A.classList.add("t-descr"),A.classList.add("t-descr_md"),A.setAttribute("data-redactor-toolbar","no"),A.setAttribute("field",""),A.appendChild(document.createTextNode(y)),b.appendChild(A);var L=document.createElement("div");L.classList.add("t-input-block");var E=document.createElement("input");if(g.split(" ").forEach((function(e){""!==e&&E.classList.add(e)})),S&&E.setAttribute("data-tilda-rule",S),_&&E.setAttribute("inputmode",_),f&&E.setAttribute("type",f),E.setAttribute("data-service-id",m),E.name=d.toLowerCase(),E.value=a||"",E.placeholder=h,E.autocomplete=-1!==navigator.userAgent.search(/Chrome/)?"no":"off",E.setAttribute("data-tilda-req",w),E.dataset.tildaReq=w,L.appendChild(E),"hidden"!==f){var x=document.createElementNS("http://www.w3.org/2000/svg","svg");x.setAttribute("viewBox","0 0 88 88"),x.classList.add("t706__search-icon");var C=document.createElementNS("http://www.w3.org/2000/svg","path");C.setAttribute("d","M85 31.1c-.5-8.7-4.4-16.6-10.9-22.3C67.6 3 59.3 0 50.6.6c-8.7.5-16.7 4.4-22.5 11-11.2 12.7-10.7 31.7.6 43.9l-5.3 6.1-2.5-2.2-17.8 20 9 8.1 17.8-20.2-2.1-1.8 5.3-6.1c5.8 4.2 12.6 6.3 19.3 6.3 9 0 18-3.7 24.4-10.9 5.9-6.6 8.8-15 8.2-23.7zM72.4 50.8c-9.7 10.9-26.5 11.9-37.6 2.3-10.9-9.8-11.9-26.6-2.3-37.6 4.7-5.4 11.3-8.5 18.4-8.9h1.6c6.5 0 12.7 2.4 17.6 6.8 5.3 4.7 8.5 11.1 8.9 18.2.5 7-1.9 13.8-6.6 19.2z"),C.setAttribute("fill","#3f3f3f"),x.appendChild(C),L.appendChild(x);var I=document.createElement("div");I.classList.add("t-input-clear"),L.appendChild(I)}var k=document.createElement("div");k.classList.add("t-input-description"),k.classList.add("t-text"),k.classList.add("t-text_xs"),k.style.cssText="color: #505050; margin: 5px 0 0;",L.appendChild(k);var T=document.createElement("div");return T.classList.add("t-input-error"),L.appendChild(T),b.appendChild(L),b},createRadio:function e(t){var r=t.title||"",i=t.minimumTime||"",a=t.minimumPrice||"",n=t.staticPrice||0,o=t.deliveryType,s=t.serviceId,d=t.hint||"",c=t.hash||"",l=t.restrictions||"",u=t.checkedStatus,p=t.freeDeliveryThreshold||"",v=(t.classes||"")+" t-radio__control t-text t-text_xs",y=document.createElement("label");y.setAttribute("data-service-id",s),v.split(" ").forEach((function(e){""!==e&&y.classList.add(e)}));var h=document.createElement("input"),m,f=tcart_newDelivery.deliveryState.activeServiceUid,_=f===parseInt(t.serviceId,10);(u&&!f||_)&&(h.checked=!0),h.setAttribute("data-delivery-price",a),l&&(h.dataset.restrictions=l),p&&h.setAttribute("data-free-delivery-threshold",p),c&&h.setAttribute("data-hash-value",c),(n||0==n)&&(h.setAttribute("data-delivery-price",n),h.setAttribute("data-static-price",n)),h.setAttribute("data-service-id",t.serviceId),h.setAttribute("data-delivery-type",o),h.setAttribute("type","radio"),h.setAttribute("name","tildadelivery-type"),h.classList.add("t-radio"),h.classList.add("t-radio_delivery"),h.classList.add("js-tilda-rule"),h.setAttribute("data-tilda-req",1),h.dataset.tildaReq=1,h.setAttribute("value",r),d&&h.setAttribute("data-hint-text",d),y.appendChild(h);var S=document.createElement("div");S.classList.add("t-radio__indicator"),S.style.cssText="border-color: #000;",y.appendChild(S);var w=document.createElement("span");w.classList.add("delivery-checkbox-label"),w.appendChild(document.createTextNode(t_delivery__replaceUnicode(r))),y.appendChild(w);var g=t_delivery__declensionOfNumber(i),b;return i&&((b=document.createElement("span")).classList.add("delivery-minimum-time"),b.innerHTML=t_delivery__dict("from")+" "+i+" "+g,y.appendChild(b)),n?((b=document.createElement("span")).classList.add("delivery-minimum-price"),b.innerHTML=t_delivery__showPrice(n),y.appendChild(b)):a&&((b=document.createElement("span")).classList.add("delivery-minimum-price"),b.innerHTML=t_delivery__dict("from")+" "+t_delivery__showPrice(a),y.appendChild(b)),y},createTitle:function e(t,r){var i=document.createElement("div");return i.style.margin="20px 0",i.classList.add("t-name"),i.classList.add("t-name_md"),(r||"").split(" ").forEach((function(e){""!==e&&i.classList.add(e)})),i.appendChild(document.createTextNode(t||"")),i},createSelect:function e(t,r,i,a,n){var o="";return o+='<label class="t-input-title t-descr t-descr_md">Пункт выдачи</label>',o+='<div class="ss-select delivery-pickup-select">',o+='<select class="ss-input ss-select delivery-select" data-service-id="'+a+'" name="'+n+'">',o+='<option data-point-id="">Не выбран</option>',i.forEach((function(e){o+="<option data-point-id="+e.id+">"+e.address+"</option>"})),o+="</select>",o+="</div>"},changeDeliveryTypeListener:function e(){var t=this,r=document.querySelectorAll(".t706 input[data-delivery-type]");Array.prototype.forEach.call(r,(function(e){e.addEventListener("change",(function(){var e=parseInt(this.getAttribute("data-service-id"),10)||0,r=parseInt(this.getAttribute("data-free-delivery-threshold"),10);t.deliveryState.freeDeliveryThreshold=r||0,t.deliveryState.activeServiceUid=e,tcart__errorHandler.hide(),t.renderAddressFields(this),this.dataset.hashValue&&t.setHashInput(this.dataset.hashValue),t.hidePaymentMethod(this);var i=document.querySelectorAll(".t706 input[data-delivery-type]");Array.prototype.forEach.call(i,(function(e){var t=e.getAttribute("data-static-price")||e.getAttribute("data-delivery-price");t>0?e.setAttribute("data-delivery-price",t):e.setAttribute("data-delivery-price","")})),t.hints.deleteAll(),t.deliveryState.searchboxes["pickup-searchbox"]&&(t.deliveryState.searchboxes["pickup-searchbox"]=null),this.getAttribute("data-hint-text")&&t.hints.render(this.getAttribute("data-hint-text")),tcart__updateDelivery()}),!1)}))},hidePaymentMethod:function e(t){var r=document.querySelector('.t706 [data-payment-variant-system="cash"]');if(r){var i=r.parentNode,a,n=i.closest(".t-radio__wrapper-payment").querySelector('[data-payment-variant-system]:not([data-payment-variant-system="cash"])');"cash"===t.dataset.restrictions&&r?(i.style.display="none",n.checked=!0,n&&t_triggerEvent(n,"change")):i.style.display=""}},removePriceValueInRadio:function e(t){var r=document.querySelector('.t706 input.t-radio_delivery[data-service-id="'+t+'"]');r&&(r.removeAttribute("data-delivery-price"),tcart__updateDelivery(),tcart__hideDeliveryPrice())},updatePriceValueInRadio:function e(t,r){var i=document.querySelector('.t706 input.t-radio_delivery[data-service-id="'+r+'"]'),a=document.querySelector('.t706 input.t-radio_delivery[data-service-id="'+r+'"] ~ span.delivery-minimum-price');i&&(i.setAttribute("data-delivery-price",t),tcart__updateDelivery(),tcart__showDeliveryPrice()),a&&(a.innerHTML=t_delivery__showPrice(t))},changePickupHandler:function e(t,r,i,a,n,o){var s=a.querySelector(".searchbox-input"),d=s.getAttribute("data-service-id"),c=this,l;s.setAttribute("data-pickup-id",t),s.setAttribute("data-pickup-address",n),s.value=r,c.updateDeliveryPrice(i||this.deliveryState.city.postalCode,d,t),o&&(l=0==o[0]&&0==o[1]),o&&window.t_delivery__map&&!l&&window.t_delivery__map.setCenter(o,16)},renderRegionFields:function e(){var t=document.querySelector(".t-radio__wrapper-delivery"),r=this.createInput("",t_delivery__dict("city"),null,null,null,null,"searchbox-input load js-tilda-rule","tildadelivery-city",null,null,!0,null,"chosevalue"),i=this.createSearchbox(r,"city-searchbox"),a=this.createInput("","",null,null,null,null,"","tildadelivery-postalcode",!0),n=this.createInput("","hash",null,null,null,null,"","tildadelivery-hash",!0),o=this.createInput("","country",null,null,null,null,"","tildadelivery-country",!0);t.appendChild(a),t.appendChild(n),t.appendChild(o),t.appendChild(i),this.searchboxInit("city-searchbox","city");var s=document.createElement("div");s.id="delivery-services-wrapper",t.appendChild(s)},renderAddressFields:function e(t){this.disableChoseServiceControls(),tcart__blockSubmitButton();var r=this,i=document.getElementById("customdelivery"),a=t.getAttribute("data-service-id"),n=document.getElementById("addresses-wrapper");n&&n.parentNode&&n.parentNode.removeChild(n),i.setAttribute("data-service-id",a);var o=document.createElement("div");o.id="addresses-wrapper",i.appendChild(o);var s=t.getAttribute("data-delivery-type"),d=document.querySelector(".t706 #city-searchbox input");switch(s){case"pickup":window.tcart__preloader.show(document.getElementById("addresses-wrapper"),t_delivery__dict("loadingPickup")),window.tcart.emptyDeliveryServices=!1;var c="",l=document.querySelector('.t706 input.t-radio_delivery[data-service-id="'+a+'"]');l&&(c=l.dataset.restrictions||"");var u=function e(t){window.tcart__preloader.hide();var i=t;if(i.error){var s=window.t_delivery__browserLang.toLowerCase(),l="";return i.userFriendlyError&&(l=i.userFriendlyError[s]||i.userFriendlyError.en),tcart__errorHandler.show(l||i.error),window.tcart.emptyDeliveryServices=!0,r.enableChoseServiceControls(),d.classList.remove("load"),d.readOnly=!1,void tcart__updateDelivery()}i=i.map((function(e){return"cash"===c&&(e.cash="n"),e}));var u=document.getElementById("pickup-searchbox");u&&u.parentNode&&u.parentNode.removeChild(u);var p=r.createInput("",t_delivery__dict("pickup"),t_delivery__dict("selectPickup"),null,null,a,"searchbox-input js-tilda-rule","tildadelivery-pickup-name",null,null,!0,null,"chosevalue"),v=r.createSearchbox(p,"pickup-searchbox");if(n=document.getElementById("addresses-wrapper")){var y;if(n.appendChild(v),i.find((function(e){return e.id==window.t_delivery__userFieldsAutoComplete["pickup-id"]}))||(r.showSavedAddressesUnavailableMessage(),r.clearAddressSelect(),window.t_delivery__userFieldsAutoComplete["pickup-id"]="",window.t_delivery__userFieldsAutoComplete["pickup-address"]="",window.t_delivery__userFieldsAutoComplete["pickup-name"]=""),r.deliveryState.searchboxes["pickup-searchbox"]={},r.deliveryState.searchboxes["pickup-searchbox"].autocompleteAddress=i,r.deliveryState.pickupList=i,r.deliveryState.ymapApiKey&&r.mapInit("yandex"),r.searchboxInit("pickup-searchbox","pickup",null,i),r.renderUserFields(o,a),r.changeCartInputsHandler(),v||(v=document.querySelector(".t706 #pickup-searchbox")),r.deliveryState.ymapApiKey&&r.mapAddPoints("",i,v),1===i.length)try{var h=i[0],m=h.id,f=h.name||h.address,_=h.postalCode;""===_&&(_=r.deliveryState.city.postalCode),r.deliveryState.searchboxes["pickup-searchbox"].address={name:f,pickupid:m,postalCode:_},r.deliveryState.pickupPointId=m,r.deliveryState.postalCode=_,r.setPostalCodeInput(_),r.changePickupHandler(m,f,_,v,h.address,h.coordinates.join());var S=document.querySelector('.t706 [name="tildadelivery-pickup-name"]'),w;S&&(S.value=f),r.showPickupInfo(m,v),v.querySelector(".searchbox-input").setAttribute("data-option-selected",!0)}catch(g){console.error("Error: Failed to change pickup point",g)}r.enableChoseServiceControls(),d.classList.remove("load"),d.readOnly=!1}};r.getPickupList({projectId:r.deliveryState.projectId,postalCode:r.deliveryState.city.postalCode,deliveryId:a,onDone:u,onFail:function e(t){r.changeEndpoint(t,(function(){r.getPickupList({projectId:r.deliveryState.projectId,postalCode:r.deliveryState.city.postalCode,deliveryId:a,onDone:u})}))}});break;case"delivery":window.tcart.emptyDeliveryServices=!1,r.renderUserFields(o,a),r.changeCartInputsHandler(),r.enableChoseServiceControls(),d.classList.remove("load"),d.readOnly=!1}},clearHouseInput:function e(){var t=document.querySelector('.t706 #customdelivery [name="tildadelivery-house"]');t&&(t.value="")},renderUserFields:function e(t,r){var i=this,a=i.deliveryState.services[r].fields,n=0;for(var o in a)switch(o){case"street":case"comment":case"userInitials":break;default:n++}var s=0;for(var d in a){var c=a[d].autocomplete,l="",u="",p="",v="",y="",h=!0;switch(d){case"street":l=t_delivery__dict("street"),u="width: 100%",h=i.deliveryState.city.hasStreets,i.deliveryState.city.hasHousesWithoutStreets&&(h=!1);break;case"house":s++,l=t_delivery__dict("house"),h=i.deliveryState.city.hasStreets,i.deliveryState.city.hasHousesWithoutStreets&&(h=!0);break;case"entrance":s++,l=t_delivery__dict("entrance"),h=!1;break;case"floor":s++,l=t_delivery__dict("floor"),p="number",v="numeric",h=!1;break;case"aptOffice":s++,l=t_delivery__dict("apt"),h=!1;break;case"phone":s++,l=t_delivery__dict("phone"),p="number",v="numeric";break;case"entranceCode":s++,l=t_delivery__dict("entranceCode"),h=!1;break;case"comment":l=t_delivery__dict("comment"),u="width: 100%",h=!1,y=t_delivery__dict("orderComment");break;case"oneLineAddress":s++,l=t_delivery__dict("address");break;case"userInitials":u="width: 100%",l=t_delivery__dict("fullName"),y=t_delivery__dict("johnDoe")}n===s&&n%2!=0&&(u="width: 100%"),l=l||"";var m="tildadelivery-"+d,f="";if(c){h&&(f="chosevalue");var _=this.createInput(p,l,y,"","",r,"searchbox-input js-tilda-rule",m,!1,u,h,v,f),S=d+"-searchbox",w=this.createSearchbox(_,S);t.appendChild(w),this.searchboxInit(S,d)}else{"userInitials"===d&&(f="name");var g=this.createInput(p,l,y,"","",r,"js-tilda-rule",m,!1,u,h,v,f);t.appendChild(g)}}t_triggerEvent(t,"renderDeliveryAddresses"),this.restoreTcartDelivery()},hints:{render:function e(t){var r=document.getElementById("delivery-services-wrapper"),i=document.createElement("div"),a;"delivery-hint t-text t-text_xs".split(" ").forEach((function(e){i.classList.add(e)})),i.setAttribute("id","delivery-hint"),i.appendChild(document.createTextNode(t)),r.insertAdjacentElement("afterend",i)},deleteAll:function e(){var t=document.querySelector(".t706 .delivery-hint");t&&t.parentNode&&t.parentNode.removeChild(t)}},showUnavailableMessage:function e(t){var r=this.createInput("hidden","","","nodelivery",null,null,"js-tilda-rule","delivery-badresponse-comment",null,null,!0,"","deliveryreq");window.tcart&&(window.tcart.system="none");var i=document.createElement("div");i.style.cssText="margin: 20px 0; line-height: 22px; color: red;",i.classList.add("t-text"),i.appendChild(document.createTextNode(t_delivery__dict("unavailable"))),t.appendChild(i),t.appendChild(r)},updateTotal:function e(){void 0!==window.tcart.products&&0!==window.tcart.products.length||void 0===window.tcart__syncProductsObject__LStoObj||void 0===window.tcart__updateTotalProductsinCartObj||(tcart__syncProductsObject__LStoObj(),tcart__updateTotalProductsinCartObj())},removeEmptyOrDeletedProducts:function e(){var t=[];return window.tcart.products.forEach((function(e){"{}"!==JSON.stringify(e)&&"yes"!==e.deleted&&t.push(e)})),t},updateProjectId:function e(){var t=this,r=[document.getElementById("allrecords"),document.getElementById("t-header"),document.getElementById("t-footer")];Array.prototype.forEach.call(r,(function(e){e&&!parseInt(t.deliveryState.projectId,10)&&(t.deliveryState.projectId=parseInt(e.getAttribute("data-tilda-project-id"),10))}));var i=document.getElementById("tildacopy");i&&!parseInt(t.deliveryState.projectId,10)&&(t.deliveryState.projectId=parseInt((i.getAttribute("data-tilda-sign")||"").split("#")[0],10))},endpointDelivery:".tildacdn.com",changeEndpoint:function e(t,r,i){var a=this;"object"==typeof t&&(t.status>=500||408==t.status||410==t.status||429==t.status||t.isTimeout)&&".tildacdn.com"===a.endpointDelivery?(a.endpointDelivery="2.tildacdn.com","function"==typeof r&&r()):(t&&t.responseText?console.error("["+t.status+"] "+t.responseText+". Please, try again later."):t&&t.statusText?console.error("Error ["+t.status+", "+t.statusText+"]. Please, try again later."):t&&t.status?console.error("["+t.status+"] Unknown error. Please, try again later."):console.error("Unknown error. Please, try again later."),"function"==typeof i&&i())}};function tcart__hideDeliveryPrice(){var e=document.querySelector(".t706 .t706__cartwin-totalamount-info");e&&(e.style.opacity=0);var t=document.querySelector(".t706 .delivery-full-address");t&&(t.style.opacity=0)}function tcart__showDeliveryPrice(){var e=document.querySelector(".t706 .t706__cartwin-totalamount-info");e&&(e.style.opacity=1);var t=document.querySelector(".t706 .delivery-full-address");t&&(t.style.opacity=1)}function tcart__mapDeliveryService(e){return e?{fields:e.fields,strongAddress:e.strongAddress,type:e.type}:{}}function tcart__rerenderDeliveryServices(){clearTimeout(window.rerenderTimer),window.rerenderTimer=setTimeout((function(){tcart__blockSubmitButton(),window.tcart__blockCartUI();var e=!1,t=tcart_newDelivery,r=t.deliveryState,i=r.services,a=r.activeServiceUid,n=r.pickupPointId;if(!a)return window.tcart__unblockCartUI(),void(0===Object.keys(t.deliveryState.services).length&&t.renderServices());var o=[],s=[],d;if(Object.keys(i).forEach((function(e){o.push(parseInt(e,10))})),t.updateProjectId(),!parseInt(r.projectId,10))return d="RU"===window.t_delivery__browserLang?'Невозможно получить сервисы доставок. Пожалуйста, перезагрузите страницу и попробуйте еще раз. Если ситуация не изменилась, обратитесь в поддержку <a href="mailto:team@tilda.cc?subject=Unable to get delivery services" style="color:#fff;text-decoration:underline;">team@tilda.cc</a>.':'Unable to get a delivery services. Please <a href="javascript:window.location.reload();" style="color:#fff;text-decoration:underline;">reload the page</a> and try again. If the situation has not changed, please contact support <a href="mailto:team@tilda.cc?subject=Unable to get delivery services" style="color:#fff;text-decoration:underline;">team@tilda.cc</a>.',tcart__errorHandler.show(d),window.tcart.emptyDeliveryServices=!0,void tcart__updateDelivery();var c=function i(d){if(Array.isArray(d)&&(d.forEach((function(e){s.push(parseInt(e.id,10))})),s.sort((function(e,t){return e-t}))),o.sort((function(e,t){return e-t})),e=JSON.stringify(s)!==JSON.stringify(o))-1!==s.indexOf(a)?t.renderServices((function(){var e=document.querySelector('.t706 input[data-service-id="'+a+'"]');e.checked=!0,t_triggerEvent(e,"change")})):t.renderServices();else{var c=document.querySelectorAll(".t706 #delivery-services-wrapper .t-radio__control"),l;Array.prototype.forEach.call(c,(function(e){e&&e.parentNode&&e.parentNode.removeChild(e)})),Array.isArray(d)&&d.forEach((function(e){if(e.currency&&e.currency!==t.deliveryState.currencyCode)console.error(e.title+": wrong delivery currency ("+e.currency+")");else{t.deliveryState.services[e.id]=tcart__mapDeliveryService(e);var r="";"n"===e.cash&&(r+="cash");var i=!1;parseInt(e.id,10)===a&&(i=!0);var n=t.createRadio({title:e.title,minimumTime:e.minimumDeliverTime,minimumPrice:e.minimumPrice,staticPrice:e.staticPrice,deliveryType:e.type,serviceId:e.id,hint:e.hint,hash:e.hash,restrictions:r,checkedStatus:i,freeDeliveryThreshold:e.freeDeliveryThreshold});document.getElementById("delivery-services-wrapper").appendChild(n)}})),l="object"==typeof r.postalCode?r.city.postalCode:r.postalCode;var u,p=t.getInputValues().street;n||p?t.updateDeliveryPrice(l,a,n,(function(){tcart__updateDelivery(),t.changeDeliveryTypeListener()})):(tcart__updateDelivery(),t.changeDeliveryTypeListener(),tcart__showDeliveryPrice()),t.hideSavedAddressesUnavailableMessage()}window.tcart__unblockCartUI()};t.getServices(r.projectId,r.city.postalCode,r.currencyCode,c,(function(e){t.changeEndpoint(e,(function(){t.getServices(r.projectId,r.city.postalCode,r.currencyCode,c)}))}))}),500)}function t_delivery__dict(e){var t=[];t.address={EN:"Address",RU:"Адрес",FR:"Adresse",DE:"Adresse",ES:"Dirección",PT:"Endereço",JA:"住所",ZH:"地址",UK:"Адреса",PL:"Adres",KK:"Мекен-жай",IT:"Indirizzo",LV:"Adrese"},t.city={EN:"City",RU:"Город",FR:"Ville",DE:"Stadt",ES:"Ciudad",PT:"Cidade",JA:"市",ZH:"城市",UK:"Місто",PL:"Miasto",KK:"Қала",IT:"Città",LV:"Pilsēta"},t.street={EN:"Street",RU:"Улица",FR:"Rue",DE:"Straße",ES:"Calle",PT:"Rua",JA:"通り",ZH:"街道",UK:"Вулиця",PL:"Ulica",KK:"Көше",IT:"Strada",LV:"Iela"},t.house={EN:"House",RU:"Дом",FR:"Loger",DE:"Haus",ES:"Edificio №",PT:"Lar",JA:"家",ZH:"屋",UK:"Будинок",PL:"Budynek",KK:"Үй",IT:"Casa",LV:"Māja"},t.entrance={EN:"Entrance",RU:"Подъезд",FR:"Entrée",DE:"Eingang",ES:"Entrada",PT:"Entrada",JA:"エントランス",ZH:"入口",UK:"Під’їзд",PL:"Wejście",KK:"Кіру",IT:"Ingresso",LV:"Ieeja"},t.floor={EN:"Floor",RU:"Этаж",FR:"Étage",DE:"Fußboden",ES:"Planta",PT:"Andar",JA:"床",ZH:"地面",UK:"Поверх",PL:"Piętro",KK:"Еден",IT:"Pavimento",LV:"Stāvs"},t.apt={EN:"Apt/office",RU:"Квартира/офис",FR:"Apt/bureau",DE:"Apt/Büro",ES:"Piso/oficina",PT:"Apt/escritório",JA:"アプト/オフィス",ZH:"公寓/办公室",UK:"Квартира/офіс",PL:"Mieszkanie/lokal",KK:"Пәтер/кеңсе",IT:"Abitazione/ufficio",LV:"Dzīvoklis/birojs"},t.apt_short={EN:"apt.",RU:"кв/оф.",FR:"app.",DE:"whg.",ES:"apt.",PT:"apt.",JA:"部屋",ZH:"公寓",UK:"кв.",PL:"miesz.",KK:"пәт.",IT:"app.",LV:"dzīv."},t.phone={EN:"Phone",RU:"Телефон",FR:"Téléphoner",DE:"Telefon",ES:"Teléfono",PT:"Telefone",JA:"電話",ZH:"电话",UK:"Телефон",PL:"Telefon",KK:"Телефон",IT:"Telefono",LV:"Tālrunis"},t.phones={EN:"Phones",RU:"Телефоны",FR:"Téléphones",DE:"Telefone",ES:"Telefonos",PT:"Telefones",JA:"電話",ZH:"手机",UK:"Телефони",PL:"Telefony",KK:"Телефондар",IT:"Cellulari",LV:"Telefoni"},t.entranceCode={EN:"Entrance code",RU:"Домофон",FR:"Code d'entrée",DE:"Zugangscode",ES:"Código de entrada",PT:"Código de entrada",JA:"エントランスコード",ZH:"入口代码",UK:"Домофон",PL:"Domofon",KK:"Түсу коды",IT:"Codice d'ingresso",LV:"Ieejas kods"},t.comment={EN:"Comment",RU:"Комментарий",FR:"Commenter",DE:"Kommentar",ES:"Comentario",PT:"Comente",JA:"コメント",ZH:"评论",UK:"Коментар",PL:"Komentarz",KK:"Түсініктеме",IT:"Commento",LV:"Komentāri"},t.day={EN:"day",RU:"дня",FR:"journée",DE:"tag",ES:"día",PT:"dia",JA:"日",ZH:"日",UK:"дні",PL:"dzień",KK:"күн",IT:"giorno",LV:"diena"},t.days={EN:"days",RU:"дней",FR:"journées",DE:"Tage",ES:"dias",PT:"dias",JA:"日々",ZH:"天",UK:"днів",PL:"dzień",KK:"күн",IT:"giorni",LV:"dienas"},t.from={EN:"from",RU:"от",FR:"de",DE:"von",ES:"de",PT:"de",JA:"から",ZH:"从",UK:"від",PL:"od",KK:"бастап",IT:"da",LV:"no"},t.deliveryNotPossible={EN:"Unfortunately, delivery to your chosen city is not possible",RU:"К сожалению, в выбранный вами город доставка не осуществляется",FR:"Malheureusement, la livraison à votre ville choisie n'est pas possible",DE:"Leider ist eine Lieferung in der gewählten Stadt nicht möglich",ES:"Por desgracia, la entrega a su ciudad elegida no es posible",PT:"Infelizmente, a entrega à sua cidade escolhida não é possível",JA:"残念ながら、あなたの選ばれた都市への配信を行うことはできません",ZH:"不幸的是，送货到你所选择的城市是不可能的",UK:"На жаль, в обране місто доставка не здійснюється",PL:"Niestety nie dostarczamy w wybrane przez ciebie miejsce",KK:"Өкінішке орай, Сіздің таңдаған қалаға жеткізу мүмкін емес",IT:"Purtroppo, la consegna al vostro città scelta non è possibile",LV:"Diemžēl piegāde uz jūsu izvēlēto pilsētu netiek veikta"},t.delivery={EN:"Delivery",RU:"Доставка",FR:"Livraison",DE:"Lieferung",ES:"Entrega",PT:"Entrega",JA:"配達",ZH:"交货",UK:"Доставка",PL:"Dostawa",KK:"Жеткізілім",IT:"Consegna",LV:"Piegāde"},t.pickup={EN:"Pickup location",RU:"Пункт получения",FR:"Lieu de ramassage",DE:"Treffpunkt",ES:"Lugar de recogida",PT:"Local de retirada",JA:"ピックアップ場所",ZH:"接人的地方",UK:"Пункт отримання",PL:"Miejsce odbioru",KK:"Жеткізу орны",IT:"Posto di raccolta",LV:"Saņemšanas punkts"},t.selectPickup={EN:"Select pickup location",RU:"Выберите пункт получения",FR:"Sélectionnez l'emplacement pick-up",DE:"Wählen Sie Abholort",ES:"Seleccionar ubicación de recogida",PT:"Escolha local de retirada",JA:"ピックアップ場所を選択",ZH:"选择的取货地点",UK:"Виберіть пункт отримання",PL:"Wybierz miejsce odbioru",KK:"Желімді орынды таңдаңыз",IT:"Seleziona ubicazione pickup",LV:"Izvēlieties pikaps atrašanās vietu"},t.selectAddress={EN:"Please select an address from the options provided",RU:"Пожалуйста, выберите адрес из предложенных вариантов",FR:"S'il vous plaît sélectionner une adresse parmi les options proposées",DE:"Bitte wählen Sie eine Adresse aus den Optionen zur Verfügung gestellt",ES:"Por favor, seleccione una dirección de una de las opciones proporcionadas",PT:"Por favor seleccione um endereço entre as opções fornecidas",JA:"提供されるオプションからアドレスを選択してください",ZH:"请从所提供的选项的地址",UK:"Будь ласка, виберіть адресу із запропонованих варіантів",PL:"Wybierz adres wśród oferowanych opcji",KK:"Берілген параметрлерден мекенжайды таңдаңыз",IT:"Si prega di selezionare un indirizzo tra le opzioni previste",LV:"Lūdzu, izvēlieties adresi no piedāvātajām iespējām"},t.selectCity={EN:"Please select an city from the options provided",RU:"Пожалуйста, выберите город из предложенных вариантов",FR:"S'il vous plaît choisir une ville parmi les options proposées",DE:"Bitte wählen Sie eine Stadt aus den Optionen zur Verfügung gestellt",ES:"Por favor, seleccione una ciudad de entre las opciones proporcionadas",PT:"Por favor, selecione uma cidade entre as opções fornecidas",JA:"提供されるオプションから都市を選択してください",ZH:"请从所提供的选项的城市",UK:"Будь ласка, виберіть місто із запропонованих варіантів",PL:"Wybierz miejsce wśród oferowanych opcji",KK:"Берілген параметрлерден бір қаланы таңдаңыз",IT:"Si prega di selezionare una città tra le opzioni previste",LV:"Lūdzu, izvēlieties pilsētu no piedāvātajām iespējām"},t.orderComment={EN:"Order comment",RU:"Комментарий к заказу",FR:"Commentaire de commande",DE:"Bestellen Kommentar",ES:"Comentario de la orden",PT:"Comentário ordem",JA:"注文のコメント",ZH:"为了评论",UK:"Коментар до замовлення",PL:"Komentarz do zamówienia",KK:"Тапсырыс беру қатынасқа",IT:"Commento Order",LV:"Komentējiet pasūtījumu"},t.select={EN:"Select",RU:"Выбрать",FR:"Sélectionner",DE:"Wählen",ES:"Seleccione",PT:"Selecionar",JA:"選択する",ZH:"选择",UK:"Вибрати",PL:"Wybierz",KK:"Таңдаңыз",IT:"Selezionare",LV:"Izvēlieties"},t.workingHours={EN:"Working hours",RU:"Время работы",FR:"Heures d'ouverture",DE:"Arbeitszeit",ES:"Horas Laborales",PT:"Jornada de trabalho",JA:"勤務時間",ZH:"工作时间",UK:"Час роботи",PL:"Godziny robocze",KK:"Жұмыс сағаттары",IT:"Ore lavorative",LV:"Darba stundas"},t.unavailable={EN:"Delivery service temporarily unavailable.",RU:"К сожалению, в данный момент сервис доставки недоступен.",FR:"Service de livraison temporairement indisponible.",DE:"Zustelldienst vorübergehend nicht verfügbar.",ES:"Servicio de entrega disponible temporalmente.",PT:"Serviço de entrega temporariamente indisponíveis.",JA:"配達サービスが一時的に利用できません。",ZH:"送货服务暂时不可用。",UK:"Служба доставки тимчасово не працює.",PL:"Niestety, w tym momencie dostawa nie jest możliwa.",KK:"Жеткізу қызметі уақытша қол жетімсіз.",IT:"Servizio di consegna temporaneamente non disponibile.",LV:"Diemžēl piegādes pakalpojums pašlaik nav pieejams."},t.loadingServices={EN:"Loading delivery services",RU:"Получение сервисов доставки",FR:"Services de livraison de chargement",DE:"Laden Zustelldienste",ES:"Servicios Carga de entrega",PT:"Serviços de carga de entrega",JA:"ローディング配信サービス",ZH:"加载送货服务",UK:"Отримання сервісів доставки",PL:"Otrzymanie serwisów dostawy",KK:"Жеткізу қызметтері жүктелуде",IT:"Servizi di consegna Caricamento",LV:"Piegādes pakalpojumu saņemšana"},t.loadingPickup={EN:"Loading a list of pickup locations",RU:"Получение списка пунктов выдачи заказов",FR:"Chargement d'une liste d'emplacements pick-up",DE:"Laden einer Liste von Standorten pickup",ES:"Carga de una lista de los lugares de recogida",PT:"Carregando uma lista de locais de coleta",JA:"ピックアップ場所のリストを読み込みます",ZH:"加载接客位置的列表",UK:"Отримання списку пунктів видачі замовлень",PL:"Otrzymanie listy miejsc wydania zamówień",KK:"Желімді орындардың тізімін жүктеу",IT:"Caricamento di un elenco di luoghi di ritiro",LV:"Saņemšanas punktu saraksta iegūšana"},t.noResult={EN:"No results were found for your request",RU:"По вашему запросу ничего не найдено",FR:"Aucun résultat n'a été trouvé pour votre demande",DE:"Es wurden keine Ergebnisse für Ihre Anfrage gefunden",ES:"No se encontraron resultados para su solicitud",PT:"Não foram encontrados resultados para sua solicitação",JA:"該当する結果はあなたの要求のために見つかりませんでした",ZH:"没有找到您的要求",UK:"За вашим запитом нічого не знайдено",PL:"Brak wyników",KK:"Нәтижелері Сіздің сұранысыңыз бойынша табылған жоқ",IT:"Non sono stati trovati risultati per la tua richiesta",LV:"Jūsu meklēšanas vaicājumam netika atrasts neviens rezultāts"},t.change={EN:"Change",RU:"Изменить",FR:"Changer",DE:"Veränderung",ES:"Cambio",PT:"Mudar",JA:"変化する",ZH:"改变",UK:"Змінити",PL:"Zmień",KK:"Өзгеріс",IT:"Modificare",LV:"Rediģēt"},t.fullName={EN:"Full name",RU:"Получатель (ФИО полностью)",FR:"Nom et prénom",DE:"Vollständiger Name",ES:"Nombre completo",PT:"Nome completo",JA:"フルネーム",ZH:"全名",UK:"Одержувач (ПІБ повністю)",PL:"Pełne imię",KK:"Толық аты",IT:"Nome e cognome",LV:"Saņēmējs (pilns vārds)"},t.johnDoe={EN:"John Doe",RU:"Иванов Иван Иванович",FR:"Jean Dupont",DE:"Max Mustermann",ES:"Fulano de Tal",PT:"Fulano de Tal",JA:"なになに",ZH:"张三",UK:"Іван Іванович Іваненко",PL:"Jan Kowalski",KK:"Алмаз Ахметов",IT:"Mario Rossi",LV:"John Doe"},t.savedAddressesSelectWarning={EN:"Unfortunately, this delivery option is not available for the saved address. Please enter a new address.",RU:"К сожалению, данный вариант доставки по сохраненному адресу недоступен. Укажите новый адрес.",FR:"Malheureusement, cette option de livraison n'est pas disponible pour l'adresse enregistrée. Veuillez fournir une nouvelle adresse.",DE:"Diese Lieferoption ist für die gespeicherte Adresse leider nicht verfügbar. Bitte geben Sie eine neue Adresse ein.",ES:"Esta opción de entrega no está disponible para la dirección guardada. Por favor, ingrese una nueva dirección.",PT:"Essa opção de entrega não está disponível para o endereço salvo. Por favor, insira um novo endereço.",JA:"申し訳ありませんが、この配送オプションは保存された住所では利用できません。新しい住所を入力してください。",ZH:"很抱歉，此送货选项不适用于保存的地址。请提供一个新地址。",UK:"На жаль, цей варіант доставки для збереженої адреси недоступний. Будь ласка, вкажіть нову адресу.",PL:"Niestety, ta opcja dostawy nie jest dostępna dla zapisanego adresu. Proszę podać nowy adres.",KK:"Өкінішке орай, сақталған мекенжайға бұл жеткізу нұсқасы қолжетімсіз. Жаңа мекенжайды көрсетіңіз.",IT:"Purtroppo, questa opzione di consegna non è disponibile per l'indirizzo salvato. Si prega di fornire un nuovo indirizzo.",LV:"Diemžēl šī piegādes opcija saglabātajai adresei nav pieejama. Lūdzu, norādiet jaunu adresi."},t.newAddress={EN:"New address",RU:"Новый адрес",FR:"Nouvelle adresse",DE:"Neue Adresse",ES:"Nueva dirección",PT:"Novo endereço",JA:"新しい住所",ZH:"新地址",UK:"Нова адреса",PL:"Nowy adres",KK:"Жаңа мекенжай",IT:"Nuovo indirizzo",LV:"Jauna adrese"},t.savedAddresses={EN:"Saved addresses",RU:"Сохраненные адреса",FR:"Adresses enregistrées",DE:"Gespeicherte Adressen",ES:"Direcciones guardadas",PT:"Endereços salvos",JA:"保存された住所",ZH:"已保存的地址",UK:"Збережені адреси",PL:"Zapisane adresy",KK:"Сақталған мекенжайлар",IT:"Indirizzi salvati",LV:"Saglabātās adreses"},t.RU={RU:"Россия",EN:"Russia"};var r=window.t_delivery__browserLang;return t[e]?t[e][r]?t[e][r]:t[e].EN:"Text not found #"+e}function t_delivery__declensionOfNumber(e){return parseInt(e,10)%10==1&&11!==parseInt(e,10)?t_delivery__dict("day"):t_delivery__dict("days")}function t_delivery__showPrice(e){var t=e;if(void 0===t||0==t||""==t)t="";else{var r;if(t=t.toString(),void 0!==window.tcart.currency_dec&&"00"==window.tcart.currency_dec)if(-1===t.indexOf(".")&&-1===t.indexOf(","))t+=".00";else 1===t.substr(t.indexOf(".")+1).length&&(t+="0");t=t.replace(/\B(?=(\d{3})+(?!\d))/g," "),void 0!==window.tcart.currency_sep&&","==window.tcart.currency_sep&&(t=t.replace(".",",")),t=window.tcart.currency_txt_l+t+window.tcart.currency_txt_r}return t}function t_delivery__getDeliveryInputByKey(e){var t="tildadelivery-"+e,r;return document.querySelector('.t706 [name="'+t+'"]')}function t_triggerEvent(e,t){var r;document.createEvent?(r=document.createEvent("HTMLEvents")).initEvent(t,!0,!1):document.createEventObject&&((r=document.createEventObject()).eventType=t),r.eventName=t,e.dispatchEvent?e.dispatchEvent(r):e.fireEvent?e.fireEvent("on"+r.eventType,r):e[t]?e[t]():e["on"+t]&&e["on"+t]()}function t_delivery__replaceUnicode(e){if(!e)return"";var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#x2F;":"/","&#x60;":"`","&#x3D;":"="};return String(e).replace(/&amp;|&lt;|&gt;|&quot;|&#39;|&#x2F;|&#x60;|&#x3D;/g,(function(e){return t[e]}))}function t_delivery__loadJSFile(e){return new Promise((function(t,r){if(document.querySelector('script[src^="'+e+'"]'))t();else{var i=document.createElement("script");i.type="text/javascript",i.src=e,i.onload=t,i.onerror=r,document.head.appendChild(i)}}))}function t_delivery__getRootZone(){var e=document.getElementById("allrecords"),t;return e&&e.getAttribute("data-tilda-root-zone")||"com"}window.tcart__errorHandler={show:function e(t){var r=document.querySelectorAll(".t706 .js-errorbox-all"),i=document.querySelectorAll(".t706 .t-form__errorbox-item.js-rule-error-string");t&&Array.prototype.forEach.call(i,(function(e){e.innerHTML=t})),Array.prototype.forEach.call(i,(function(e){""!==e.textContent&&(e.style.display="block",Array.prototype.forEach.call(r,(function(e){e&&(e.style.display="")})))}))},hide:function e(){var t=document.querySelectorAll(".t706 .js-errorbox-all"),r=document.querySelectorAll(".t706 .t-form__errorbox-item.js-rule-error-string");Array.prototype.forEach.call(t,(function(e){e&&(e.style.display="none")})),Array.prototype.forEach.call(r,(function(e){e&&(e.style.display="none")})),Array.prototype.forEach.call(r,(function(e){e.innerHTML=""}))}},window.window.tcart__inputErrorHandler={show:function e(t,r){var i=t.closest(".t-input-group"),a;i&&(i.querySelector(".t-input-error").textContent=r,i.classList.add("js-error-control-box"))},hide:function e(t){var r=t.closest(".t-input-group"),i;r&&(r.querySelector(".t-input-error").textContent="",r.classList.remove("js-error-control-box"))}},window.t_delivery__autocompleteFields={keys:["street","house","entrance","floor","aptoffice","phone","entrancecode","comment","postalcode","userinitials","onelineaddress","pickup-name","pickup-address","pickup-id"],clearState:function e(){window.t_delivery__userFieldsAutoComplete&&this.keys.forEach((function(e){window.t_delivery__userFieldsAutoComplete[e]=""}))}},window.t_delivery__lang={_defaultLang:window.t_delivery__browserLang||"",_lang:"",get lang(){return(this._lang||this._defaultLang).toUpperCase()},set lang(e){this._lang=e||""},clearLang:function e(){this._lang=""}},window.tcart__preloader={show:function e(t,r){if(t){var i=document.getElementById("customdelivery");if(i&&!i.querySelector(".tcart__preloader")){var a=document.createElement("div");if(a.classList.add("tcart__preloader"),a.style.cssText="margin: 20px 0;",r){var n=document.createElement("div");n.classList.add("t-text"),a.style.cssText="text-align: center; opacity: .5; font-size: 15px;",n.appendChild(document.createTextNode(r)),a.appendChild(n)}var o=document.createElement("div");o.classList.add("tcart__preloder__img"),o.innerHTML='\n                <svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\n                    <g fill="#c5c5c5">\n                        <rect class="t-icon-loader-rect" x="14" width="4" height="11" rx="2" />\n                        <rect class="t-icon-loader-rect" x="14" width="4" height="11" rx="2" transform="rotate(45 16 16)" />\n                        <rect class="t-icon-loader-rect" x="14" width="4" height="11" rx="2" transform="rotate(90 16 16)" />\n                        <rect class="t-icon-loader-rect" x="14" width="4" height="11" rx="2" transform="rotate(135 16 16)" />\n                        <rect class="t-icon-loader-rect" x="14" width="4" height="11" rx="2" transform="rotate(180 16 16)" />\n                        <rect class="t-icon-loader-rect" x="14" width="4" height="11" rx="2" transform="rotate(225 16 16)" />\n                        <rect class="t-icon-loader-rect" x="14" width="4" height="11" rx="2" transform="rotate(270 16 16)" />\n                        <rect class="t-icon-loader-rect" x="14" width="4" height="11" rx="2" transform="rotate(315 16 16)" />\n                    </g>\n                </svg>\n            ',a.appendChild(o),t.insertAdjacentElement("beforebegin",a)}}},hide:function e(){var t=document.querySelector(".t706 .tcart__preloader");t&&t.parentNode&&t.parentNode.removeChild(t)}};var TCartSelect=function(){function e(e,t){this.container=null,this.selectedDiv=null,this.optionsContainer=null,this.value=null,this.changeListeners=[],this.options=t,this.element=e,this.init()}var t=e.prototype;return t.init=function e(){this.createContainer(),this.createSelected(),this.createOptions(),this.attachEventListeners();var t=this.options.items.find((function(e){return e.selected}));t&&this.setValue(t.value,!0),this.element.appendChild(this.container)},t.createContainer=function e(){this.container=document.createElement("div"),this.container.className="tcart-select"},t.createSelected=function e(){this.selectedDiv=document.createElement("div"),this.selectedDiv.className="tcart-select__selected t-input",this.selectedDiv.innerHTML=this.options.placeholder||"Select an option",this.container.appendChild(this.selectedDiv)},t.createOptions=function e(){var t=this;this.optionsContainer=document.createElement("div"),this.optionsContainer.className="tcart-select__options t-descr",this.options.items.forEach((function(e){var r=document.createElement("div");if(r.className="tcart-select__option",r.innerHTML=e.html,r.dataset.value=e.value,t.optionsContainer.appendChild(r),e.disabled)return r.classList.add("tcart-select__option_disabled"),void r.setAttribute("aria-disabled","true");void 0!==e.value&&null!==e.value?r.addEventListener("click",(function(){t.setValue(e.value),t.closeDropdown()})):r.classList.add("tcart-select__option_unselectable")})),this.container.appendChild(this.optionsContainer)},t.attachEventListeners=function e(){var t=this;this.selectedDiv.addEventListener("click",(function(){return t.toggleDropdown()})),document.addEventListener("click",(function(e){t.container.contains(e.target)||t.closeDropdown()}))},t.openDropdown=function e(){this.container.classList.add("tcart-select_open")},t.closeDropdown=function e(){this.container.classList.remove("tcart-select_open")},t.toggleDropdown=function e(){this.container.classList.toggle("tcart-select_open")},t.setValue=function e(t,r){if(void 0===r&&(r=!1),this.value!==t){var i=this.options.items.find((function(e){return e.value===t}));if(i&&!i.disabled){this.value=t,this.selectedDiv.innerHTML=i.html,this.optionsContainer.querySelectorAll(".tcart-select__option").forEach((function(e){e.classList.remove("tcart-select__option_selected")}));var a=this.optionsContainer.querySelector('[data-value="'+t+'"]');a&&a.classList.add("tcart-select__option_selected"),r||this.triggerChange()}}},t.getValue=function e(){return this.value},t.onChange=function e(t){this.changeListeners.push(t)},t.triggerChange=function e(){var t=this;this.changeListeners.forEach((function(e){return e(t.value)}))},e}();
